(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Seneca = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";const Hoek=require("@hapi/hoek"),internals={codes:new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Moved Temporarily"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Time-out"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Request Entity Too Large"],[414,"Request-URI Too Large"],[415,"Unsupported Media Type"],[416,"Requested Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a teapot"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Time-out"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]])};exports.Boom=class extends Error{constructor(t,e={}){if(t instanceof Error)return exports.boomify(Hoek.clone(t),e);const{statusCode:o=500,data:r=null,ctor:s=exports.Boom}=e,n=new Error(t||void 0);Error.captureStackTrace(n,s),n.data=r;const a=internals.initialize(n,o);return Object.defineProperty(a,"typeof",{value:s}),e.decorate&&Object.assign(a,e.decorate),a}static[Symbol.hasInstance](t){return exports.isBoom(t)}},exports.isBoom=function(t,e){return t instanceof Error&&!!t.isBoom&&(!e||t.output.statusCode===e)},exports.boomify=function(t,e){return Hoek.assert(t instanceof Error,"Cannot wrap non-Error object"),void 0!==(e=e||{}).data&&(t.data=e.data),e.decorate&&Object.assign(t,e.decorate),t.isBoom?!1===e.override||!e.statusCode&&!e.message?t:internals.initialize(t,e.statusCode||t.output.statusCode,e.message):internals.initialize(t,e.statusCode||500,e.message)},exports.badRequest=function(t,e){return new exports.Boom(t,{statusCode:400,data:e,ctor:exports.badRequest})},exports.unauthorized=function(t,e,o){const r=new exports.Boom(t,{statusCode:401,ctor:exports.unauthorized});if(!e)return r;if("string"!=typeof e)return r.output.headers["WWW-Authenticate"]=e.join(", "),r;let s=`${e}`;return(o||t)&&(r.output.payload.attributes={}),o&&("string"==typeof o?(s+=" "+Hoek.escapeHeaderAttribute(o),r.output.payload.attributes=o):s+=" "+Object.keys(o).map(t=>{let e=o[t];return null==e&&(e=""),r.output.payload.attributes[t]=e,`${t}="${Hoek.escapeHeaderAttribute(e.toString())}"`}).join(", ")),t?(o&&(s+=","),s+=` error="${Hoek.escapeHeaderAttribute(t)}"`,r.output.payload.attributes.error=t):r.isMissing=!0,r.output.headers["WWW-Authenticate"]=s,r},exports.paymentRequired=function(t,e){return new exports.Boom(t,{statusCode:402,data:e,ctor:exports.paymentRequired})},exports.forbidden=function(t,e){return new exports.Boom(t,{statusCode:403,data:e,ctor:exports.forbidden})},exports.notFound=function(t,e){return new exports.Boom(t,{statusCode:404,data:e,ctor:exports.notFound})},exports.methodNotAllowed=function(t,e,o){const r=new exports.Boom(t,{statusCode:405,data:e,ctor:exports.methodNotAllowed});return"string"==typeof o&&(o=[o]),Array.isArray(o)&&(r.output.headers.Allow=o.join(", ")),r},exports.notAcceptable=function(t,e){return new exports.Boom(t,{statusCode:406,data:e,ctor:exports.notAcceptable})},exports.proxyAuthRequired=function(t,e){return new exports.Boom(t,{statusCode:407,data:e,ctor:exports.proxyAuthRequired})},exports.clientTimeout=function(t,e){return new exports.Boom(t,{statusCode:408,data:e,ctor:exports.clientTimeout})},exports.conflict=function(t,e){return new exports.Boom(t,{statusCode:409,data:e,ctor:exports.conflict})},exports.resourceGone=function(t,e){return new exports.Boom(t,{statusCode:410,data:e,ctor:exports.resourceGone})},exports.lengthRequired=function(t,e){return new exports.Boom(t,{statusCode:411,data:e,ctor:exports.lengthRequired})},exports.preconditionFailed=function(t,e){return new exports.Boom(t,{statusCode:412,data:e,ctor:exports.preconditionFailed})},exports.entityTooLarge=function(t,e){return new exports.Boom(t,{statusCode:413,data:e,ctor:exports.entityTooLarge})},exports.uriTooLong=function(t,e){return new exports.Boom(t,{statusCode:414,data:e,ctor:exports.uriTooLong})},exports.unsupportedMediaType=function(t,e){return new exports.Boom(t,{statusCode:415,data:e,ctor:exports.unsupportedMediaType})},exports.rangeNotSatisfiable=function(t,e){return new exports.Boom(t,{statusCode:416,data:e,ctor:exports.rangeNotSatisfiable})},exports.expectationFailed=function(t,e){return new exports.Boom(t,{statusCode:417,data:e,ctor:exports.expectationFailed})},exports.teapot=function(t,e){return new exports.Boom(t,{statusCode:418,data:e,ctor:exports.teapot})},exports.badData=function(t,e){return new exports.Boom(t,{statusCode:422,data:e,ctor:exports.badData})},exports.locked=function(t,e){return new exports.Boom(t,{statusCode:423,data:e,ctor:exports.locked})},exports.failedDependency=function(t,e){return new exports.Boom(t,{statusCode:424,data:e,ctor:exports.failedDependency})},exports.tooEarly=function(t,e){return new exports.Boom(t,{statusCode:425,data:e,ctor:exports.tooEarly})},exports.preconditionRequired=function(t,e){return new exports.Boom(t,{statusCode:428,data:e,ctor:exports.preconditionRequired})},exports.tooManyRequests=function(t,e){return new exports.Boom(t,{statusCode:429,data:e,ctor:exports.tooManyRequests})},exports.illegal=function(t,e){return new exports.Boom(t,{statusCode:451,data:e,ctor:exports.illegal})},exports.internal=function(t,e,o=500){return internals.serverError(t,e,o,exports.internal)},exports.notImplemented=function(t,e){return internals.serverError(t,e,501,exports.notImplemented)},exports.badGateway=function(t,e){return internals.serverError(t,e,502,exports.badGateway)},exports.serverUnavailable=function(t,e){return internals.serverError(t,e,503,exports.serverUnavailable)},exports.gatewayTimeout=function(t,e){return internals.serverError(t,e,504,exports.gatewayTimeout)},exports.badImplementation=function(t,e){const o=internals.serverError(t,e,500,exports.badImplementation);return o.isDeveloperError=!0,o},internals.initialize=function(t,e,o){const r=parseInt(e,10);if(Hoek.assert(!isNaN(r)&&r>=400,"First argument must be a number (400+):",e),t.isBoom=!0,t.isServer=r>=500,t.hasOwnProperty("data")||(t.data=null),t.output={statusCode:r,payload:{},headers:{}},Object.defineProperty(t,"reformat",{value:internals.reformat}),o||t.message||(t.reformat(),o=t.output.payload.error),o){const e=Object.getOwnPropertyDescriptor(t,"message")||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"message");Hoek.assert(!e||e.configurable&&!e.get,"The error is not compatible with boom"),t.message=o+(t.message?": "+t.message:""),t.output.payload.message=t.message}return t.reformat(),t},internals.reformat=function(t=!1){this.output.payload.statusCode=this.output.statusCode,this.output.payload.error=internals.codes.get(this.output.statusCode)||"Unknown",500===this.output.statusCode&&!0!==t?this.output.payload.message="An internal server error occurred":this.message&&(this.output.payload.message=this.message)},internals.serverError=function(t,e,o,r){return e instanceof Error&&!e.isBoom?exports.boomify(e,{statusCode:o,message:t}):new exports.Boom(t,{statusCode:o,data:e,ctor:r})};

},{"@hapi/hoek":17}],2:[function(require,module,exports){
"use strict";const internals={suspectRx:/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/};exports.parse=function(t,...o){const e="object"==typeof o[0]&&o[0],r=o.length>1||!e?o[0]:void 0,n=o.length>1&&o[1]||e||{},s=JSON.parse(t,r);return"ignore"===n.protoAction?s:s&&"object"==typeof s&&t.match(internals.suspectRx)?(exports.scan(s,n),s):s},exports.scan=function(t,o={}){let e=[t];for(;e.length;){const t=e;e=[];for(const r of t){if(Object.prototype.hasOwnProperty.call(r,"__proto__")){if("remove"!==o.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete r.__proto__}for(const t in r){const o=r[t];o&&"object"==typeof o&&e.push(r[t])}}}},exports.safeParse=function(t,o){try{return exports.parse(t,o)}catch(t){return null}};

},{}],3:[function(require,module,exports){
"use strict";const Assert=require("./assert"),Clone=require("./clone"),Merge=require("./merge"),Reach=require("./reach"),internals={};module.exports=function(e,r,t={}){if(Assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),Assert(!r||!0===r||"object"==typeof r,"Invalid source value: must be true, falsy or an object"),Assert("object"==typeof t,"Invalid options: must be an object"),!r)return null;if(t.shallow)return internals.applyToDefaultsWithShallow(e,r,t);const n=Clone(e);if(!0===r)return n;const o=void 0!==t.nullOverride&&t.nullOverride;return Merge(n,r,{nullOverride:o,mergeArrays:!1})},internals.applyToDefaultsWithShallow=function(e,r,t){const n=t.shallow;Assert(Array.isArray(n),"Invalid keys");const o=new Map,s=!0===r?null:new Set;for(let t of n){t=Array.isArray(t)?t:t.split(".");const n=Reach(e,t);n&&"object"==typeof n?o.set(n,s&&Reach(r,t)||n):s&&s.add(t)}const l=Clone(e,{},o);if(!s)return l;for(const e of s)internals.reachCopy(l,r,e);return Merge(l,r,{mergeArrays:!1,nullOverride:!1})},internals.reachCopy=function(e,r,t){for(const e of t){if(!(e in r))return;r=r[e]}const n=r;let o=e;for(let e=0;e<t.length-1;++e){const r=t[e];"object"!=typeof o[r]&&(o[r]={}),o=o[r]}o[t[t.length-1]]=n};

},{"./assert":4,"./clone":7,"./merge":20,"./reach":22}],4:[function(require,module,exports){
"use strict";const AssertError=require("./error"),internals={};module.exports=function(r,...e){if(!r){if(1===e.length&&e[0]instanceof Error)throw e[0];throw new AssertError(e)}};

},{"./error":10}],5:[function(require,module,exports){
(function (process){
"use strict";const internals={};module.exports=internals.Bench=class{constructor(){this.ts=0,this.reset()}reset(){this.ts=internals.Bench.now()}elapsed(){return internals.Bench.now()-this.ts}static now(){const s=process.hrtime();return 1e3*s[0]+s[1]/1e6}};

}).call(this,require('_process'))
},{"_process":144}],6:[function(require,module,exports){
"use strict";const Ignore=require("./ignore"),internals={};module.exports=function(){return new Promise(Ignore)};

},{"./ignore":16}],7:[function(require,module,exports){
(function (Buffer){
"use strict";const Reach=require("./reach"),Types=require("./types"),Utils=require("./utils"),internals={needsProtoHack:new Set([Types.set,Types.map,Types.weakSet,Types.weakMap])};module.exports=internals.clone=function(e,t={},n=null){if("object"!=typeof e||null===e)return e;let r=internals.clone,o=n;if(t.shallow){if(!0!==t.shallow)return internals.cloneWithShallow(e,t);r=(e=>e)}else if(o){const t=o.get(e);if(t)return t}else o=new Map;const s=Types.getInternalProto(e);if(s===Types.buffer)return Buffer&&Buffer.from(e);if(s===Types.date)return new Date(e.getTime());if(s===Types.regex)return new RegExp(e);const a=internals.base(e,s,t);if(a===e)return e;if(o&&o.set(e,a),s===Types.set)for(const n of e)a.add(r(n,t,o));else if(s===Types.map)for(const[n,s]of e)a.set(n,r(s,t,o));const c=Utils.keys(e,t);for(const n of c){if("__proto__"===n)continue;if(s===Types.array&&"length"===n){a.length=e.length;continue}const c=Object.getOwnPropertyDescriptor(e,n);c?c.get||c.set?Object.defineProperty(a,n,c):c.enumerable?a[n]=r(e[n],t,o):Object.defineProperty(a,n,{enumerable:!1,writable:!0,configurable:!0,value:r(e[n],t,o)}):Object.defineProperty(a,n,{enumerable:!0,writable:!0,configurable:!0,value:r(e[n],t,o)})}return a},internals.cloneWithShallow=function(e,t){const n=t.shallow;(t=Object.assign({},t)).shallow=!1;const r=new Map;for(const t of n){const n=Reach(e,t);"object"!=typeof n&&"function"!=typeof n||r.set(n,n)}return internals.clone(e,t,r)},internals.base=function(e,t,n){if(!1===n.prototype)return internals.needsProtoHack.has(t)?new t.constructor:t===Types.array?[]:{};const r=Object.getPrototypeOf(e);if(r&&r.isImmutable)return e;if(t===Types.array){const e=[];return r!==t&&Object.setPrototypeOf(e,r),e}if(internals.needsProtoHack.has(t)){const e=new r.constructor;return r!==t&&Object.setPrototypeOf(e,r),e}return Object.create(r)};

}).call(this,require("buffer").Buffer)
},{"./reach":22,"./types":25,"./utils":26,"buffer":49}],8:[function(require,module,exports){
"use strict";const Assert=require("./assert"),DeepEqual=require("./deepEqual"),EscapeRegex=require("./escapeRegex"),Utils=require("./utils"),internals={};module.exports=function(e,t,r={}){return"object"!=typeof t&&(t=[t]),Assert(!Array.isArray(t)||t.length,"Values array cannot be empty"),"string"==typeof e?internals.string(e,t,r):Array.isArray(e)?internals.array(e,t,r):(Assert("object"==typeof e,"Reference must be string or an object"),internals.object(e,t,r))},internals.array=function(e,t,r){if(Array.isArray(t)||(t=[t]),!e.length)return!1;if(r.only&&r.once&&e.length!==t.length)return!1;let n;const o=new Map;for(const e of t)if(r.deep&&e&&"object"==typeof e){n=n||internals.compare(r);let t=!1;for(const[r,s]of o.entries())if(n(r,e)){++s.allowed,t=!0;break}t||o.set(e,{allowed:1,hits:0})}else{const t=o.get(e);t?++t.allowed:o.set(e,{allowed:1,hits:0})}let s=0;for(const t of e){let e;if(r.deep&&t&&"object"==typeof t){n=n||internals.compare(r);for(const[r,s]of o.entries())if(n(r,t)){e=s;break}}else e=o.get(t);if(e&&(++e.hits,++s,r.once&&e.hits>e.allowed))return!1}if(r.only&&s!==e.length)return!1;for(const e of o.values())if(e.hits!==e.allowed&&e.hits<e.allowed&&!r.part)return!1;return!!s},internals.object=function(e,t,r){Assert(void 0===r.once,"Cannot use option once with object");const n=Utils.keys(e,r);if(!n.length)return!1;if(Array.isArray(t))return internals.array(n,t,r);const o=Object.getOwnPropertySymbols(t).filter(e=>t.propertyIsEnumerable(e)),s=[...Object.keys(t),...o],i=internals.compare(r),l=new Set(s);for(const o of n)if(l.has(o)){if(!i(t[o],e[o]))return!1;l.delete(o)}else if(r.only)return!1;return!l.size||!!r.part&&l.size<s.length},internals.string=function(e,t,r){if(""===e)return 1===t.length&&""===t[0]||!r.once&&!t.some(e=>""!==e);const n=new Map,o=[];for(const e of t)if(Assert("string"==typeof e,"Cannot compare string reference to non-string value"),e){const t=n.get(e);t?++t.allowed:(n.set(e,{allowed:1,hits:0}),o.push(EscapeRegex(e)))}else if(r.once||r.only)return!1;if(!o.length)return!0;const s=new RegExp(`(${o.join("|")})`,"g"),i=e.replace(s,(e,t)=>(++n.get(t).hits,""));if(r.only&&i)return!1;let l=!1;for(const e of n.values())if(e.hits&&(l=!0),e.hits!==e.allowed){if(e.hits<e.allowed&&!r.part)return!1;if(r.once)return!1}return!!l},internals.compare=function(e){if(!e.deep)return internals.shallow;const t=void 0!==e.only,r=void 0!==e.part,n={prototype:t?e.only:!!r&&!e.part,part:t?!e.only:!!r&&e.part};return(e,t)=>DeepEqual(e,t,n)},internals.shallow=function(e,t){return e===t};

},{"./assert":4,"./deepEqual":9,"./escapeRegex":14,"./utils":26}],9:[function(require,module,exports){
(function (Buffer){
"use strict";const Types=require("./types"),internals={mismatched:null};module.exports=function(e,t,r){return r=Object.assign({prototype:!0},r),!!internals.isDeepEqual(e,t,r,[])},internals.isDeepEqual=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!r.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const i=internals.getSharedType(e,t,!!r.prototype);switch(i){case Types.buffer:return Buffer&&Buffer.prototype.equals.call(e,t);case Types.promise:return e===t;case Types.regex:return e.toString()===t.toString();case internals.mismatched:return!1}for(let r=n.length-1;r>=0;--r)if(n[r].isSame(e,t))return!0;n.push(new internals.SeenEntry(e,t));try{return!!internals.isDeepEqualObj(i,e,t,r,n)}finally{n.pop()}},internals.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?internals.mismatched:Types.getInternalProto(e);const n=Types.getInternalProto(e);return n!==Types.getInternalProto(t)?internals.mismatched:n},internals.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},internals.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},internals.isSetSimpleEqual=function(e,t){for(const r of e)if(!t.has(r))return!1;return!0},internals.isDeepEqualObj=function(e,t,r,n,s){const{isDeepEqual:i,valueOf:o,hasOwnEnumerableProperty:f}=internals,{keys:u,getOwnPropertySymbols:l}=Object;if(e===Types.array){if(!n.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],n,s))return!1;return!0}for(const e of t)for(const t of r)if(i(e,t,n,s))return!0}else if(e===Types.set){if(t.size!==r.size)return!1;if(!internals.isSetSimpleEqual(t,r)){const e=new Set(r);for(const r of t){if(e.delete(r))continue;let t=!1;for(const o of e)if(i(r,o,n,s)){e.delete(o),t=!0;break}if(!t)return!1}}}else if(e===Types.map){if(t.size!==r.size)return!1;for(const[e,o]of t){if(void 0===o&&!r.has(e))return!1;if(!i(o,r.get(e),n,s))return!1}}else if(e===Types.error&&(t.name!==r.name||t.message!==r.message))return!1;const a=o(t),c=o(r);if((t!==a||r!==c)&&!i(a,c,n,s))return!1;const p=u(t);if(!n.part&&p.length!==u(r).length&&!n.skip)return!1;let y=0;for(const e of p)if(n.skip&&n.skip.includes(e))void 0===r[e]&&++y;else{if(!f(r,e))return!1;if(!i(t[e],r[e],n,s))return!1}if(!n.part&&p.length-y!==u(r).length)return!1;if(!1!==n.symbols){const e=l(t),o=new Set(l(r));for(const u of e){if(!n.skip||!n.skip.includes(u))if(f(t,u)){if(!f(r,u))return!1;if(!i(t[u],r[u],n,s))return!1}else if(f(r,u))return!1;o.delete(u)}for(const e of o)if(f(r,e))return!1}return!0},internals.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}};

}).call(this,require("buffer").Buffer)
},{"./types":25,"buffer":49}],10:[function(require,module,exports){
"use strict";const Stringify=require("./stringify"),internals={};module.exports=class extends Error{constructor(r){super(r.filter(r=>""!==r).map(r=>"string"==typeof r?r:r instanceof Error?r.message:Stringify(r)).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,exports.assert)}};

},{"./stringify":24}],11:[function(require,module,exports){
"use strict";const Assert=require("./assert"),internals={};module.exports=function(e){return Assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')};

},{"./assert":4}],12:[function(require,module,exports){
"use strict";const internals={};module.exports=function(n){if(!n)return"";let t="";for(let e=0;e<n.length;++e){const r=n.charCodeAt(e);internals.isSafe(r)?t+=n[e]:t+=internals.escapeHtmlChar(r)}return t},internals.escapeHtmlChar=function(n){const t=internals.namedHtml[n];return void 0!==t?t:n>=256?"&#"+n+";":`&#x${n.toString(16).padStart(2,"0")};`},internals.isSafe=function(n){return void 0!==internals.safeCharCodes[n]},internals.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},internals.safeCharCodes=function(){const n={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(n[t]=null);return n}();

},{}],13:[function(require,module,exports){
"use strict";const internals={};module.exports=function(u){if(!u)return"";let e;return u.replace(/[<>&\u2028\u2029]/g,u=>60===(e=u.charCodeAt(0))?"\\u003c":62===e?"\\u003e":38===e?"\\u0026":8232===e?"\\u2028":"\\u2029")};

},{}],14:[function(require,module,exports){
"use strict";const internals={};module.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};

},{}],15:[function(require,module,exports){
"use strict";const internals={};module.exports=internals.flatten=function(t,n){const r=n||[];for(let n=0;n<t.length;++n)Array.isArray(t[n])?internals.flatten(t[n],r):r.push(t[n]);return r};

},{}],16:[function(require,module,exports){
"use strict";const internals={};module.exports=function(){};

},{}],17:[function(require,module,exports){
"use strict";const internals={};module.exports={applyToDefaults:require("./applyToDefaults"),assert:require("./assert"),Bench:require("./bench"),block:require("./block"),clone:require("./clone"),contain:require("./contain"),deepEqual:require("./deepEqual"),Error:require("./error"),escapeHeaderAttribute:require("./escapeHeaderAttribute"),escapeHtml:require("./escapeHtml"),escapeJson:require("./escapeJson"),escapeRegex:require("./escapeRegex"),flatten:require("./flatten"),ignore:require("./ignore"),intersect:require("./intersect"),isPromise:require("./isPromise"),merge:require("./merge"),once:require("./once"),reach:require("./reach"),reachTemplate:require("./reachTemplate"),stringify:require("./stringify"),wait:require("./wait")};

},{"./applyToDefaults":3,"./assert":4,"./bench":5,"./block":6,"./clone":7,"./contain":8,"./deepEqual":9,"./error":10,"./escapeHeaderAttribute":11,"./escapeHtml":12,"./escapeJson":13,"./escapeRegex":14,"./flatten":15,"./ignore":16,"./intersect":18,"./isPromise":19,"./merge":20,"./once":21,"./reach":22,"./reachTemplate":23,"./stringify":24,"./wait":27}],18:[function(require,module,exports){
"use strict";const internals={};module.exports=function(n,t,r={}){if(!n||!t)return r.first?null:[];const s=[],e=Array.isArray(n)?new Set(n):n,i=new Set;for(const n of t)if(internals.has(e,n)&&!i.has(n)){if(r.first)return n;s.push(n),i.add(n)}return r.first?null:s},internals.has=function(n,t){return"function"==typeof n.has?n.has(t):void 0!==n[t]};

},{}],19:[function(require,module,exports){
"use strict";const internals={};module.exports=function(t){return!!t&&"function"==typeof t.then};

},{}],20:[function(require,module,exports){
(function (Buffer){
"use strict";const Assert=require("./assert"),Clone=require("./clone"),Utils=require("./utils"),internals={};module.exports=internals.merge=function(e,r,t){if(Assert(e&&"object"==typeof e,"Invalid target value: must be an object"),Assert(null==r||"object"==typeof r,"Invalid source value: must be null, undefined, or an object"),!r)return e;if(t=Object.assign({nullOverride:!0,mergeArrays:!0},t),Array.isArray(r)){Assert(Array.isArray(e),"Cannot merge array onto an object"),t.mergeArrays||(e.length=0);for(let s=0;s<r.length;++s)e.push(Clone(r[s],{symbols:t.symbols}));return e}const s=Utils.keys(r,t);for(let n=0;n<s.length;++n){const o=s[n];if("__proto__"===o||!Object.prototype.propertyIsEnumerable.call(r,o))continue;const l=r[o];if(l&&"object"==typeof l){if(e[o]===l)continue;!e[o]||"object"!=typeof e[o]||Array.isArray(e[o])!==Array.isArray(l)||l instanceof Date||Buffer&&Buffer.isBuffer(l)||l instanceof RegExp?e[o]=Clone(l,{symbols:t.symbols}):internals.merge(e[o],l,t)}else null!=l?e[o]=l:t.nullOverride&&(e[o]=l)}return e};

}).call(this,require("buffer").Buffer)
},{"./assert":4,"./clone":7,"./utils":26,"buffer":49}],21:[function(require,module,exports){
"use strict";const internals={};module.exports=function(n){if(n._hoekOnce)return n;let e=!1;const t=function(...t){e||(e=!0,n(...t))};return t._hoekOnce=!0,t};

},{}],22:[function(require,module,exports){
"use strict";const Assert=require("./assert"),internals={};module.exports=function(t,e,r){if(!1===e||null==e)return t;"string"==typeof(r=r||{})&&(r={separator:r});const n=Array.isArray(e);Assert(!n||!r.separator,"Separator option no valid for array-based chain");const s=n?e:e.split(r.separator||".");let a=t;for(let t=0;t<s.length;++t){let n=s[t];const i=r.iterables&&internals.iterables(a);if(Array.isArray(a)||"set"===i){const t=Number(n);Number.isInteger(t)&&(n=t<0?a.length+t:t)}if(!a||"function"==typeof a&&!1===r.functions||!i&&void 0===a[n]){Assert(!r.strict||t+1===s.length,"Missing segment",n,"in reach path ",e),Assert("object"==typeof a||!0===r.functions||"function"!=typeof a,"Invalid segment",n,"in reach path ",e),a=r.default;break}a=i?"set"===i?[...a][n]:a.get(n):a[n]}return a},internals.iterables=function(t){return t instanceof Set?"set":t instanceof Map?"map":void 0};

},{"./assert":4}],23:[function(require,module,exports){
"use strict";const Reach=require("./reach"),internals={};module.exports=function(e,r,n){return r.replace(/{([^}]+)}/g,(r,t)=>{const c=Reach(e,t,n);return null==c?"":c})};

},{"./reach":22}],24:[function(require,module,exports){
"use strict";const internals={};module.exports=function(...t){try{return JSON.stringify.apply(null,t)}catch(t){return"[Cannot display object: "+t.message+"]"}};

},{}],25:[function(require,module,exports){
(function (Buffer){
"use strict";const internals={};exports=module.exports={array:Array.prototype,buffer:Buffer&&Buffer.prototype,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},internals.typeMap=new Map([["[object Error]",exports.error],["[object Map]",exports.map],["[object Promise]",exports.promise],["[object Set]",exports.set],["[object WeakMap]",exports.weakMap],["[object WeakSet]",exports.weakSet]]),exports.getInternalProto=function(e){if(Array.isArray(e))return exports.array;if(Buffer&&e instanceof Buffer)return exports.buffer;if(e instanceof Date)return exports.date;if(e instanceof RegExp)return exports.regex;if(e instanceof Error)return exports.error;const r=Object.prototype.toString.call(e);return internals.typeMap.get(r)||exports.generic};

}).call(this,require("buffer").Buffer)
},{"buffer":49}],26:[function(require,module,exports){
"use strict";const internals={};exports.keys=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)};

},{}],27:[function(require,module,exports){
"use strict";const internals={};module.exports=function(e){return new Promise(t=>setTimeout(t,e))};

},{}],28:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.joi=t():e.joi=t()}(window,function(){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(e,t,r){"use strict";const s=r(12);e.exports=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new s(t)}}},function(e,t,r){"use strict";const s=r(0),n=r(12),o=r(29);let a,i;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=o.version,t.defaults={abortEarly:!0,allowUnknown:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),literal:Symbol("literal"),override:Symbol("override"),prefs:Symbol("prefs"),ref:Symbol("ref"),values:Symbol("values"),template:Symbol("template")},t.assertOptions=function(e,t,r="Options"){s(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const n=Object.keys(e).filter(e=>!t.includes(e));s(0===n.length,"".concat(r," contain unknown keys: ").concat(n))},t.checkPreferences=function(e){const t=(i=i||r(16)).preferences.validate(e);if(t.error)throw new n([t.error.details[0].message])},t.compare=function(e,t,r){switch(r){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e,r={}){const n=e&&e[t.symbols.any];return!!n&&(s(r.legacy||n.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,s){a=a||r(9),e=e||{},s=s||{};const n=Object.assign({},e,s);return s.errors&&e.errors&&(n.errors=Object.assign({},e.errors,s.errors),n.errors.wrap=Object.assign({},e.errors.wrap,s.errors.wrap)),s.messages&&(n.messages=a.compile(s.messages,e.messages)),delete n[t.symbols.prefs],n},t.tryWithPath=function(e,t,r={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,r.append&&(e.message="".concat(e.message," (").concat(e.path,")")),e}},t.validateArg=function(e,r,{assert:s,message:n}){if(t.isSchema(s)){const t=s.validate(e);if(!t.error)return;return t.error.message}if(!s(e))return r?"".concat(r," ").concat(n):n},t.verifyFlat=function(e,t){for(const r of e)s(!Array.isArray(r),"Method no longer accepts array arguments:",t)}},function(e,t,r){"use strict";const s=r(6),n=r(13),o=r(14),a={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};e.exports=a.clone=function(e,t={},r=null){if("object"!=typeof e||null===e)return e;let s=a.clone,i=r;if(t.shallow){if(!0!==t.shallow)return a.cloneWithShallow(e,t);s=(e=>e)}else if(i){const t=i.get(e);if(t)return t}else i=new Map;const l=n.getInternalProto(e);if(l===n.buffer)return!1;if(l===n.date)return new Date(e.getTime());if(l===n.regex)return new RegExp(e);const c=a.base(e,l,t);if(c===e)return e;if(i&&i.set(e,c),l===n.set)for(const r of e)c.add(s(r,t,i));else if(l===n.map)for(const[r,n]of e)c.set(r,s(n,t,i));const u=o.keys(e,t);for(const r of u){if("__proto__"===r)continue;if(l===n.array&&"length"===r){c.length=e.length;continue}const o=Object.getOwnPropertyDescriptor(e,r);o?o.get||o.set?Object.defineProperty(c,r,o):o.enumerable?c[r]=s(e[r],t,i):Object.defineProperty(c,r,{enumerable:!1,writable:!0,configurable:!0,value:s(e[r],t,i)}):Object.defineProperty(c,r,{enumerable:!0,writable:!0,configurable:!0,value:s(e[r],t,i)})}return c},a.cloneWithShallow=function(e,t){const r=t.shallow;(t=Object.assign({},t)).shallow=!1;const n=new Map;for(const t of r){const r=s(e,t);"object"!=typeof r&&"function"!=typeof r||n.set(r,r)}return a.clone(e,t,n)},a.base=function(e,t,r){if(!1===r.prototype)return a.needsProtoHack.has(t)?new t.constructor:t===n.array?[]:{};const s=Object.getPrototypeOf(e);if(s&&s.isImmutable)return e;if(t===n.array){const e=[];return s!==t&&Object.setPrototypeOf(e,s),e}if(a.needsProtoHack.has(t)){const e=new s.constructor;return s!==t&&Object.setPrototypeOf(e,s),e}return Object.create(s)}},function(e,t,r){"use strict";const s=r(0),n=r(34),o=r(1),a=r(9);e.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return s("function"==typeof e,"Method must be a function"),s(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,{method:r}){try{return r(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){s(o.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return s(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate:(e,t,{code:r,local:s})=>t.error(r,s),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=a.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const r in t){const s=t[r];if(["examples","externals","metas","notes","tags"].includes(r))for(const t of s)e=e[r.slice(0,-1)](t);else if("alterations"!==r)if("whens"!==r){if("shared"===r)for(const t of s)e=e.shared(t)}else for(const t of s){const{ref:r,is:s,not:n,then:o,otherwise:a,concat:i}=t;e=i?e.concat(i):r?e.when(r,{is:s,not:n,then:o,otherwise:a,switch:t.switch,break:t.break}):e.when(s,{then:o,otherwise:a,break:t.break})}else{const t={};for(const{target:e,adjuster:r}of s)t[e]=r;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":'{{#label}} {{#arg}} references "{{#ref}}" which {{#reason}}',"any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},function(e,t,r){"use strict";const s=r(32),n=r(1),o=r(7);t.Report=class{constructor(e,r,s,n,o,a,i){if(this.code=e,this.flags=n,this.messages=o,this.path=a.path,this.prefs=i,this.state=a,this.value=r,this.message=null,this.template=null,this.local=s||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?'Error code "'.concat(e,'" is not defined, your custom type is missing the correct messages definition'):(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,r){return t.template(this.value,e,r||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const r of e)"object"!=typeof r&&("string"==typeof r?(t&&(t+="."),t+=r):t+="[".concat(r,"]"));return t},t.template=function(e,t,r,s,a){if(!t)return;if(o.isTemplate(t))return"root"!==r?t:null;let i=a.errors.language;return n.isResolvable(i)&&(i=i.resolve(e,s,a)),i&&t[i]&&void 0!==t[i][r]?t[i][r]:t[r]},t.label=function(e,r,s,n){if(e.label)return e.label;if(!s.errors.label)return"";let o=r.path;return"key"===s.errors.label&&r.path.length>1&&(o=r.path.slice(-1)),t.path(o)||t.template(null,s.messages,"root",r,s)||n&&t.template(null,n,"root",r,s)||"value"},t.process=function(e,r,s){if(!e)return null;const{override:n,message:o,details:a}=t.details(e);if(n)return n;if(s.errors.stack)return new t.ValidationError(o,a,r);const i=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(o,a,r);return Error.stackTraceLimit=i,l},t.details=function(e,t={}){let r=[];const s=[];for(const n of e){if(n instanceof Error){if(!1!==t.override)return{override:n};const e=n.toString();r.push(e),s.push({message:e,type:"override",context:{error:n}});continue}const e=n.toString();r.push(e),s.push({message:e,path:n.path.filter(e=>"object"!=typeof e),type:n.code,context:n.local})}return r.length>1&&(r=[...new Set(r)]),{message:r.join(". "),details:s}},t.ValidationError=class extends Error{constructor(e,t,r){super(e),this._original=r,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=s.error},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(6),a=r(1);let i;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e,t={}){s("string"==typeof e,"Invalid reference key:",e),a.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","separator"]),s(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const r=Object.assign({},l.defaults,t);delete r.prefix;const n=r.separator,o=l.context(e,n,t.prefix);if(r.type=o.type,e=o.key,"value"===r.type)if(o.root&&(s(!n||e[0]!==n,"Cannot specify relative path with root prefix"),r.ancestor="root",e||(e=null)),n&&n===e)e=null,r.ancestor=0;else if(void 0!==r.ancestor)s(!n||!e||e[0]!==n,"Cannot combine prefix with ancestor option");else{const[t,s]=l.ancestor(e,n);s&&""===(e=e.slice(s))&&(e=null),r.ancestor=t}return r.path=n?null===e?[]:e.split(n):[e],new l.Ref(r)},t.in=function(e,r={}){return t.create(e,Object.assign({},r,{in:!0}))},t.isRef=function(e){return!!e&&!!e[a.symbols.ref]},l.Ref=class{constructor(e){s("object"==typeof e,"Invalid reference construction"),a.assertOptions(e,["adjust","ancestor","in","iterables","map","path","separator","type","depth","key","root","display"]),s([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),s(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),s(!e.map||Array.isArray(e.map),"options.map must be an array"),s(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),s("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,r,n,o={}){return s(!this.in||o.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(r.context,t,o):"local"===this.type?this._resolve(n,t,o):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,o):(s(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,o)):this._resolve(e,t,o)}_resolve(e,t,r){let s;if("value"===this.type&&t.mainstay.shadow&&!1!==r.shadow&&(s=t.mainstay.shadow.get(this.absolute(t))),void 0===s&&(s=o(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(s=this.adjust(s)),this.map){const e=this.map.get(s);void 0!==e&&(s=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,s),s}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables"])null!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display="ref:".concat(this.type,":").concat(e));if(!this.separator)return void(this.display="ref:".concat(e));if(!this.ancestor)return void(this.display="ref:".concat(this.separator).concat(e));if("root"===this.ancestor)return void(this.display="ref:root:".concat(e));if(1===this.ancestor)return void(this.display="ref:".concat(e||".."));const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display="ref:".concat(t).concat(e||"")}},l.Ref.prototype[a.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t,r={}){if(e=e.trim(),r){const s=void 0===r.global?"$":r.global;if(s!==t&&e.startsWith(s))return{key:e.slice(s.length),type:"global"};const n=void 0===r.local?"#":r.local;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"local"};const o=void 0===r.root?"/":r.root;if(o!==t&&e.startsWith(o))return{key:e.slice(o.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let r=2;for(;e[r]===t;)++r;return[r-1,r]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,s){if(e)if(s=void 0===s?t.toParent:s,Array.isArray(e))for(const t of e)this.register(t,s);else if(a.isSchema(e))for(const t of e._refs.refs)t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-s>=0&&this.refs.push({ancestor:e.ancestor-s,root:e.root}),(i=i||r(7)).isTemplate(e)&&this.register(e.refs(),s)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=n(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter(e=>!e.ancestor).map(e=>e.root)}}},function(e,t,r){"use strict";const s=r(0),n={};e.exports=function(e,t,r){if(!1===t||null==t)return e;"string"==typeof(r=r||{})&&(r={separator:r});const o=Array.isArray(t);s(!o||!r.separator,"Separator option no valid for array-based chain");const a=o?t:t.split(r.separator||".");let i=e;for(let e=0;e<a.length;++e){let o=a[e];const l=r.iterables&&n.iterables(i);if(Array.isArray(i)||"set"===l){const e=Number(o);Number.isInteger(e)&&(o=e<0?i.length+e:e)}if(!i||"function"==typeof i&&!1===r.functions||!l&&void 0===i[o]){s(!r.strict||e+1===a.length,"Missing segment",o,"in reach path ",t),s("object"==typeof i||!0===r.functions||"function"!=typeof i,"Invalid segment",o,"in reach path ",t),i=r.default;break}i=l?"set"===l?[...i][o]:i.get(o):i[o]}return i},n.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(30),a=r(31),i=r(1),l=r(4),c=r(5),u={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=u.Template=class{constructor(e,t){s("string"==typeof e,"Template source must be a string"),s(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=n(t),this._parse()}_parse(){if(!this.source.includes("{"))return;const e=u.encode(this.source),t=u.split(e);let r=!1;const s=[],n=t.shift();n&&s.push(n);for(const e of t){const t="{"!==e[0],n=t?"}":"}}",o=e.indexOf(n);if(-1===o||"{"===e[1]){s.push("{".concat(u.decode(e)));continue}const a=e.slice(t?0:1,o),i=this._ref(u.decode(a),t);s.push(i),"string"!=typeof i&&(r=!0);const l=e.slice(o+n.length);l&&s.push(u.decode(l))}r?this._template=s:this.rendered=s.join("")}static date(e,t){return u.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),t}static build(e){return new u.Template(e.template,e.options)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[i.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,r,s){return this._template&&1===this._template.length?this._part(this._template[0],e,t,r,s,{}):this.render(e,t,r,s)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,r,s,n={}){if(!this.isDynamic())return this.rendered;const a=[];for(const i of this._template)if("string"==typeof i)a.push(i);else{const l=this._part(i,e,t,r,s,n),c=u.stringify(l,r,n.errors);if(void 0!==c){const e=i.raw||!1===(n.errors&&n.errors.escapeHtml)?c:o(c),t=i.ref&&"local"===i.ref.type&&"label"===i.ref.key&&r.errors.wrap.label;a.push(u.wrap(e,t))}}return a.join("")}_ref(e,t){const r=[],s=e=>{const t=c.create(e,this._settings);return r.push(t),e=>t.resolve(...e)};try{var n=new a.Parser(e,{reference:s,functions:u.functions,constants:u.constants})}catch(t){throw t.message='Invalid template variable "'.concat(e,'" fails due to: ').concat(t.message),t}return n.single?"reference"===n.single.type?{ref:r[0],raw:t,refs:r}:u.stringify(n.single.value):{formula:n,raw:t,refs:r}}toString(){return this.source}},u.Template.prototype[i.symbols.template]=!0,u.Template.prototype.isImmutable=!0,u.encode=function(e){return e.replace(/\\(\{+)/g,(e,t)=>u.opens.slice(0,t.length)).replace(/\\(\}+)/g,(e,t)=>u.closes.slice(0,t.length))},u.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},u.split=function(e){const t=[];let r="";for(let s=0;s<e.length;++s){const n=e[s];if("{"===n){let n="";for(;s+1<e.length&&"{"===e[s+1];)n+="{",++s;t.push(r),r=n}else r+=n}return t.push(r),t},u.wrap=function(e,t){return t?1===t.length?"".concat(t).concat(e).concat(t):"".concat(t[0]).concat(e).concat(t[1]):e},u.stringify=function(e,t,r){const s=typeof e;if(null===e)return"null";if("string"===s)return e;if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return u.Template.date(e,t);if(e instanceof Map){const t=[];for(const[r,s]of e.entries())t.push("".concat(r.toString()," -> ").concat(s.toString()));e=t}if(!Array.isArray(e))return e.toString();let n="";for(const s of e)n=n+(n.length?", ":"")+u.stringify(s,t,r);return u.wrap(n,t.errors.wrap.array)},u.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},u.functions={if:(e,t,r)=>e?t:r,msg(e){const[t,r,s,n,o]=this,a=o.messages;if(!a)return"";const i=l.template(t,a[0],e,r,s)||l.template(t,a[1],e,r,s);return i?i.render(t,r,s,n,o):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},function(e,t,r){"use strict";const s=r(0),n=r(1),o=r(5),a={};t.schema=function(e,t,r={}){n.assertOptions(r,["appendPath","override"]);try{return a.schema(e,t,r)}catch(e){throw r.appendPath&&void 0!==e.path&&(e.message="".concat(e.message," (").concat(e.path,")")),e}},a.schema=function(e,t,r){s(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(s(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const o=(t,...s)=>!1!==r.override?t.valid(e.override,...s):t.valid(...s);if(a.simple(t))return o(e,t);if("function"==typeof t)return e.custom(t);if(s("object"==typeof t,"Invalid schema content:",typeof t),n.isResolvable(t))return o(e,t);if(n.isSchema(t))return t;if(Array.isArray(t)){for(const r of t)if(!a.simple(r))return e.alternatives().try(...t);return o(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?o(e.date(),t):(s(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return o.isRef(e)?e:o.create(e,t)},t.compile=function(e,r,o={}){n.assertOptions(o,["legacy"]);const i=r&&r[n.symbols.any];if(i)return s(o.legacy||i.version===n.version,"Cannot mix different versions of joi schemas:",i.version,n.version),r;if("object"!=typeof r||!o.legacy)return t.schema(e,r,{appendPath:!0});const l=a.walk(r);return l?l.compile(l.root,r):t.schema(e,r,{appendPath:!0})},a.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=a.walk(t);if(e)return e}return null}const t=e[n.symbols.any];if(t)return{root:e[t.root],compile:t.compile};s(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const r=a.walk(e[t]);if(r)return r}return null},a.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,r,i){if(void 0===i&&(s(r&&"object"==typeof r,"Missing options"),i=r,r=o.create(".")),Array.isArray(i)&&(i={switch:i}),n.assertOptions(i,["is","not","then","otherwise","switch","break"]),n.isSchema(r))return s(void 0===i.is,'"is" can not be used with a schema condition'),s(void 0===i.not,'"not" can not be used with a schema condition'),s(void 0===i.switch,'"switch" can not be used with a schema condition'),a.condition(e,{is:r,then:i.then,otherwise:i.otherwise,break:i.break});if(s(o.isRef(r)||"string"==typeof r,"Invalid condition:",r),s(void 0===i.not||void 0===i.is,'Cannot combine "is" with "not"'),void 0===i.switch){let l=i;void 0!==i.not&&(l={is:i.not,then:i.otherwise,otherwise:i.then,break:i.break});let c=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return s(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),s(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===i.is||o.isRef(i.is)||n.isSchema(i.is)||(c=c.required()),a.condition(e,{ref:t.ref(r),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}s(Array.isArray(i.switch),'"switch" must be an array'),s(void 0===i.is,'Cannot combine "switch" with "is"'),s(void 0===i.not,'Cannot combine "switch" with "not"'),s(void 0===i.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(r),switch:[],break:i.break};for(let t=0;t<i.switch.length;++t){const r=i.switch[t],a=t===i.switch.length-1;n.assertOptions(r,a?["is","then","otherwise"]:["is","then"]),s(void 0!==r.is,'Switch statement missing "is"'),s(void 0!==r.then,'Switch statement missing "then"');const c={is:e.$_compile(r.is),then:e.$_compile(r.then)};if(o.isRef(r.is)||n.isSchema(r.is)||(c.is=c.is.required()),a){s(void 0===i.otherwise||void 0===r.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==i.otherwise?i.otherwise:r.otherwise;void 0!==t&&(s(void 0===l.break,"Cannot specify both otherwise and break"),c.otherwise=e.$_compile(t))}l.switch.push(c)}return l},a.condition=function(e,t){for(const r of["then","otherwise"])void 0===t[r]?delete t[r]:t[r]=e.$_compile(t[r]);return t}},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(7);t.compile=function(e,t){if("string"==typeof e)return s(!t,"Cannot set single message string"),new o(e);if(o.isTemplate(e))return s(!t,"Cannot set single message template"),e;s("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?n(t):{};for(let r in e){const n=e[r];if("root"===r||o.isTemplate(n)){t[r]=n;continue}if("string"==typeof n){t[r]=new o(n);continue}s("object"==typeof n&&!Array.isArray(n),"Invalid message for",r);const a=r;for(r in t[a]=t[a]||{},n){const e=n[r];"root"===r||o.isTemplate(e)?t[a][r]=e:(s("string"==typeof e,"Invalid message for",r,"in",a),t[a][r]=new o(e))}}return t},t.decompile=function(e){const t={};for(let r in e){const s=e[r];if("root"===r){t[r]=s;continue}if(o.isTemplate(s)){t[r]=s.describe({compact:!0});continue}const n=r;for(r in t[n]={},s){const e=s[r];t[n][r]="root"!==r?e.describe({compact:!0}):e}}return t},t.merge=function(e,r){if(!e)return t.compile(r);if(!r)return e;if("string"==typeof r)return new o(r);if(o.isTemplate(r))return r;const a=n(e);for(let e in r){const t=r[e];if("root"===e||o.isTemplate(t)){a[e]=t;continue}if("string"==typeof t){a[e]=new o(t);continue}s("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const n=e;for(e in a[n]=a[n]||{},t){const r=t[e];"root"===e||o.isTemplate(r)?a[n][e]=r:(s("string"==typeof r,"Invalid message for",e,"in",n),a[n][e]=new o(r))}}return a}},function(e,t,r){"use strict";const s=r(13),n={mismatched:null};e.exports=function(e,t,r){return r=Object.assign({prototype:!0},r),!!n.isDeepEqual(e,t,r,[])},n.isDeepEqual=function(e,t,r,o){if(e===t)return 0!==e||1/e==1/t;const a=typeof e;if(a!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===a){if(!r.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==a)return e!=e&&t!=t;const i=n.getSharedType(e,t,!!r.prototype);switch(i){case s.buffer:return!1;case s.promise:return e===t;case s.regex:return e.toString()===t.toString();case n.mismatched:return!1}for(let r=o.length-1;r>=0;--r)if(o[r].isSame(e,t))return!0;o.push(new n.SeenEntry(e,t));try{return!!n.isDeepEqualObj(i,e,t,r,o)}finally{o.pop()}},n.getSharedType=function(e,t,r){if(r)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?n.mismatched:s.getInternalProto(e);const o=s.getInternalProto(e);return o!==s.getInternalProto(t)?n.mismatched:o},n.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},n.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},n.isSetSimpleEqual=function(e,t){for(const r of e)if(!t.has(r))return!1;return!0},n.isDeepEqualObj=function(e,t,r,o,a){const{isDeepEqual:i,valueOf:l,hasOwnEnumerableProperty:c}=n,{keys:u,getOwnPropertySymbols:f}=Object;if(e===s.array){if(!o.part){if(t.length!==r.length)return!1;for(let e=0;e<t.length;++e)if(!i(t[e],r[e],o,a))return!1;return!0}for(const e of t)for(const t of r)if(i(e,t,o,a))return!0}else if(e===s.set){if(t.size!==r.size)return!1;if(!n.isSetSimpleEqual(t,r)){const e=new Set(r);for(const r of t){if(e.delete(r))continue;let t=!1;for(const s of e)if(i(r,s,o,a)){e.delete(s),t=!0;break}if(!t)return!1}}}else if(e===s.map){if(t.size!==r.size)return!1;for(const[e,s]of t){if(void 0===s&&!r.has(e))return!1;if(!i(s,r.get(e),o,a))return!1}}else if(e===s.error&&(t.name!==r.name||t.message!==r.message))return!1;const m=l(t),h=l(r);if((t!==m||r!==h)&&!i(m,h,o,a))return!1;const d=u(t);if(!o.part&&d.length!==u(r).length&&!o.skip)return!1;let p=0;for(const e of d)if(o.skip&&o.skip.includes(e))void 0===r[e]&&++p;else{if(!c(r,e))return!1;if(!i(t[e],r[e],o,a))return!1}if(!o.part&&d.length-p!==u(r).length)return!1;if(!1!==o.symbols){const e=f(t),s=new Set(f(r));for(const n of e){if(!o.skip||!o.skip.includes(n))if(c(t,n)){if(!c(r,n))return!1;if(!i(t[n],r[n],o,a))return!1}else if(c(r,n))return!1;s.delete(n)}for(const e of s)if(c(r,e))return!1}return!0},n.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(15),a=r(1),i=r(8),l=r(4),c=r(17),u=r(18),f=r(5),m=r(7),h=r(19);let d;const p={types:{alternatives:r(33),any:r(3),array:r(39),boolean:r(40),date:r(41),function:r(42),link:r(45),number:r(46),object:r(47),string:r(48),symbol:r(52)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(p.types))};for(const t of e._types)e[t]=function(...e){return s(!e.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),p.generate(this,p.types[t],e)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(...e){return this.any()[t](...e)};Object.assign(e,p.methods);for(const t in p.aliases){const r=p.aliases[t];e[t]=e[r]}return e.x=e.expression,h.setup&&h.setup(e),e}};p.methods={ValidationError:l.ValidationError,version:a.version,cache:o.provider,assert(e,t,...r){p.assert(e,t,!0,r)},attempt:(e,t,...r)=>p.assert(e,t,!1,r),build(e){return s("function"==typeof u.build,"Manifest functionality disabled"),u.build(this,e)},checkPreferences(e){a.checkPreferences(e)},compile(e,t){return i.compile(this,e,t)},defaults(e){s("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const r of t._types){const n=e(t[r]());s(a.isSchema(n),"modifier must return a valid schema object"),t[r]=function(...e){return p.generate(this,n,e)}}return t},expression:(...e)=>new m(...e),extend(...e){a.verifyFlat(e,"extend"),d=d||r(16),s(e.length,"You need to provide at least one extension"),this.assert(e,d.extensions);const t=Object.assign({},this);t._types=new Set(t._types);for(let r of e){"function"==typeof r&&(r=r(t)),this.assert(r,d.extension);const e=p.expandExtension(r,t);for(const r of e){s(void 0===t[r.type]||t._types.has(r.type),"Cannot override name",r.type);const e=r.base||this.any(),n=c.type(e,r);t._types.add(r.type),t[r.type]=function(...e){return p.generate(this,n,e)}}}return t},isError:l.ValidationError.isError,isExpression:m.isTemplate,isRef:f.isRef,isSchema:a.isSchema,in:(...e)=>f.in(...e),override:a.symbols.override,ref:(...e)=>f.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in p.aliases)e[t]=this[t]();return e}},p.assert=function(e,t,r,s){const o=s[0]instanceof Error||"string"==typeof s[0]?s[0]:null,i=o?s[1]:s[0],c=t.validate(e,a.preferences({errors:{stack:!0}},i||{}));let u=c.error;if(!u)return c.value;if(o instanceof Error)throw o;const f=r&&"function"==typeof u.annotate?u.annotate():u.message;throw u instanceof l.ValidationError==0&&(u=n(u)),u.message=o?"".concat(o," ").concat(f):f,u},p.generate=function(e,t,r){return s(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&r.length?t._definition.args(t,...r):t},p.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const r=[];for(const s of t._types)if(e.type.test(s)){const n=Object.assign({},e);n.type=s,n.base=t[s](),r.push(n)}return r},e.exports=p.root()},function(e,t,r){"use strict";const s=r(28);e.exports=class extends Error{constructor(e){super(e.filter(e=>""!==e).map(e=>"string"==typeof e?e:e instanceof Error?e.message:s(e)).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},function(e,t,r){"use strict";const s={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},s.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const r=Object.prototype.toString.call(e);return s.typeMap.get(r)||t.generic}},function(e,t,r){"use strict";t.keys=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(1),a={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new a.Cache(e)},a.Cache=class{constructor(e={}){o.assertOptions(e,["max"]),s(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||a.max,this._map=new Map,this._list=new a.List}get length(){return this._map.size}set(e,t){if(null!==e&&!a.supported.has(typeof e))return;let r=this._map.get(e);if(r)return r.value=t,void this._list.first(r);r=this._list.unshift({key:e,value:t}),this._map.set(e,r),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),n(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},a.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:r}=e;return t.prev=r,r&&(r.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},function(e,t,r){"use strict";const s=r(11),n={};n.wrap=s.string().min(1).max(2).allow(!1),t.preferences=s.object({allowUnknown:s.boolean(),abortEarly:s.boolean(),cache:s.boolean(),context:s.object(),convert:s.boolean(),dateFormat:s.valid("date","iso","string","time","utc"),debug:s.boolean(),errors:{escapeHtml:s.boolean(),label:s.valid("path","key",!1),language:[s.string(),s.object().ref()],render:s.boolean(),stack:s.boolean(),wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:s.object(),noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:s.valid("required","optional","forbidden"),skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=s.object({alias:s.array().items(s.string().pattern(n.nameRx)).single(),args:s.array().items(s.string(),s.object({name:s.string().pattern(n.nameRx).required(),ref:s.boolean(),assert:s.alternatives([s.function(),s.object().schema()]).conditional("ref",{is:!0,then:s.required()}),normalize:s.function(),message:s.string().when("assert",{is:s.function(),then:s.required()})})),convert:s.boolean(),manifest:s.boolean(),method:s.function().allow(!1),multi:s.boolean(),validate:s.function()}),t.extension=s.object({type:s.alternatives([s.string(),s.object().regex()]).required(),args:s.function(),base:s.object().schema().when("type",{is:s.object().regex(),then:s.forbidden()}),coerce:[s.function().maxArity(3),s.object({method:s.function().maxArity(3).required(),from:s.array().items(s.string()).single()})],flags:s.object().pattern(n.nameRx,s.object({setter:s.string(),default:s.any()})),manifest:{build:s.function().arity(2)},messages:[s.object(),s.string()],modifiers:s.object().pattern(n.nameRx,s.function().minArity(1).maxArity(2)),overrides:s.object().pattern(n.nameRx,s.function()),prepare:s.function().maxArity(3),rebuild:s.function().arity(1),rules:s.object().pattern(n.nameRx,n.rule),terms:s.object().pattern(n.nameRx,s.object({init:s.array().allow(null).required(),manifest:s.object().pattern(/.+/,[s.valid("schema","single"),s.object({mapped:s.object({from:s.string().required(),to:s.string().required()}).required()})])})),validate:s.function().maxArity(3)}).strict(),t.extensions=s.array().items(s.object(),s.function().arity(1)).strict(),n.desc={buffer:s.object({buffer:s.string()}),func:s.object({function:s.function().required(),options:{literal:!0}}),override:s.object({override:!0}),ref:s.object({ref:s.object({type:s.valid("value","global","local"),path:s.array().required(),separator:s.string().length(1).allow(!1),ancestor:s.number().min(0).integer().allow("root"),map:s.array().items(s.array().length(2)).min(1),adjust:s.function(),iterables:s.boolean(),in:s.boolean()}).required()}),regex:s.object({regex:s.string().min(3)}),special:s.object({special:s.valid("deep").required()}),template:s.object({template:s.string().required(),options:s.object()}),value:s.object({value:s.alternatives([s.object(),s.array()]).required()})},n.desc.entity=s.alternatives([s.array().items(s.link("...")),s.boolean(),s.function(),s.number(),s.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,s.link("/")]),n.desc.values=s.array().items(null,s.boolean(),s.function(),s.number().allow(1/0,-1/0),s.string().allow(""),s.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=s.object().pattern(/.+/,[s.string(),n.desc.template,s.object().pattern(/.+/,[s.string(),n.desc.template])]),t.description=s.object({type:s.string().required(),flags:s.object({cast:s.string(),default:s.any(),description:s.string(),empty:s.link("/"),failover:n.desc.entity,id:s.string(),label:s.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:s.boolean(),unit:s.string()}).unknown(),preferences:{allowUnknown:s.boolean(),abortEarly:s.boolean(),cache:s.boolean(),convert:s.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:s.boolean(),label:["path","key"],language:[s.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:s.boolean(),messages:n.desc.messages,noDefaults:s.boolean(),nonEnumerables:s.boolean(),presence:["required","optional","forbidden"],skipFunctions:s.boolean(),stripUnknown:s.object({arrays:s.boolean(),objects:s.boolean()}).or("arrays","objects").allow(!0,!1),warnings:s.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:s.array().min(1).items({name:s.string().required(),args:s.object().min(1),keep:s.boolean(),message:[s.string(),n.desc.messages],warn:s.boolean()}),keys:s.object().pattern(/.*/,s.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,s.any())},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(1),a=r(9),i={};t.type=function(e,t){const r=Object.getPrototypeOf(e),l=n(r),c=e._assign(Object.create(l)),u=Object.assign({},t);delete u.base,l._definition=u;const f=r._definition||{};u.messages=a.merge(f.messages,u.messages),u.properties=Object.assign({},f.properties,u.properties),c.type=u.type,u.flags=Object.assign({},f.flags,u.flags);const m=Object.assign({},f.terms);if(u.terms)for(const e in u.terms){const t=u.terms[e];s(void 0===c.$_terms[e],"Invalid term override for",u.type,e),c.$_terms[e]=t.init,m[e]=t}u.terms=m,u.args||(u.args=f.args),u.prepare=i.prepare(u.prepare,f.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=i.coerce(u.coerce,f.coerce),u.validate=i.validate(u.validate,f.validate);const h=Object.assign({},f.rules);if(u.rules)for(const e in u.rules){const t=u.rules[e];s("object"==typeof t,"Invalid rule definition for",u.type,e);let r=t.method;if(void 0===r&&(r=function(){return this.$_addRule(e)}),r&&(s(!l[e],"Rule conflict in",u.type,e),l[e]=r),s(!h[e],"Rule conflict in",u.type,e),h[e]=t,t.alias){const e=[].concat(t.alias);for(const r of e)l[r]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map(e=>("string"==typeof e&&(e={name:e}),s(!t.argsByName.has(e.name),"Duplicated argument name",e.name),o.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e)))}u.rules=h;const d=Object.assign({},f.modifiers);if(u.modifiers)for(const e in u.modifiers){s(!l[e],"Rule conflict in",u.type,e);const t=u.modifiers[e];s("function"==typeof t,"Invalid modifier definition for",u.type,e);const r=function(t){return this.rule({[e]:t})};l[e]=r,d[e]=t}if(u.modifiers=d,u.overrides){l._super=r,c.$_super={};for(const e in u.overrides)s(r[e],"Cannot override missing",e),c.$_super[e]=r[e].bind(c);Object.assign(l,u.overrides)}u.cast=Object.assign({},f.cast,u.cast);const p=Object.assign({},f.manifest,u.manifest);return p.build=i.build(u.manifest&&u.manifest.build,f.manifest&&f.manifest.build),u.manifest=p,u.rebuild=i.rebuild(u.rebuild,f.rebuild),c},i.build=function(e,t){return e&&t?function(r,s){return t(e(r,s),s)}:e||t},i.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(r,s){let n;if((!t.from||t.from.includes(typeof r))&&(n=t.method(r,s))){if(n.errors||void 0===n.value)return n;r=n.value}if(!e.from||e.from.includes(typeof r)){const t=e.method(r,s);if(t)return t}return n}}:e||t},i.prepare=function(e,t){return e&&t?function(r,s){const n=e(r,s);if(n){if(n.errors||void 0===n.value)return n;r=n.value}return t(r,s)||n}:e||t},i.rebuild=function(e,t){return e&&t?function(r){t(r),e(r)}:e||t},i.validate=function(e,t){return e&&t?function(r,s){const n=t(r,s);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;r=n.value}return e(r,s)||n}:e||t}},function(e,t){},function(e,t){},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(14),a={};e.exports=a.merge=function(e,t,r){if(s(e&&"object"==typeof e,"Invalid target value: must be an object"),s(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(r=Object.assign({nullOverride:!0,mergeArrays:!0},r),Array.isArray(t)){s(Array.isArray(e),"Cannot merge array onto an object"),r.mergeArrays||(e.length=0);for(let s=0;s<t.length;++s)e.push(n(t[s],{symbols:r.symbols}));return e}const i=o.keys(t,r);for(let s=0;s<i.length;++s){const o=i[s];if("__proto__"===o||!Object.prototype.propertyIsEnumerable.call(t,o))continue;const l=t[o];if(l&&"object"==typeof l){if(e[o]===l)continue;!e[o]||"object"!=typeof e[o]||Array.isArray(e[o])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[o]=n(l,{symbols:r.symbols}):a.merge(e[o],l,r)}else null!=l?e[o]=l:r.nullOverride&&(e[o]=l)}return e}},function(e,t,r){"use strict";const s=r(0),n=r(10),o=r(1),a={};e.exports=a.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=a.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){o.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,r){if(e=e||new a.Values,t){if(t._override)return t.clone();for(const r of[...t._values,...t._refs])e.add(r)}if(r)for(const t of[...r._values,...r._refs])e.remove(t);return e.length?e:null}remove(e){o.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,r,s){return!!this.get(e,t,r,s)}get(e,t,r,s){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&s){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(n(t,e))return{value:t};if(t)for(const o of this._refs){const a=o.resolve(e,t,r,null,{in:!0});if(void 0===a)continue;const i=o.in&&"object"==typeof a?Array.isArray(a)?a:Object.keys(a):[a];for(const t of i)if(typeof t==typeof e)if(s&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:o}}else if(n(t,e))return{value:t,ref:o}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new a.Values(this._values,this._refs);return e._override=this._override,e}concat(e){s(!e._override,"Cannot concat override set of values");const t=new a.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},a.Values.prototype[o.symbols.values]=!0,a.Values.prototype.slice=a.Values.prototype.clone,a.lowercases=function(e){const t=new Map;if(e)for(const r of e)"string"==typeof r&&t.set(r.toLowerCase(),r);return t}},function(e,t,r){"use strict";const s=r(43),n=r(0),o=r(2),a=r(44),i=r(3),l=r(1),c=r(8),u=r(4),f=r(5),m=r(7),h={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=i.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:r,state:s,prefs:n}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:r("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=h.clone(e,n);const o=[];if(t.$_terms.renames&&!h.rename(t,e,s,n,o))return{value:e,errors:o};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:o};const a=new Set(Object.keys(e));if(t.$_terms.keys){const r=[e,...s.ancestors];for(const i of t.$_terms.keys){const t=i.key,l=e[t];a.delete(t);const c=s.localize([...s.path,t],r,i),u=i.schema.$_validate(l,c,n);if(u.errors){if(n.abortEarly)return{value:e,errors:u.errors};o.push(...u.errors)}else"strip"===i.schema._flags.result||void 0===u.value&&void 0!==l?delete e[t]:void 0!==u.value&&(e[t]=u.value)}}if(a.size||t._flags._hasPatternMatch){const r=h.unknown(t,e,a,o,s,n);if(r)return r}if(t.$_terms.dependencies)for(const r of t.$_terms.dependencies){if(r.key&&void 0===r.key.resolve(e,s,n,null,{shadow:!1}))continue;const a=h.dependencies[r.rel](t,r,e,s,n);if(a){const r=t.$_createError(a.code,e,a.context,s,n);if(n.abortEarly)return{value:e,errors:r};o.push(r)}}return{value:e,errors:o}},rules:{and:{method(...e){return l.verifyFlat(e,"and"),h.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,r){m.isTemplate(e)||(e=c.ref(e)),n(void 0===r||"string"==typeof r,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const s=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:r}});return s.$_mutateRegister(e),s.$_mutateRegister(t),s},validate(e,{error:t,prefs:r,state:s},{subject:n,schema:o,message:a}){const i=n.resolve(e,s,r),l=f.isRef(n)?n.absolute(s):[];return o.$_match(i,s.localize(l,[e,...s.ancestors],o),r)?e:t("object.assert",{subject:n,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return n("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate:(e,t,{constructor:r,name:s})=>e instanceof r?e:t.error("object.instance",{type:s,value:e}),args:["constructor","name"]},keys:{method(e){n(void 0===e||"object"==typeof e,"Object schema must be a valid object"),n(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter(t=>!e.hasOwnProperty(t.key)):new h.Keys;for(const r in e)l.tryWithPath(()=>t.$_terms.keys.push({key:r,schema:this.$_compile(e[r])}),r)}else t.$_terms.keys=new h.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:r},{name:s,operator:n,args:o})=>l.compare(Object.keys(e).length,r,n)?e:t.error("object."+s,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return l.verifyFlat(e,"nand"),h.dependency(this,"nand",null,e)}},or:{method(...e){return l.verifyFlat(e,"or"),h.dependency(this,"or",null,e)}},oxor:{method(...e){return h.dependency(this,"oxor",null,e)}},pattern:{method(e,t,r={}){const s=e instanceof RegExp;s||(e=this.$_compile(e,{appendPath:!0})),n(void 0!==t,"Invalid rule"),l.assertOptions(r,["fallthrough","matches"]),s&&n(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const o=this.clone();o.$_terms.patterns=o.$_terms.patterns||[];const a={[s?"regex":"schema"]:e,rule:t};return r.matches&&(a.matches=this.$_compile(r.matches),"array"!==a.matches.type&&(a.matches=a.matches.$_root.array().items(a.matches)),o.$_mutateRegister(a.matches),o.$_setFlag("_hasPatternMatch",!0,{clone:!1})),r.fallthrough&&(a.fallthrough=!0),o.$_terms.patterns.push(a),o.$_mutateRegister(t),o}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>f.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t,r={}){n("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),n("string"==typeof t||t instanceof m,"Invalid rename to argument"),n(t!==e,"Cannot rename key to same name:",e),l.assertOptions(r,["alias","ignoreUndefined","override","multiple"]);const o=this.clone();o.$_terms.renames=o.$_terms.renames||[];for(const t of o.$_terms.renames)n(t.from!==e,"Cannot rename the same key multiple times");return t instanceof m&&o.$_mutateRegister(t),o.$_terms.renames.push({from:e,to:t,options:s(h.renameDefaults,r)}),o}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:r})=>!l.isSchema(e)||"any"!==r&&e.type!==r?t.error("object.schema",{type:r}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,r={}){return h.dependency(this,"with",e,t,r)}},without:{method(e,t,r={}){return h.dependency(this,"without",e,t,r)}},xor:{method(...e){return l.verifyFlat(e,"xor"),h.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_super.default(e,t)}},rebuild(e){if(e.$_terms.keys){const t=new a.Sorter;for(const r of e.$_terms.keys)l.tryWithPath(()=>t.add(r,{after:r.schema.$_rootReferences(),group:r.key}),r.key);e.$_terms.keys=new h.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:r,key:s=null,peers:n,options:o}of t.dependencies)e=h.dependency(e,r,s,n,o);if(t.patterns)for(const{regex:r,schema:s,rule:n,fallthrough:o,matches:a}of t.patterns)e=e.pattern(r||s,n,{fallthrough:o,matches:a});if(t.renames)for(const{from:r,to:s,options:n}of t.renames)e=e.rename(r,s,n);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":'{{#label}} must be an instance of "{{#type}}"',"object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":'"{{#mainWithLabel}}" must not exist simultaneously with {{#peersWithLabels}}',"object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":'{{#label}} cannot rename "{{#from}}" because multiple renames are disabled and another key was already renamed to "{{#to}}"',"object.rename.override":'{{#label}} cannot rename "{{#from}}" because override is disabled and target "{{#to}}" exists',"object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":'"{{#mainWithLabel}}" missing required peer "{{#peerWithLabel}}"',"object.without":'"{{#mainWithLabel}}" conflict with forbidden peer "{{#peerWithLabel}}"',"object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),h.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return o(e,{shallow:!0});const r=Object.create(Object.getPrototypeOf(e));return Object.assign(r,e),r}const r=function(...t){return e.apply(this,t)};return r.prototype=o(e.prototype),Object.defineProperty(r,"name",{value:e.name,writable:!1}),Object.defineProperty(r,"length",{value:e.length,writable:!1}),Object.assign(r,e),r},h.dependency=function(e,t,r,s,o){n(null===r||"string"==typeof r,t,"key must be a strings"),o||(o=s.length>1&&"object"==typeof s[s.length-1]?s.pop():{}),l.assertOptions(o,["separator"]),s=[].concat(s);const a=l.default(o.separator,"."),i=[];for(const e of s)n("string"==typeof e,t,"peers must be a string or a reference"),i.push(c.ref(e,{separator:a,ancestor:0,prefix:!1}));null!==r&&(r=c.ref(r,{separator:a,ancestor:0,prefix:!1}));const u=e.clone();return u.$_terms.dependencies=u.$_terms.dependencies||[],u.$_terms.dependencies.push(new h.Dependency(t,r,i,s)),u},h.dependencies={and(e,t,r,s,n){const o=[],a=[],i=t.peers.length;for(const e of t.peers)void 0===e.resolve(r,s,n,null,{shadow:!1})?o.push(e.key):a.push(e.key);if(o.length!==i&&a.length!==i)return{code:"object.and",context:{present:a,presentWithLabels:h.keysToLabels(e,a),missing:o,missingWithLabels:h.keysToLabels(e,o)}}},nand(e,t,r,s,n){const o=[];for(const e of t.peers)void 0!==e.resolve(r,s,n,null,{shadow:!1})&&o.push(e.key);if(o.length!==t.peers.length)return;const a=t.paths[0],i=t.paths.slice(1);return{code:"object.nand",context:{main:a,mainWithLabel:h.keysToLabels(e,a),peers:i,peersWithLabels:h.keysToLabels(e,i)}}},or(e,t,r,s,n){for(const e of t.peers)if(void 0!==e.resolve(r,s,n,null,{shadow:!1}))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)}}},oxor(e,t,r,s,n){const o=[];for(const e of t.peers)void 0!==e.resolve(r,s,n,null,{shadow:!1})&&o.push(e.key);if(!o.length||1===o.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return a.present=o,a.presentWithLabels=h.keysToLabels(e,o),{code:"object.oxor",context:a}},with(e,t,r,s,n){for(const o of t.peers)if(void 0===o.resolve(r,s,n,null,{shadow:!1}))return{code:"object.with",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:o.key,peerWithLabel:h.keysToLabels(e,o.key)}}},without(e,t,r,s,n){for(const o of t.peers)if(void 0!==o.resolve(r,s,n,null,{shadow:!1}))return{code:"object.without",context:{main:t.key.key,mainWithLabel:h.keysToLabels(e,t.key.key),peer:o.key,peerWithLabel:h.keysToLabels(e,o.key)}}},xor(e,t,r,s,n){const o=[];for(const e of t.peers)void 0!==e.resolve(r,s,n,null,{shadow:!1})&&o.push(e.key);if(1===o.length)return;const a={peers:t.paths,peersWithLabels:h.keysToLabels(e,t.paths)};return 0===o.length?{code:"object.missing",context:a}:(a.present=o,a.presentWithLabels=h.keysToLabels(e,o),{code:"object.xor",context:a})}},h.keysToLabels=function(e,t){return Array.isArray(t)?t.map(t=>e.$_mapLabels(t)):e.$_mapLabels(t)},h.rename=function(e,t,r,s,n){const o={};for(const a of e.$_terms.renames){const i=[],l="string"!=typeof a.from;if(l)for(const e in t){if(void 0===t[e]&&a.options.ignoreUndefined)continue;if(e===a.to)continue;const r=a.from.exec(e);r&&i.push({from:e,to:a.to,match:r})}else!Object.prototype.hasOwnProperty.call(t,a.from)||void 0===t[a.from]&&a.options.ignoreUndefined||i.push(a);for(const c of i){const i=c.from;let u=c.to;if(u instanceof m&&(u=u.render(t,r,s,c.match)),i!==u){if(!a.options.multiple&&o[u]&&(n.push(e.$_createError("object.rename.multiple",t,{from:i,to:u,pattern:l},r,s)),s.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,u)&&!a.options.override&&!o[u]&&(n.push(e.$_createError("object.rename.override",t,{from:i,to:u,pattern:l},r,s)),s.abortEarly))return!1;void 0===t[i]?delete t[u]:t[u]=t[i],o[u]=!0,a.options.alias||delete t[i]}}}return!0},h.unknown=function(e,t,r,s,n,o){if(e.$_terms.patterns){let a=!1;const i=e.$_terms.patterns.map(e=>{if(e.matches)return a=!0,[]}),l=[t,...n.ancestors];for(const a of r){const c=t[a],u=[...n.path,a];for(let f=0;f<e.$_terms.patterns.length;++f){const m=e.$_terms.patterns[f];if(m.regex){const e=m.regex.test(a);if(n.mainstay.tracer.debug(n,"rule","pattern.".concat(f),e?"pass":"error"),!e)continue}else if(!m.schema.$_match(a,n.nest(m.schema,"pattern.".concat(f)),o))continue;r.delete(a);const h=n.localize(u,l,{schema:m.rule,key:a}),d=m.rule.$_validate(c,h,o);if(d.errors){if(o.abortEarly)return{value:t,errors:d.errors};s.push(...d.errors)}if(m.matches&&i[f].push(a),t[a]=d.value,!m.fallthrough)break}}if(a)for(let r=0;r<i.length;++r){const a=i[r];if(!a)continue;const c=e.$_terms.patterns[r].matches,f=n.localize(n.path,l,c),m=c.$_validate(a,f,o);if(m.errors){const r=u.details(m.errors,{override:!1});r.matches=a;const i=e.$_createError("object.pattern.match",t,r,n,o);if(o.abortEarly)return{value:t,errors:i};s.push(i)}}}if(r.size&&(e.$_terms.keys||e.$_terms.patterns)){if(o.stripUnknown&&!e._flags.unknown||o.skipFunctions){const e=!(!o.stripUnknown||!0!==o.stripUnknown&&!o.stripUnknown.objects);for(const s of r)e?(delete t[s],r.delete(s)):"function"==typeof t[s]&&r.delete(s)}if(!l.default(e._flags.unknown,o.allowUnknown))for(const a of r){const r=n.localize([...n.path,a],[]),i=e.$_createError("object.unknown",t[a],{child:a},r,o,{flags:!1});if(o.abortEarly)return{value:t,errors:i};s.push(i)}}},h.Dependency=class{constructor(e,t,r,s){this.rel=e,this.key=t,this.peers=r,this.paths=s}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={separator:this.peers[0].separator}),e}},h.Keys=class extends Array{concat(e){const t=this.slice(),r=new Map;for(let e=0;e<t.length;++e)r.set(t[e].key,e);for(const s of e){const e=s.key,n=r.get(e);void 0!==n?t[n]={key:e,schema:t[n].schema.concat(s.schema)}:t.push(s)}return t}}},function(e,t,r){"use strict";const s=r(24),n=r(25),o={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:s.URL||URL};t.analyze=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(!e)return n.code("DOMAIN_NON_EMPTY_STRING");if(e.length>256)return n.code("DOMAIN_TOO_LONG");if(o.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(o.domainControlRx.test(e))return n.code("DOMAIN_INVALID_CHARS");e=o.punycode(e);const r=t.minDomainSegments||o.minDomainSegments,s=e.split(".");if(s.length<r)return n.code("DOMAIN_SEGMENTS_COUNT");const a=t.tlds;if(a){const e=s[s.length-1].toLowerCase();if(a.deny&&a.deny.has(e)||a.allow&&!a.allow.has(e))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<s.length;++e){const t=s[e];if(!t.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(e<s.length-1){if(!o.domainSegmentRx.test(t))return n.code("DOMAIN_INVALID_CHARS")}else if(!o.tldSegmentRx.test(t))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,r){return!t.analyze(e,r)},o.punycode=function(e){try{return new o.URL("http://".concat(e)).host}catch(t){return e}}},function(e,t){},function(e,t,r){"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},function(e,t,r){"use strict";const s=r(0),n=r(27),o={generate:function(){const e={},t="!\\$&'\\(\\)\\*\\+,;=",r="\\w-\\.~%\\dA-Fa-f"+t+":@",s="["+r+"]",n="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+n+"\\.){3}"+n;const o="[\\dA-Fa-f]{1,4}",a="(?:"+o+":"+o+"|"+e.ipv4address+")",i="(?:"+o+":){6}"+a,l="::(?:"+o+":){5}"+a,c="(?:"+o+")?::(?:"+o+":){4}"+a,u="(?:(?:"+o+":){0,1}"+o+")?::(?:"+o+":){3}"+a,f="(?:(?:"+o+":){0,2}"+o+")?::(?:"+o+":){2}"+a,m="(?:(?:"+o+":){0,3}"+o+")?::"+o+":"+a,h="(?:(?:"+o+":){0,4}"+o+")?::"+a;e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+i+"|"+l+"|"+c+"|"+u+"|"+f+"|"+m+"|"+h+"|(?:(?:[\\dA-Fa-f]{1,4}:){0,5}[\\dA-Fa-f]{1,4})?::[\\dA-Fa-f]{1,4}|(?:(?:[\\dA-Fa-f]{1,4}:){0,6}[\\dA-Fa-f]{1,4})?::)",e.ipvFuture="v[\\dA-Fa-f]+\\.[\\w-\\.~"+t+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const d="[\\w-\\.~%\\dA-Fa-f"+t+":]*",p="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=]{1,255})",g="(?:"+d+"@)?"+p+"(?::\\d*)?",y="(?:"+d+"@)?("+p+")(?::\\d*)?",b=s+"+",v="(?:\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",_="\\/(?:"+b+v+")?",w=b+v,$="[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+"+v;return e.hierPart="(?:(?:\\/\\/"+g+v+")|"+_+"|"+w+"|(?:\\/\\/\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*(?:\\/[\\w-\\.~%\\dA-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*))",e.hierPartCapture="(?:(?:\\/\\/"+y+v+")|"+_+"|"+w+")",e.relativeRef="(?:(?:\\/\\/"+g+v+")|"+_+"|"+$+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+y+v+")|"+_+"|"+$+"|)",e.query="["+r+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+r+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+r+"\\/\\?]*",e}};o.rfc3986=o.generate(),t.ip={v4Cidr:o.rfc3986.ipv4Cidr,v6Cidr:o.rfc3986.ipv6Cidr,ipv4:o.rfc3986.ipv4address,ipv6:o.rfc3986.ipv6address,ipvfuture:o.rfc3986.ipvFuture},o.createRegex=function(e){const t=o.rfc3986,r="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",a=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return o.wrap(a+r);let i="";if(e.scheme){s(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const r=[].concat(e.scheme);s(r.length>=1,"scheme must have at least 1 scheme specified");const o=[];for(let e=0;e<r.length;++e){const a=r[e];s(a instanceof RegExp||"string"==typeof a,"scheme at position "+e+" must be a RegExp or String"),a instanceof RegExp?o.push(a.source.toString()):(s(t.schemeRegex.test(a),"scheme at position "+e+" must be a valid scheme"),o.push(n(a)))}i=o.join("|")}const l="(?:"+(i?"(?:"+i+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",c=e.allowRelative?"(?:"+l+"|"+a+")":l;return o.wrap(c+r,i)},o.wrap=function(e,t){return{raw:e="(?=.)(?!https?:/$)".concat(e),regex:new RegExp("^".concat(e,"$")),scheme:t}},o.uriRegex=o.createRegex({}),t.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?o.createRegex(e):o.uriRegex}},function(e,t,r){"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},function(e,t,r){"use strict";e.exports=function(...e){try{return JSON.stringify.apply(null,e)}catch(e){return"[Cannot display object: "+e.message+"]"}}},function(e){e.exports=JSON.parse('{"version":"17.1.1"}')},function(e,t,r){"use strict";const s={};e.exports=function(e){if(!e)return"";let t="";for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);s.isSafe(n)?t+=e[r]:t+=s.escapeHtmlChar(n)}return t},s.escapeHtmlChar=function(e){const t=s.namedHtml[e];if(void 0!==t)return t;if(e>=256)return"&#"+e+";";const r=e.toString(16).padStart(2,"0");return"&#x".concat(r,";")},s.isSafe=function(e){return void 0!==s.safeCharCodes[e]},s.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},s.safeCharCodes=function(){const e={};for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,r){"use strict";const s={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*\.?[0-9]*){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e,t={}){if(!t[s.settings]&&t.constants)for(const e in t.constants){const r=t.constants[e];if(null!==r&&!["boolean","number","string"].includes(typeof r))throw new Error("Formula constant ".concat(e," contains invalid ").concat(typeof r," value type"))}this.settings=t[s.settings]?t:Object.assign({[s.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let r=[],n="",o=0,a=!1;const i=e=>{if(o)throw new Error("Formula missing closing parenthesis");const i=r.length?r[r.length-1]:null;if(a||n||e){if(i&&"reference"===i.type&&")"===e)return i.type="function",i.value=this._subFormula(n,i.value),void(n="");if(")"===e){const e=new t.Parser(n,this.settings);r.push({type:"segment",value:e})}else if(a){if("]"===a)return r.push({type:"reference",value:n}),void(n="");r.push({type:"literal",value:n})}else if(s.operatorCharacters.includes(n))i&&"operator"===i.type&&s.operators.includes(i.value+n)?i.value+=n:r.push({type:"operator",value:n});else if(n.match(s.numberRx))r.push({type:"constant",value:parseFloat(n)});else if(void 0!==this.settings.constants[n])r.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(s.tokenRx))throw new Error("Formula contains invalid token: ".concat(n));r.push({type:"reference",value:n})}n=""}};for(const t of e)a?t===a?(i(),a=!1):n+=t:o?"("===t?(n+=t,++o):")"===t?--o?n+=t:i(t):n+=t:t in s.literals?a=s.literals[t]:"("===t?(i(),++o):s.operatorCharacters.includes(t)?(i(),n=t,i()):" "!==t?n+=t:i();i(),r=r.map((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==r[t-1].type?e:{type:"operator",value:"n"});let l=!1;for(const e of r){if("operator"===e.type){if(s.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!s.operators.includes(e.value))throw new Error("Formula contains an unknown operator ".concat(e.value))}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===r.length&&["reference","literal","constant"].includes(r[0].type)&&(this.single={type:"reference"===r[0].type?"reference":"value",value:r[0].value}),this._parts=r.map(e=>{if("operator"===e.type)return s.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error("Formula contains invalid reference ".concat(e.value));return this.settings.reference?this.settings.reference(e.value):s.reference(e.value)})}_subFormula(e,r){const n=this.settings.functions[r];if("function"!=typeof n)throw new Error("Formula contains unknown function ".concat(r));let o=[];if(e){let t="",n=0,a=!1;const i=()=>{if(!t)throw new Error("Formula contains function ".concat(r," with invalid arguments ").concat(e));o.push(t),t=""};for(let r=0;r<e.length;++r){const o=e[r];a?(t+=o,o===a&&(a=!1)):o in s.literals&&!n?(t+=o,a=s.literals[o]):","!==o||n?(t+=o,"("===o?++n:")"===o&&--n):i()}i()}return o=o.map(e=>new t.Parser(e,this.settings)),function(e){const t=[];for(const r of o)t.push(r.evaluate(e));return n.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let r=t.length-2;r>=0;--r){const n=t[r];if(n&&"operator"===n.type){const o=t[r+1];t.splice(r+1,1);const a=s.evaluate(o,e);t[r]=s.single(n.value,a)}}return s.operatorsOrder.forEach(r=>{for(let n=1;n<t.length-1;)if(r.includes(t[n])){const r=t[n],o=s.evaluate(t[n-1],e),a=s.evaluate(t[n+1],e);t.splice(n,2);const i=s.calculate(r,o,a);t[n-1]=0===i?0:i}else n+=2}),s.evaluate(t[0],e)}},t.Parser.prototype[s.symbol]=!0,s.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},s.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[s.symbol]?e.evaluate(t):e},s.single=function(e,t){if("!"===e)return!t;const r=-t;return 0===r?0:r},s.calculate=function(e,t,r){if("??"===e)return s.exists(t)?t:r;if("string"==typeof t||"string"==typeof r){if("+"===e)return(t=s.exists(t)?t:"")+(s.exists(r)?r:"")}else switch(e){case"^":return Math.pow(t,r);case"*":return t*r;case"/":return t/r;case"%":return t%r;case"+":return t+r;case"-":return t-r}switch(e){case"<":return t<r;case"<=":return t<=r;case">":return t>r;case">=":return t>=r;case"==":return t===r;case"!=":return t!==r;case"&&":return t&&r;case"||":return t||r}return null},s.exists=function(e){return null!=e}},function(e,t){},function(e,t,r){"use strict";const s=r(0),n=r(3),o=r(1),a=r(8),i=r(4),l=r(5),c={};e.exports=n.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:l.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,t){const{schema:r,error:s,state:n,prefs:o}=t;if(r._flags.match){let t,a=0;for(let s=0;s<r.$_terms.matches.length;++s){const i=r.$_terms.matches[s],l=n.nest(i.schema,"match.".concat(s));l.snapshot();const c=i.schema.$_validate(e,l,o);c.errors?l.restore():(++a,t=c.value)}return a?"one"===r._flags.match?1===a?{value:t}:{errors:s("alternatives.one")}:a===r.$_terms.matches.length?{value:e}:{errors:s("alternatives.all")}:{errors:s("alternatives.any")}}const a=[];for(let t=0;t<r.$_terms.matches.length;++t){const s=r.$_terms.matches[t];if(s.schema){const r=n.nest(s.schema,"match.".concat(t));r.snapshot();const i=s.schema.$_validate(e,r,o);if(!i.errors)return i;r.restore(),a.push({schema:s.schema,reports:i.errors});continue}const i=s.ref?s.ref.resolve(e,n,o):e,l=s.is?[s]:s.switch;for(let r=0;r<l.length;++r){const a=l[r],{is:c,then:u,otherwise:f}=a,m="match.".concat(t).concat(s.switch?"."+r:"");if(c.$_match(i,n.nest(c,"".concat(m,".is")),o)){if(u)return u.$_validate(e,n.nest(u,"".concat(m,".then")),o)}else if(f)return f.$_validate(e,n.nest(f,"".concat(m,".otherwise")),o)}}return c.errors(a,t)},rules:{conditional:{method(e,t){s(!this._flags._endedSwitch,"Unreachable condition"),s(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),s(void 0===t.break,"Cannot use break option with alternatives conditional");const r=this.clone(),n=a.when(r,e,t),o=n.is?[n]:n.switch;for(const e of o)if(e.then&&e.otherwise){r.$_setFlag("_endedSwitch",!0,{clone:!1});break}return r.$_terms.matches.push(n),r.$_mutateRebuild()}},match:{method(e){if(s(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)s(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(...e){s(e.length,"Missing alternative schemas"),o.verifyFlat(e,"try"),s(!this._flags._endedSwitch,"Unreachable condition");const t=this.clone();for(const r of e)t.$_terms.matches.push({schema:t.$_compile(r)});return t.$_mutateRebuild()}}},overrides:{label(e){return this.$_super.label(e).$_modify({each:(t,r)=>"is"!==r.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{o.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const r of t.matches){const{schema:t,ref:s,is:n,not:o,then:a,otherwise:i}=r;e=t?e.try(t):s?e.conditional(s,{is:n,then:a,not:o,otherwise:i,switch:r.switch}):e.conditional(n,{then:a,otherwise:i})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),c.errors=function(e,{error:t,state:r}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const s=new Set,n=[];for(const{reports:o,schema:a}of e){if(o.length>1)return c.unmatched(e,t);const l=o[0];if(l instanceof i.Report==0)return c.unmatched(e,t);if(l.state.path.length!==r.path.length){n.push({type:a.type,report:l});continue}if("any.only"===l.code){for(const e of l.local.valids)s.add(e);continue}const[u,f]=l.code.split(".");"base"===f?s.add(u):n.push({type:a.type,report:l})}return n.length?1===n.length?{errors:n[0].report}:c.unmatched(e,t):{errors:t("alternatives.types",{types:[...s]})}},c.unmatched=function(e,t){const r=[];for(const t of e)r.push(...t.reports);return{errors:t("alternatives.match",i.details(r,{override:!1}))}}},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(10),a=r(20),i=r(15),l=r(1),c=r(8),u=r(4),f=r(17),m=r(18),h=r(9),d=r(35),p=r(5),g=r(19),y=r(36),b=r(21),v={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._ids=new d.Ids,this._preferences=null,this._refs=new p.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return s("function"==typeof m.describe,"Manifest functionality disabled"),m.describe(this)}allow(...e){return l.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(e){s(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),s(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const r in e){const n=e[r];s("function"==typeof n,"Alteration adjuster for",r,"must be a function"),t.$_terms.alterations.push({target:r,adjuster:n})}return t.$_temp.ruleset=!1,t}cast(e){return s(!1===e||"string"==typeof e,"Invalid to value"),s(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return s(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return s(e,"Missing error"),s(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e,t={}){return s(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(s(!t,"Cannot combine options with description"),t=e.description,e=e.method),s("function"==typeof e,"Method must be a function"),s(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(s("string"==typeof e,"id must be a non-empty string"),s(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(e){return s(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return s(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(...e){s(e.length,"Missing notes");for(const t of e)s(t&&"string"==typeof t,"Notes must be non-empty strings");return this._inner("notes",e)}only(e=!0){return s("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){s(e,"Missing preferences"),s(void 0===e.context,"Cannot override context"),s(void 0===e.externals,"Cannot override externals"),s(void 0===e.warnings,"Cannot override warnings"),s(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return s(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(e){return s(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),r=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:r}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...e){s(e.length,"Missing tags");for(const t of e)s(t&&"string"==typeof t,"Tags must be non-empty strings");return this._inner("tags",e)}unit(e){return s(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(...e){l.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(e,t){const r=this.clone();r.$_terms.whens||(r.$_terms.whens=[]);const n=c.when(r,e,t);if(!["any","link"].includes(r.type)){const e=n.is?[n]:n.switch;for(const t of e)s(!t.then||"any"===t.then.type||t.then.type===r.type,"Cannot combine",r.type,"with",t.then&&t.then.type),s(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===r.type,"Cannot combine",r.type,"with",t.otherwise&&t.otherwise.type)}return r.$_terms.whens.push(n),r.$_mutateRebuild()}cache(e){s(!this._inRuleset(),"Cannot set caching inside a ruleset"),s(!this._cache,"Cannot override schema cache");const t=this.clone();return t._cache=e||i.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){s(l.isSchema(e),"Invalid schema object"),s("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),s(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),s(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const r=e.clone();for(const e of Object.keys(t))"type"!==e&&(r[e]=t[e]);t=r}t._ids.concat(e._ids),t._refs.register(e,p.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=b.merge(t._valids,e._valids,e._invalids),t._invalids=b.merge(t._invalids,e._invalids,e._valids);for(const r of e._singleRules.keys())t._singleRules.has(r)&&(t._rules=t._rules.filter(e=>e.keep||e.name!==r),t._singleRules.delete(r));for(const r of e._rules)e._definition.rules[r.method].multi||t._singleRules.set(r.name,r),t._rules.push(r);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const r=Object.assign({},e._flags);delete r.empty,a(t._flags,r)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const r=Object.assign({},e._flags);delete r.empty,a(t._flags,r)}else a(t._flags,e._flags);for(const r in e.$_terms){const s=e.$_terms[r];s?t.$_terms[r]?t.$_terms[r]=t.$_terms[r].concat(s):t.$_terms[r]=s.slice():t.$_terms[r]||(t.$_terms[r]=s)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return s(!e.base,"Cannot extend type with another base"),f.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){s(!this._inRuleset(),"Cannot fork inside a ruleset");let r=this;for(let s of[].concat(e))s=Array.isArray(s)?s:s.split("."),r=r._ids.fork(s,t,r);return r.$_temp.ruleset=!1,r}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),s(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const r=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;s(r>=0&&r<this._rules.length,"Cannot apply rules to empty ruleset");const o=this.clone();for(let a=r;a<o._rules.length;++a){const r=o._rules[a],i=n(r);for(const n in e)t.modifiers[n](i,e[n]),s(i.name===r.name,"Cannot change rule name");o._rules[a]=i,o._singleRules.get(i.name)===r&&o._singleRules.set(i.name,i)}return o.$_temp.ruleset=!1,o.$_mutateRebuild()}get ruleset(){s(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),s(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:r,adjuster:n}of this.$_terms.alterations)e.includes(r)&&(t=n(t),s(l.isSchema(t),"Alteration adjuster for",r,"failed to return a schema object"));return(t=t.$_modify({each:t=>t.tailor(e),ref:!1})).$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(e,t){return y.entry(e,this,t)}validateAsync(e,t){return y.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),s(e&&"object"==typeof e,"Invalid options"),s(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)s("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const r=this._definition.rules[t.method],n=t.args;s(r,"Unknown rule",t.method);const o=this.clone();if(n){s(1===Object.keys(n).length||Object.keys(n).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in n){let a=n[e];if(void 0!==a){if(r.argsByName){const i=r.argsByName.get(e);if(i.ref&&l.isResolvable(a))t._resolve.push(e),o.$_mutateRegister(a);else if(i.normalize&&(a=i.normalize(a),n[e]=a),i.assert){const t=l.validateArg(a,e,i);s(!t,t,"or reference")}}n[e]=a}else delete n[e]}}return r.multi||(o._ruleRemove(t.name,{clone:!1}),o._singleRules.set(t.name,t)),!1===o.$_temp.ruleset&&(o.$_temp.ruleset=null),r.priority?o._rules.unshift(t):o._rules.push(t),o}$_compile(e,t){return c.schema(this.$_root,e,t)}$_createError(e,t,r,s,n,o={}){const a=!1!==o.flags?this._flags:{},i=o.messages?h.merge(this._definition.messages,o.messages):this._definition.messages;return new u.Report(e,t,r,a,i,s,n)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,r,s){(r=Object.assign({},r)).abortEarly=!0,r._externals=!1,t.snapshot();const n=!y.validate(e,this,t,r,s).errors;return t.restore(),n}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),d.schema(this,e)||this}$_mutateRebuild(){return s(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,{source:t,name:r,path:s,key:n})=>{const o=this._definition[t][r]&&this._definition[t][r].register;!1!==o&&this.$_mutateRegister(e,{family:o,key:n})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:r}={}){this._refs.register(e,t),this._ids.register(e,{key:r})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t,r={}){s("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const n=this._definition.flags[e]||{};if(o(t,n.default)&&(t=void 0),o(t,this._flags[e]))return this;const a=!1!==r.clone?this.clone():this;return void 0!==t?(a._flags[e]=t,a.$_mutateRegister(t)):delete a._flags[e],"_"!==e[0]&&(a.$_temp.ruleset=!1),a}$_validate(e,t,r){return y.validate(e,this,t,r)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=n(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_default(e,t,r={}){return l.assertOptions(r,"literal"),s(void 0!==t,"Missing",e,"value"),s("function"==typeof t||!r.literal,"Only function value supports literal option"),"function"==typeof t&&r.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,r){if(!this.$_terms.whens)return{schema:this};const s=[],n=[];for(let o=0;o<this.$_terms.whens.length;++o){const a=this.$_terms.whens[o];if(a.concat){s.push(a.concat),n.push("".concat(o,".concat"));continue}const i=a.ref?a.ref.resolve(e,t,r):e,l=a.is?[a]:a.switch,c=n.length;for(let c=0;c<l.length;++c){const{is:u,then:f,otherwise:m}=l[c],h="".concat(o).concat(a.switch?"."+c:"");if(u.$_match(i,t.nest(u,"".concat(h,".is")),r)){if(f){const o=t.localize([...t.path,"".concat(h,".then")],t.ancestors,t.schemas),{schema:a,id:i}=f._generate(e,o,r);s.push(a),n.push("".concat(h,".then").concat(i?"(".concat(i,")"):""));break}}else if(m){const o=t.localize([...t.path,"".concat(h,".otherwise")],t.ancestors,t.schemas),{schema:a,id:i}=m._generate(e,o,r);s.push(a),n.push("".concat(h,".otherwise").concat(i?"(".concat(i,")"):""));break}}if(a.break&&n.length>c)break}const o=n.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",o),!o)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[o])return{schema:this.$_temp.whens[o],id:o};let a=this;this._definition.generate&&(a=this._definition.generate(this,e,t,r));for(const e of s)a=a.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(a,[this,...s]),this.$_temp.whens[o]=a,{schema:a,id:o}}_inner(e,t,r={}){s(!this._inRuleset(),"Cannot set ".concat(e," inside a ruleset"));const n=this.clone();return n.$_terms[e]&&!r.override||(n.$_terms[e]=[]),r.single?n.$_terms[e].push(t):n.$_terms[e].push(...t),n.$_temp.ruleset=!1,n}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const r=!1!==t.clone?this.clone():this;r._singleRules.delete(e);const s=[];for(let t=0;t<r._rules.length;++t){const n=r._rules[t];n.name!==e||n.keep?s.push(n):r._inRuleset()&&t<r.$_temp.ruleset&&--r.$_temp.ruleset}return r._rules=s,r}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const r=this.clone(),n=e[0]===l.symbols.override;if(n&&(e=e.slice(1)),!r[t]&&e.length?r[t]=new b:n&&(r[t]=e.length?new b:null,r.$_mutateRebuild()),!r[t])return r;n&&r[t].override();for(const n of e){s(void 0!==n,"Cannot call allow/valid/invalid with undefined"),s(n!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";r[e]&&(r[e].remove(n),r[e].length||(s("_valids"===t||!r._flags.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),r[e]=null)),r[t].add(n,r._refs)}return r}}};v.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},v.Base.prototype.isImmutable=!0,v.Base.prototype.deny=v.Base.prototype.invalid,v.Base.prototype.disallow=v.Base.prototype.invalid,v.Base.prototype.equal=v.Base.prototype.valid,v.Base.prototype.exist=v.Base.prototype.required,v.Base.prototype.not=v.Base.prototype.invalid,v.Base.prototype.options=v.Base.prototype.prefs,v.Base.prototype.preferences=v.Base.prototype.prefs,e.exports=new v.Base},function(e,t,r){"use strict";function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=r(0),a=r(1),i=r(5),l={};t.Ids=l.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new l.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,r]of e._byId.entries())o(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,r);for(const[t,r]of e._byKey.entries())o(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,r)}fork(e,t,r){const s=this._collect(e);s.push({schema:r});const n=s.shift();let i={id:n.id,schema:t(n.schema)};o(a.isSchema(i.schema),"adjuster function failed to return a joi schema type");for(const e of s)i={id:e.id,schema:l.fork(e.schema,i.id,i.schema)};return i.schema}labels(e,t=[]){const r=e[0],s=this._get(r);if(!s)return[...t,...e].join(".");const n=e.slice(1);return t=[...t,s.schema._flags.label||r],n.length?s.schema._ids.labels(n,t):t.join(".")}reach(e,t=[]){const r=e[0],s=this._get(r);o(s,"Schema does not contain path",[...t,...e].join("."));const n=e.slice(1);return n.length?s.schema._ids.reach(n,[...t,r]):s.schema}register(e,{key:t}={}){if(!e||!a.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const r=e._flags.id;if(r){const t=this._byId.get(r);o(!t||t.schema===e,"Cannot add different schemas with the same id:",r),o(!this._byKey.has(r),"Schema id conflicts with existing key:",r),this._byId.set(r,{schema:e,id:r})}t&&(o(!this._byKey.has(t),"Schema already contains key:",t),o(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,t=[],r=[]){const s=e[0],n=this._get(s);o(n,"Schema does not contain path",[...t,...e].join(".")),r=[n,...r];const a=e.slice(1);return a.length?n.schema._ids._collect(a,[...t,s],r):r}_get(e){return this._byId.get(e)||this._byKey.get(e)}},l.fork=function(e,r,s){const n=t.schema(e,{each:(e,{key:t})=>{if(r===(e._flags.id||t))return s},ref:!1});return n?n.$_mutateRebuild():e},t.schema=function(e,t){let r;for(const s in e._flags){if("_"===s[0])continue;const n=l.scan(e._flags[s],{source:"flags",name:s},t);void 0!==n&&((r=r||e.clone())._flags[s]=n)}for(let s=0;s<e._rules.length;++s){const n=e._rules[s],o=l.scan(n.args,{source:"rules",name:n.name},t);if(void 0!==o){r=r||e.clone();const t=Object.assign({},n);t.args=o,r._rules[s]=t,r._singleRules.get(n.name)===n&&r._singleRules.set(n.name,t)}}for(const s in e.$_terms){if("_"===s[0])continue;const n=l.scan(e.$_terms[s],{source:"terms",name:s},t);void 0!==n&&((r=r||e.clone()).$_terms[s]=n)}return r},l.scan=function(e,t,r,o,c){const u=o||[];if(null===e||"object"!=typeof e)return;let f;if(Array.isArray(e)){for(let s=0;s<e.length;++s){const n="terms"===t.source&&"keys"===t.name&&e[s].key,o=l.scan(e[s],t,r,[s,...u],n);void 0!==o&&((f=f||e.slice())[s]=o)}return f}if(!1!==r.schema&&a.isSchema(e)||!1!==r.ref&&i.isRef(e)){const o=r.each(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{path:u,key:c}));if(o===e)return;return o}for(const s in e){if("_"===s[0])continue;const n=l.scan(e[s],t,r,[s,...u],c);void 0!==n&&((f=f||Object.assign({},e))[s]=n)}return f}},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(37),a=r(6),i=r(1),l=r(4),c=r(38),u={result:Symbol("result")};t.entry=function(e,t,r){let n=i.defaults;r&&(s(void 0===r.warnings,"Cannot override warnings preference in synchronous validation"),n=i.preferences(i.defaults,r));const o=u.entry(e,t,n);s(!o.mainstay.externals.length,"Schema with external rules must use validateAsync()");const a={value:o.value};return o.error&&(a.error=o.error),o.mainstay.warnings.length&&(a.warning=l.details(o.mainstay.warnings)),o.mainstay.debug&&(a.debug=o.mainstay.debug),a},t.entryAsync=async function(e,t,r){let s=i.defaults;r&&(s=i.preferences(i.defaults,r));const n=u.entry(e,t,s),o=n.mainstay;if(n.error)throw o.debug&&(n.error.debug=o.debug),n.error;if(o.externals.length){let t=n.value;for(const{method:r,path:s,label:n}of o.externals){let o,i,l=t;s.length&&(o=s[s.length-1],l=(i=a(t,s.slice(0,-1)))[o]);try{const s=await r(l);if(void 0===s||s===l)continue;i?i[o]=s:t=s}catch(e){throw e.message+=" (".concat(n,")"),e}}n.value=t}if(!s.warnings&&!s.debug)return n.value;const c={value:n.value};return o.warnings.length&&(c.warning=l.details(o.warnings)),o.debug&&(c.debug=o.debug),c},u.entry=function(e,r,s){const{tracer:n,cleanup:o}=u.tracer(r,s),a={externals:[],warnings:[],tracer:n,debug:s.debug?[]:null,links:r._ids._schemaChain?new Map:null},i=r._ids._schemaChain?[{schema:r}]:null,f=new c([],[],{mainstay:a,schemas:i}),m=t.validate(e,r,f,s);o&&r.$_root.untrace();const h=l.process(m.errors,e,s);return{value:m.value,error:h,mainstay:a}},u.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(s(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:u.ignore}},t.validate=function(e,t,r,s,n={}){if(t.$_terms.whens&&(t=t._generate(e,r,s).schema),t._preferences&&(s=u.prefs(t,s)),t._cache&&s.cache){const s=t._cache.get(e);if(r.mainstay.tracer.debug(r,"validate","cached",!!s),s)return s}const o=(n,o,a)=>t.$_createError(n,e,o,a||r,s),a={original:e,prefs:s,schema:t,state:r,error:o,warn:(e,t,s)=>r.mainstay.warnings.push(o(e,t,s)),message:(n,o)=>t.$_createError("custom",e,o,r,s,{messages:n})};r.mainstay.tracer.entry(t,r);const l=t._definition;if(l.prepare&&void 0!==e&&s.convert){const t=l.prepare(e,a);if(t){if(r.mainstay.tracer.value(r,"prepare",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),a);e=t.value}}if(l.coerce&&void 0!==e&&s.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,a);if(t){if(r.mainstay.tracer.value(r,"coerced",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),a);e=t.value}}const c=t._flags.empty;c&&c.$_match(u.trim(e,t),r.nest(c),i.defaults)&&(r.mainstay.tracer.value(r,"empty",e,void 0),e=void 0);const f=n.presence||t._flags.presence||(t._flags._endedSwitch?"ignore":s.presence);if(void 0===e){if("forbidden"===f)return u.finalize(e,null,a);if("required"===f)return u.finalize(e,[t.$_createError("any.required",e,null,r,s)],a);if("optional"===f){if(t._flags.default!==i.symbols.deepDefault)return u.finalize(e,null,a);r.mainstay.tracer.value(r,"default",e,{}),e={}}}else if("forbidden"===f)return u.finalize(e,[t.$_createError("any.unknown",e,null,r,s)],a);const m=[];if(t._valids){const n=t._valids.get(e,r,s,t._flags.insensitive);if(n)return s.convert&&(r.mainstay.tracer.value(r,"valids",e,n.value),e=n.value),r.mainstay.tracer.filter(t,r,"valid",n),u.finalize(e,null,a);if(t._flags.only){const n=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},r,s);if(s.abortEarly)return u.finalize(e,[n],a);m.push(n)}}if(t._invalids){const n=t._invalids.get(e,r,s,t._flags.insensitive);if(n){r.mainstay.tracer.filter(t,r,"invalid",n);const o=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},r,s);if(s.abortEarly)return u.finalize(e,[o],a);m.push(o)}}if(l.validate){const t=l.validate(e,a);if(t&&(r.mainstay.tracer.value(r,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return m.push(t.errors),u.finalize(e,m,a);if(t.errors.length)return m.push(...t.errors),u.finalize(e,m,a)}}return t._rules.length?u.rules(e,m,a):u.finalize(e,m,a)},u.rules=function(e,t,r){const{schema:s,state:n,prefs:o}=r;for(const a of s._rules){const l=s._definition.rules[a.method];if(l.convert&&o.convert){n.mainstay.tracer.log(s,n,"rule",a.name,"full");continue}let c,f=a.args;if(a._resolve.length){f=Object.assign({},f);for(const t of a._resolve){const r=l.argsByName.get(t),a=f[t].resolve(e,n,o),u=r.normalize?r.normalize(a):a,m=i.validateArg(u,null,r);if(m){c=s.$_createError("any.ref",a,{arg:t,ref:f[t],reason:m},n,o);break}f[t]=u}}c=c||l.validate(e,r,f,a);const m=u.rule(c,a);if(m.errors){if(n.mainstay.tracer.log(s,n,"rule",a.name,"error"),a.warn){n.mainstay.warnings.push(...m.errors);continue}if(o.abortEarly)return u.finalize(e,m.errors,r);t.push(...m.errors)}else n.mainstay.tracer.log(s,n,"rule",a.name,"pass"),n.mainstay.tracer.value(n,"rule",e,m.value,a.name),e=m.value}return u.finalize(e,t,r)},u.rule=function(e,t){return e instanceof l.Report?(u.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&(e[0]instanceof l.Report||e[0]instanceof Error)?(e.forEach(e=>u.error(e,t)),{errors:e,value:null}):{errors:null,value:e}},u.error=function(e,t){return t.message&&e._setTemplate(t.message),e},u.finalize=function(e,t,r){t=t||[];const{schema:n,state:o,prefs:a}=r;if(t.length){const s=u.default("failover",void 0,t,r);void 0!==s&&(o.mainstay.tracer.value(o,"failover",e,s),e=s,t=[])}if(t.length&&n._flags.error)if("function"==typeof n._flags.error){t=n._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)s(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[n._flags.error];if(void 0===e){const s=u.default("default",e,t,r);o.mainstay.tracer.value(o,"default",e,s),e=s}if(n._flags.cast&&void 0!==e){const t=n._definition.cast[n._flags.cast];if(t.from(e)){const s=t.to(e,r);o.mainstay.tracer.value(o,"cast",e,s,n._flags.cast),e=s}}if(n.$_terms.externals&&a.externals&&!1!==a._externals)for(const{method:e}of n.$_terms.externals)o.mainstay.externals.push({method:e,path:o.path,label:l.label(n._flags,o,a)});const i={value:e,errors:t.length?t:null};return n._flags.result&&(i.value="strip"===n._flags.result?void 0:r.original,o.mainstay.tracer.value(o,n._flags.result,e,i.value),o.shadow(e,n._flags.result)),n._cache&&!1!==a.cache&&!n._refs.length&&n._cache.set(r.original,i),i},u.prefs=function(e,t){const r=t===i.defaults;return r&&e._preferences[i.symbols.prefs]?e._preferences[i.symbols.prefs]:(t=i.preferences(t,e._preferences),r&&(e._preferences[i.symbols.prefs]=t),t)},u.default=function(e,t,r,s){const{schema:o,state:a,prefs:l}=s,c=o._flags[e];if(l.noDefaults||void 0===c)return t;if(a.mainstay.tracer.log(o,a,"rule",e,"full"),!c)return c;if("function"==typeof c){const i=c.length?[n(a.ancestors[0]),s]:[];try{return c(...i)}catch(t){return void r.push(o.$_createError("any.".concat(e),null,{error:t},a,l))}}return"object"!=typeof c?c:c[i.symbols.literal]?c.literal:i.isResolvable(c)?c.resolve(t,a,l):n(c)},u.trim=function(e,t){if("string"!=typeof e)return e;const r=t.$_getRule("trim");return r&&r.args.enabled?e.trim():e},u.ignore={active:!1,debug:o,entry:o,filter:o,log:o,resolve:o,value:o}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";const s=r(2),n=r(6),o=r(1),a={value:Symbol("value")};e.exports=a.State=class{constructor(e,t,r){this.path=e,this.ancestors=t,this.mainstay=r.mainstay,this.schemas=r.schemas,this.debug=null}localize(e,t=null,r=null){const s=new a.State(e,t,this);return r&&s.schemas&&(s.schemas=[a.schemas(r),...s.schemas]),s}nest(e,t){const r=new a.State(this.path,this.ancestors,this);return r.schemas=r.schemas&&[a.schemas(e),...r.schemas],r.debug=t,r}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new a.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=s(this.mainstay.shadow.node(this.path)))}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0)}},a.schemas=function(e){return o.isSchema(e)?{schema:e}:e},a.Shadow=class{constructor(){this._values=null}set(e,t,r){if(!e.length)return;if("strip"===r&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let s=this._values;for(let t=0;t<e.length;++t){const r=e[t];let n=s.get(r);n||(n=new Map,s.set(r,n)),s=n}s[a.value]=t}get(e){const t=this.node(e);if(t)return t[a.value]}node(e){if(this._values)return n(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const r=e.slice(0,-1),s=e[e.length-1],o=n(this._values,r,{iterables:!0});t?o.set(s,t):o&&o.delete(s)}}},function(e,t,r){"use strict";const s=r(0),n=r(10),o=r(6),a=r(3),i=r(1),l=r(8),c={};e.exports=a.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:r,prefs:s}){if(!Array.isArray(e))return;const n=t.$_getRule("sort");return n?c.sort(t,e,n.args.options,r,s):void 0}},validate(e,{schema:t,error:r}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[i.symbols.arraySingle]=!0,{value:t}}return{errors:r("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:r,error:s},{schema:n}){const o=[e,...t.ancestors];for(let s=0;s<e.length;++s){const a=t.localize([...t.path,s],o,n);if(n.$_match(e[s],a,r))return e}const a=n._flags.label;return a?s("array.hasKnown",{patternLabel:a}):s("array.hasUnknown",null)},multi:!0},items:{method(...e){i.verifyFlat(e,"items");const t=this.$_addRule("items");for(let r=0;r<e.length;++r){const s=i.tryWithPath(()=>this.$_compile(e[r]),r,{append:!0});t.$_terms.items.push(s)}return t.$_mutateRebuild()},validate(e,{schema:t,error:r,state:s,prefs:n}){const o=t.$_terms._requireds.slice(),a=t.$_terms.ordered.slice(),l=[...t.$_terms._inclusions,...o],u=!e[i.symbols.arraySingle];delete e[i.symbols.arraySingle];const f=[];let m=e.length;for(let i=0;i<m;++i){const h=e[i];let d=!1,p=!1;const g=u?i:new Number(i),y=[...s.path,g];if(!t._flags.sparse&&void 0===h){if(f.push(r("array.sparse",{key:g,path:y,pos:i,value:void 0},s.localize(y))),n.abortEarly)return f;a.shift();continue}const b=[e,...s.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(h,s.localize(y,b,e),n,{presence:"ignore"})){if(f.push(r("array.excludes",{pos:i,value:h},s.localize(y))),n.abortEarly)return f;d=!0,a.shift();break}if(d)continue;if(t.$_terms.ordered.length){if(a.length){const o=a.shift(),l=o.$_validate(h,s.localize(y,b,o),n);if(l.errors){if(f.push(...l.errors),n.abortEarly)return f}else if("strip"===o._flags.result)c.fastSplice(e,i),--i,--m;else{if(!t._flags.sparse&&void 0===l.value){if(f.push(r("array.sparse",{key:g,path:y,pos:i,value:void 0},s.localize(y))),n.abortEarly)return f;continue}e[i]=l.value}continue}if(!t.$_terms.items.length){if(f.push(r("array.orderedLength",{pos:i,limit:t.$_terms.ordered.length})),n.abortEarly)return f;break}}const v=[];let _=o.length;for(let a=0;a<_;++a){const l=s.localize(y,b,o[a]);l.snapshot();const u=o[a].$_validate(h,l,n);if(v[a]=u,!u.errors){if(e[i]=u.value,p=!0,c.fastSplice(o,a),--a,--_,!t._flags.sparse&&void 0===u.value&&(f.push(r("array.sparse",{key:g,path:y,pos:i,value:void 0},s.localize(y))),n.abortEarly))return f;break}l.restore()}if(p)continue;const w=n.stripUnknown&&!!n.stripUnknown.arrays||!1;_=l.length;for(const a of l){let l;const u=o.indexOf(a);if(-1!==u)l=v[u];else{const o=s.localize(y,b,a);if(o.snapshot(),!(l=a.$_validate(h,o,n)).errors){"strip"===a._flags.result?(c.fastSplice(e,i),--i,--m):t._flags.sparse||void 0!==l.value?e[i]=l.value:(f.push(r("array.sparse",{key:g,path:y,pos:i,value:void 0},s.localize(y))),d=!0),p=!0;break}o.restore()}if(1===_){if(w){c.fastSplice(e,i),--i,--m,p=!0;break}if(f.push(...l.errors),n.abortEarly)return f;d=!0;break}}if(!d&&t.$_terms._inclusions.length&&!p){if(w){c.fastSplice(e,i),--i,--m;continue}if(f.push(r("array.includes",{pos:i,value:h},s.localize(y))),n.abortEarly)return f}}return o.length&&c.fillMissedErrors(t,f,o,e,s,n),a.length&&c.fillOrderedErrors(t,f,a,e,s,n),f.length?f:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:r},{name:s,operator:n,args:o})=>i.compare(e.length,r,n)?e:t.error("array."+s,{limit:o.limit,value:e}),args:[{name:"limit",ref:!0,assert:i.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){i.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let r=0;r<e.length;++r){const s=i.tryWithPath(()=>this.$_compile(e[r]),r,{append:!0});c.validateSingle(s,t),t.$_mutateRegister(s),t.$_terms.ordered.push(s)}return t.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return s(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(e={}){i.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),s(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,{error:t,state:r,prefs:s,schema:n},{options:o}){const{value:a,errors:i}=c.sort(n,e,o,r,s);if(i)return i;for(let r=0;r<e.length;++r)if(e[r]!==a[r])return t("array.sort",{order:o.order,by:o.by?o.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e,t={}){s(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),i.assertOptions(t,["ignoreUndefined","separator"]);const r={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const s=i.default(t.separator,".");r.path=s?e.split(s):[e]}else r.comparator=e;return this.$_addRule(r)},validate(e,{state:t,error:r,schema:a},{comparator:i,options:l},{comparator:c,path:u}){const f={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=c||n,h=l.ignoreUndefined;for(let n=0;n<e.length;++n){const a=u?o(e[n],u):e[n],l=c?f.custom:f[typeof a];if(s(l,"Failed to find unique map container for type",typeof a),l instanceof Map){const s=l.entries();let o;for(;!(o=s.next()).done;)if(m(o.value[0],a)){const s=t.localize([...t.path,n],[e,...t.ancestors]),a={pos:n,value:e[n],dupePos:o.value[1],dupeValue:e[o.value[1]]};return u&&(a.path=i),r("array.unique",a,s)}l.set(a,n)}else{if((!h||void 0!==a)&&void 0!==l[a]){const s={pos:n,value:e[n],dupePos:l[a],dupeValue:e[l[a]]};return u&&(s.path=i),r("array.unique",s,t.localize([...t.path,n],[e,...t.ancestors]))}l[a]=n}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)c.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)c.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":'{{#label}} does not contain at least one required match for type "{#patternLabel}"',"array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,r,s,n,o){const a=[];let i=0;for(const e of r){const t=e._flags.label;t?a.push(t):++i}a.length?i?t.push(e.$_createError("array.includesRequiredBoth",s,{knownMisses:a,unknownMisses:i},n,o)):t.push(e.$_createError("array.includesRequiredKnowns",s,{knownMisses:a},n,o)):t.push(e.$_createError("array.includesRequiredUnknowns",s,{unknownMisses:i},n,o))},c.fillOrderedErrors=function(e,t,r,s,n,o){const a=[];for(const e of r)"required"===e._flags.presence&&a.push(e);a.length&&c.fillMissedErrors(e,t,a,s,n,o)},c.fastSplice=function(e,t){let r=t;for(;r<e.length;)e[r++]=e[r];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(s(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,r,s,n){const o="ascending"===r.order?1:-1,a=-1*o,i=o,l=(l,u)=>{let f=c.compare(l,u,a,i);if(null!==f)return f;if(r.by&&(l=r.by.resolve(l,s,n),u=r.by.resolve(u,s,n)),null!==(f=c.compare(l,u,a,i)))return f;const m=typeof l;if(m!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,s,n);if("number"!==m&&"string"!==m)throw e.$_createError("array.sort.unsupported",t,{type:m},s,n);return"number"===m?(l-u)*o:l<u?a:i};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},c.compare=function(e,t,r,s){return e===t?0:void 0===e?1:void 0===t?-1:null===e?s:null===t?r:null}},function(e,t,r){"use strict";const s=r(0),n=r(3),o=r(1),a=r(21),i={isBool:function(e){return"boolean"==typeof e}};e.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const r=t._flags.sensitive?e:e.toLowerCase();e="true"===r||"false"!==r&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...e){o.verifyFlat(e,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new a;for(let r=0;r<e.length;++r){const n=e[r];s(void 0!==n,"Cannot call truthy with undefined"),t.$_terms.truthy.add(n)}return t}},falsy:{method(...e){o.verifyFlat(e,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new a;for(let r=0;r<e.length;++r){const n=e[r];s(void 0!==n,"Cannot call falsy with undefined"),t.$_terms.falsy.add(n)}return t}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:i.isBool,to:(e,t)=>e?1:0},string:{from:i.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},function(e,t,r){"use strict";const s=r(0),n=r(3),o=r(1),a=r(7),i={isDate:function(e){return e instanceof Date}};e.exports=n.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:i.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:r,prefs:s}){if(e instanceof Date&&!isNaN(e.getTime()))return;const n=t._flags.format;return s.convert&&n&&"string"==typeof e?{value:e,errors:r("date.format",{format:n})}:{value:e,errors:r("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:r},{name:s,operator:n,args:a}){const i="now"===r?Date.now():r.getTime();return o.compare(e.getTime(),i,n)?e:t.error("date."+s,{limit:a.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:i.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return s(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(e="javascript"){return s(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:i.isDate,to:(e,t)=>e.getTime()},string:{from:i.isDate,to:(e,{prefs:t})=>a.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":'{{#label}} must be greater than "{{#limit}}"',"date.less":'{{#label}} must be less than "{{#limit}}"',"date.max":'{{#label}} must be less than or equal to "{{#limit}}"',"date.min":'{{#label}} must be larger than or equal to "{{#limit}}"',"date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),i.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return o.isIsoDate(e)?i.date(e.toString()):null;const r=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return i.date(1*e);if("unix"===t)return i.date(1e3*e);if("string"==typeof r)return null}return i.date(e)},i.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},function(e,t,r){"use strict";const s=r(0),n=r(22);e.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return s(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate:(e,t,{n:r})=>e.length===r?e:t.error("function.arity",{n:r})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return s(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate:(e,t,{n:r})=>e.length>=r?e:t.error("function.minArity",{n:r})},maxArity:{method(e){return s(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate:(e,t,{n:r})=>e.length<=r?e:t.error("function.maxArity",{n:r})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},function(e,t,r){"use strict";const s=r(0),n=r(2),o=r(20),a=r(6),i={};e.exports=function(e,t,r={}){if(s(e&&"object"==typeof e,"Invalid defaults value: must be an object"),s(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),s("object"==typeof r,"Invalid options: must be an object"),!t)return null;if(r.shallow)return i.applyToDefaultsWithShallow(e,t,r);const a=n(e);if(!0===t)return a;const l=void 0!==r.nullOverride&&r.nullOverride;return o(a,t,{nullOverride:l,mergeArrays:!1})},i.applyToDefaultsWithShallow=function(e,t,r){const l=r.shallow;s(Array.isArray(l),"Invalid keys");const c=new Map,u=!0===t?null:new Set;for(let r of l){r=Array.isArray(r)?r:r.split(".");const s=a(e,r);s&&"object"==typeof s?c.set(s,u&&a(t,r)||s):u&&u.add(r)}const f=n(e,{},c);if(!u)return f;for(const e of u)i.reachCopy(f,t,e);return o(f,t,{mergeArrays:!1,nullOverride:!1})},i.reachCopy=function(e,t,r){for(const e of r){if(!(e in t))return;t=t[e]}const s=t;let n=e;for(let e=0;e<r.length-1;++e){const t=r[e];"object"!=typeof n[t]&&(n[t]={}),n=n[t]}n[r[r.length-1]]=s}},function(e,t,r){"use strict";const s=r(0),n={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const r=[].concat((t=t||{}).before||[]),n=[].concat(t.after||[]),o=t.group||"?",a=t.sort||0;s(!r.includes(o),"Item cannot come before itself: ".concat(o)),s(!r.includes("?"),"Item cannot come before unassociated items"),s(!n.includes(o),"Item cannot come after itself: ".concat(o)),s(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:a,before:r,after:n,group:o,node:t};this._items.push(e)}const i=this._sort();return s(i,"item","?"!==o?"added into group ".concat(o):"","created a dependencies error"),this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(n.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return s(t,"merge created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),r=Object.create(null);for(const s of this._items){const n=s.seq,o=s.group;r[o]=r[o]||[],r[o].push(n),e[n]=s.before;for(const e of s.after)t[e]=t[e]||[],t[e].push(n)}for(const t in e){const s=[];for(const n in e[t]){const o=e[t][n];r[o]=r[o]||[],s.push(...r[o])}e[t]=s}for(const s in t)if(r[s])for(const n of r[s])e[n].push(...t[s]);const s={};for(const t in e){const r=e[t];for(const e of r)s[e]=s[e]||[],s[e].push(t)}const n={},o=[];for(let e=0;e<this._items.length;++e){let t=e;if(s[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===n[e])continue;s[e]||(s[e]=[]);const r=s[e].length;let o=0;for(let t=0;t<r;++t)n[s[e][t]]&&++o;if(o===r){t=e;break}}}null!==t&&(n[t]=!0,o.push(t))}if(o.length!==this._items.length)return!1;const a={};for(const e of this._items)a[e.seq]=e;this._items=[],this.nodes=[];for(const e of o){const t=a[e];this.nodes.push(t.node),this._items.push(t)}return!0}},n.mergeSort=((e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1)},function(e,t,r){"use strict";const s=r(0),n=r(3),o=r(1),a=r(8),i=r(4),l={};e.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,{schema:t,state:r,prefs:n}){s(t.$_terms.link,"Uninitialized link schema");const o=l.generate(t,e,r,n),a=t.$_terms.link[0].ref;return o.$_validate(e,r.nest(o,"link:".concat(a.display,":").concat(o.type)),n)},generate:(e,t,r,s)=>l.generate(e,t,r,s),rules:{ref:{method(e){s(!this.$_terms.link,"Cannot reinitialize schema"),e=a.ref(e),s("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),s("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(e){s(this.$_terms.link,"Uninitialized link schema"),s(o.isSchema(e),"Invalid schema object"),s("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(s(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,r,s){let n=r.mainstay.links.get(e);if(n)return n._generate(t,r,s).schema;const o=e.$_terms.link[0].ref,{perspective:a,path:i}=l.perspective(o,r);l.assert(a,"which is outside of schema boundaries",o,e,r,s);try{n=i.length?a.$_reach(i):a}catch(t){l.assert(!1,"to non-existing schema",o,e,r,s)}return l.assert("link"!==n.type,"which is another link",o,e,r,s),e._flags.relative||r.mainstay.links.set(e,n),n._generate(t,r,s).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:r,key:s}of t.schemas){if((r._flags.id||s)===e.path[0])return{perspective:r,path:e.path.slice(1)};if(r.$_terms.shared)for(const t of r.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,r,n,o,a){e||s(!1,'"'.concat(i.label(n._flags,o,a),'" contains link reference "').concat(r.display,'" ').concat(t))}},function(e,t,r){"use strict";const s=r(0),n=r(3),o=r(1),a={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};e.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:r}){const s=e.match(a.numberRx);if(!s)return;e=e.trim();const n={value:parseFloat(e)};if(0===n.value&&(n.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(a.normalizeExponent("".concat(n.value/Math.pow(10,s[1]),"e").concat(s[1]))!==a.normalizeExponent(e))return n.errors=r("number.unsafe"),n}else{const t=n.value.toString();if(t.match(/e/i))return n;if(t!==a.normalizeDecimal(e))return n.errors=r("number.unsafe"),n}return n}},validate(e,{schema:t,error:r,prefs:s}){if(e===1/0||e===-1/0)return{value:e,errors:r("number.infinity")};if(!o.isNumber(e))return{value:e,errors:r("number.base")};const n={value:e};if(s.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);n.value=Math.round(n.value*t)/t}}return 0===n.value&&(n.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(n.errors=r("number.unsafe")),n},rules:{compare:{method:!1,validate:(e,t,{limit:r},{name:s,operator:n,args:a})=>o.compare(e,r,n)?e:t.error("number."+s,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:o.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate:(e,t,{base:r},s)=>e%r==0?e:t.error("number.multiple",{multiple:s.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return s(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,{limit:r}){const s=e.toString().match(a.precisionRx);return Math.max((s[1]?s[1].length:0)-(s[2]?parseInt(s[2],10):0),0)<=r?e:t.error("number.precision",{limit:r,value:e})},convert:!0},sign:{method(e){return s(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:(e,t,{sign:r})=>"negative"===r&&e<0||"positive"===r&&e>0?e:t.error("number.".concat(r))},unsafe:{method(e=!0){return s("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be larger than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),a.normalizeExponent=function(e){return e.replace(/E/,"e").replace(/\.(\d*[1-9])?0+e/,".$1e").replace(/\.e/,"e").replace(/e\+/,"e").replace(/^\+/,"").replace(/^(-?)0+([1-9])/,"$1$2")},a.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0+$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([1-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},function(e,t,r){"use strict";const s=r(22);e.exports=s.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},function(e,t,r){"use strict";function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const a=r(0),i=r(23),l=r(49),c=r(50),u=r(27),f=r(51),m=r(26),h=r(3),d=r(1),p={tlds:f instanceof Set&&{tlds:{allow:f,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:c.regex().regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=h.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:r,prefs:s}){const n=t.$_getRule("normalize");n&&(e=e.normalize(n.args.form));const o=t.$_getRule("case");o&&(e="upper"===o.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const a=t.$_getRule("trim");if(a&&a.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const r of t.$_terms.replacements)e=e.replace(r.pattern,r.replacement);const i=t.$_getRule("hex");if(i&&i.args.options.byteAligned&&e.length%2!=0&&(e="0".concat(e)),t.$_getRule("isoDate")){const t=p.isoDate(e);t&&(e=t)}if(t._flags.truncate){const n=t.$_getRule("max");if(n){let o=n.args.limit;if(d.isResolvable(o)&&(o=o.resolve(e,r,s),!d.limit(o)))return{value:e,errors:t.$_createError("any.ref",o,{ref:n.args.limit,arg:"limit",reason:"must be a positive integer"},r,s)};e=e.slice(0,o)}}return{value:e}}},validate:(e,{error:t})=>"string"!=typeof e?{value:e,errors:t("string.base")}:""===e?{value:e,errors:t("string.empty")}:void 0,rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(e={}){return d.assertOptions(e,["paddingRequired","urlSafe"]),e=n({urlSafe:!1,paddingRequired:!0},e),a("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),a("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate:(e,t,{options:r})=>p.base64Regex[r.paddingRequired][r.urlSafe].test(e)?e:t.error("string.base64")},case:{method(e){return a(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate:(e,t,{direction:r})=>"lower"===r&&e===e.toLocaleLowerCase()||"upper"===r&&e===e.toLocaleUpperCase()?e:t.error("string.".concat(r,"case")),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let r=e.length,s=0,n=1;for(;r--;){const t=e.charAt(r)*n;s+=t-9*(t>9),n^=3}return s>0&&s%10==0?e:t.error("string.creditCard")}},dataUri:{method(e={}){return d.assertOptions(e,["paddingRequired"]),e=n({paddingRequired:!0},e),a("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,{options:r}){const s=e.match(p.dataUriRegex);if(s){if(!s[2])return e;if("base64"!==s[2])return e;if(p.base64Regex[r.paddingRequired].false.test(s[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&d.assertOptions(e,["allowUnicode","minDomainSegments","tlds"]);const t=p.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,t,r,{address:s})=>i.isValid(e,s)?e:t.error("string.domain")},email:{method(e={}){d.assertOptions(e,["allowUnicode","ignoreLength","minDomainSegments","multiple","separator","tlds"]),a(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=p.addressOptions(e),r=new RegExp("\\s*[".concat(e.separator?u(e.separator):",","]\\s*"));return this.$_addRule({name:"email",args:{options:e},regex:r,address:t})},validate(e,t,{options:r},{regex:s,address:n}){const o=r.multiple?e.split(s):[e],a=[];for(const e of o)l.isValid(e,n)||a.push(e);return a.length?t.error("string.email",{value:e,invalids:a}):e}},guid:{alias:"uuid",method(e={}){d.assertOptions(e,["version"]);let t="";if(e.version){const r=[].concat(e.version);a(r.length>=1,"version must have at least 1 valid version specified");const s=new Set;for(let e=0;e<r.length;++e){const n=r[e];a("string"==typeof n,"version at position "+e+" must be a string");const o=p.guidVersions[n.toLowerCase()];a(o,"version at position "+e+" must be one of "+Object.keys(p.guidVersions).join(", ")),a(!s.has(o),"version at position "+e+" must not be a duplicate"),t+=o,s.add(o)}}const r=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?[".concat(t||"0-9A-F","][0-9A-F]{3}\\2?[").concat(t?"89AB":"0-9A-F","][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$"),"i");return this.$_addRule({name:"guid",args:{options:e},regex:r})},validate(e,t,r,{regex:s}){const n=s.exec(e);return n?p.guidBrackets[n[1]]!==n[n.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(e={}){return d.assertOptions(e,["byteAligned"]),e=n({byteAligned:!1},e),a("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate:(e,t,{options:r})=>p.hexRegex.test(e)?r.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>i.isValid(e,{minDomainSegments:1})||p.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){d.assertOptions(e,["cidr","version"]);const{cidr:t,versions:r,regex:s}=c.regex(e),n=e.version?r:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:n}},regex:s})},validate:(e,t,{options:r},{regex:s})=>s.test(e)?e:r.version?t.error("string.ipVersion",{value:e,cidr:r.cidr,version:r.version}):t.error("string.ip",{value:e,cidr:r.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>p.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>p.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return p.length(this,"length",e,"=",t)},validate(e,t,{limit:r,encoding:s},{name:n,operator:o,args:a}){const i=!s&&e.length;return d.compare(i,r,o)?e:t.error("string."+n,{limit:a.limit,value:e,encoding:s})},args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return p.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return p.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(e="NFC"){return a(p.normalizationForms.includes(e),"normalization form must be one of "+p.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate:(e,{error:t},{form:r})=>e===e.normalize(r)?e:t("string.normalize",{value:e,form:r}),convert:!0},pattern:{alias:"regex",method(e,t={}){a(e instanceof RegExp,"regex must be a RegExp"),a(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),d.assertOptions(t,["invert","name"]);const r=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:r})},validate:(e,t,{regex:r,options:s},{errorCode:n})=>r.test(e)^s.invert?e:t.error(n,{name:s.name,regex:r,value:e}),args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(u(e),"g")),a(e instanceof RegExp,"pattern must be a RegExp"),a("string"==typeof t,"replacement must be a String");const r=this.clone();return r.$_terms.replacements||(r.$_terms.replacements=[]),r.$_terms.replacements.push({pattern:e,replacement:t}),r}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(e=!0){return a("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate:(e,t,{enabled:r})=>r&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(e=!0){return a("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){d.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&d.assertOptions(e.domain,["allowUnicode","minDomainSegments","tlds"]);const{regex:t,scheme:r}=m.regex(e),s=e.domain?p.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:s,scheme:r})},validate(e,t,{options:r},{regex:s,domain:n,scheme:o}){if(["http:/","https:/"].includes(e))return t.error("string.uri");const a=s.exec(e);if(a){if(n){const e=a[1]||a[2];if(!i.isValid(e,n))return t.error("string.domain",{value:e})}return e}return r.relativeOnly?t.error("string.uriRelativeOnly"):r.scheme?t.error("string.uriCustomScheme",{scheme:o,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:r,replacement:s}of t.replacements)e=e.replace(r,s);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":'{{#label}} with value "{[.]}" fails to match the required pattern: {{#regex}}',"string.pattern.name":'{{#label}} with value "{[.]}" fails to match the {{#name}} pattern',"string.pattern.invert.base":'{{#label}} with value "{[.]}" matches the inverted pattern: {{#regex}}',"string.pattern.invert.name":'{{#label}} with value "{[.]}" matches the inverted {{#name}} pattern',"string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),p.addressOptions=function(e){if(!e)return e;if(a(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return a(p.tlds,"Built-in TLD list disabled"),Object.assign({},e,p.tlds);a("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),a(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),e;const r=e.tlds.allow;return r?!0===r?(a(p.tlds,"Built-in TLD list disabled"),Object.assign({},e,p.tlds)):(Array.isArray(r)&&(e=Object.assign({},e,{tlds:{allow:new Set(r)}})),a(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),e):e},p.isoDate=function(e){if(!d.isIsoDate(e))return null;const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},p.length=function(e,t,r,s,n){return a(!n||!1,"Invalid encoding:",n),e.$_addRule({name:t,method:"length",args:{limit:r,encoding:n},operator:s})}},function(e,t,r){"use strict";const s=r(24),n=r(23),o=r(25),a={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(s.TextEncoder||TextEncoder)};t.analyze=function(e,t){return a.email(e,t)},t.isValid=function(e,t){return!a.email(e,t)},a.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return o.code("EMPTY_STRING");const r=!a.nonAsciiRx.test(e);if(!r){if(!1===t.allowUnicode)return o.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const s=e.split("@");if(2!==s.length)return s.length>2?o.code("MULTIPLE_AT_CHAR"):o.code("MISSING_AT_CHAR");const[i,l]=s;if(!i)return o.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return o.code("ADDRESS_TOO_LONG");if(a.encoder.encode(i).length>64)return o.code("LOCAL_TOO_LONG")}return a.local(i,r)||n.analyze(l,t)},a.local=function(e,t){const r=e.split(".");for(const e of r){if(!e.length)return o.code("EMPTY_LOCAL_SEGMENT");if(t){if(!a.atextRx.test(e))return o.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(a.atextRx.test(t))continue;const e=a.binary(t);if(!a.atomRx.test(e))return o.code("INVALID_LOCAL_CHARS")}}},a.binary=function(e){return Array.from(a.encoder.encode(e)).map(e=>String.fromCharCode(e)).join("")},a.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,a.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},function(e,t,r){"use strict";const s=r(0),n=r(26);t.regex=function(e={}){s(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";s(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),s(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let r=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(r)||(r=[r]),s(r.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<r.length;++e)s("string"==typeof r[e],"options.version must only contain strings"),r[e]=r[e].toLowerCase(),s(["ipv4","ipv6","ipvfuture"].includes(r[e]),"options.version contains unknown version "+r[e]+" - must be one of ipv4, ipv6, ipvfuture");const o=(r=Array.from(new Set(r))).map(e=>{if("forbidden"===t)return n.ip[e];const r="\\/".concat("ipv4"===e?n.ip.v4Cidr:n.ip.v6Cidr);return"required"===t?"".concat(n.ip[e]).concat(r):"".concat(n.ip[e],"(?:").concat(r,")?")}),a="(?:".concat(o.join("|"),")"),i=new RegExp("^".concat(a,"$"));return{cidr:t,versions:r,regex:i,raw:a}}},function(e,t){},function(e,t,r){"use strict";const s=r(0),n=r(3),o={};o.Map=class extends Map{slice(){return new o.Map(this)}},e.exports=n.extend({type:"symbol",terms:{map:{init:new o.Map}},coerce:{method(e,{schema:t,error:r}){const s=t.$_terms.map.get(e);return s&&(e=s),t._flags.only&&"symbol"!=typeof e?{value:e,errors:r("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),s(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),r=[];for(const n of e){s(n&&n[Symbol.iterator],"Entry must be an iterable");const[e,o]=n;s("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),s("symbol"==typeof o,"Value must be a Symbol"),t.$_terms.map.set(e,o),r.push(o)}return t.valid(...r)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})}])});

},{}],29:[function(require,module,exports){
(function (Buffer){
"use strict";const Events=require("events"),Http=require("http"),Https=require("https"),Stream=require("stream"),Url=require("url"),Zlib=require("zlib"),Boom=require("@hapi/boom"),Bourne=require("@hapi/bourne"),Hoek=require("@hapi/hoek"),Payload=require("./payload"),Recorder=require("./recorder"),Tap=require("./tap"),internals={jsonRegex:/^application\/([a-z0-9.]*[+-]json|json)$/,shallowOptions:["agent","agents","beforeRedirect","payload","redirected"],Client:class{constructor(e={}){Hoek.assert(!e.agents||e.agents.https&&e.agents.http&&e.agents.httpsAllowUnauthorized,'Option agents must include "http", "https", and "httpsAllowUnauthorized"'),this._defaults=Hoek.clone(e,{shallow:internals.shallowOptions}),this.agents=this._defaults.agents||{https:new Https.Agent({maxSockets:1/0}),http:new Http.Agent({maxSockets:1/0}),httpsAllowUnauthorized:new Https.Agent({maxSockets:1/0,rejectUnauthorized:!1})},this._defaults.events&&(this.events=new Events.EventEmitter)}defaults(e){return Hoek.assert(e&&"object"==typeof e,"options must be provided to defaults"),e=Hoek.applyToDefaults(this._defaults,e,{shallow:internals.shallowOptions}),new internals.Client(e)}request(e,t,r={}){try{r=Hoek.applyToDefaults(this._defaults,r,{shallow:internals.shallowOptions}),Hoek.assert(void 0===r.payload||"string"==typeof r.payload||"object"==typeof r.payload,"options.payload must be a string, a Buffer, a Stream, or an Object"),Hoek.assert(void 0===r.agent||null===r.agent||"boolean"!=typeof r.rejectUnauthorized,"options.agent cannot be set to an Agent at the same time as options.rejectUnauthorized is set"),Hoek.assert(void 0===r.beforeRedirect||null===r.beforeRedirect||"function"==typeof r.beforeRedirect,"options.beforeRedirect must be a function"),Hoek.assert(void 0===r.redirected||null===r.redirected||"function"==typeof r.redirected,"options.redirected must be a function"),Hoek.assert(void 0===r.gunzip||"boolean"==typeof r.gunzip||"force"===r.gunzip,'options.gunzip must be a boolean or "force"')}catch(e){return Promise.reject(e)}r.baseUrl&&(t=internals.resolveUrl(r.baseUrl,t),delete r.baseUrl);const o={},s=this._request(e,t,r,o),n=new Promise((e,t)=>{o.callback=((r,o)=>{r?t(r):e(o)})});return n.req=s,n}_request(e,t,r,o,s){const n={};if(r.socketPath){n.socketPath=r.socketPath;const e=new Url.URL(t,`unix://${r.socketPath}`);internals.applyUrlToOptions(n,{host:"",protocol:"http:",hash:e.hash,search:e.search,searchParams:e.searchParams,pathname:e.pathname,href:e.href})}else{n.setHost=!1;const e=new Url.URL(t);internals.applyUrlToOptions(n,e)}n.method=e.toUpperCase(),n.headers=Object.assign({},r.headers),internals.findHeader("host",n.headers)||(n.headers.host=n.host);const a=void 0!==internals.findHeader("content-length",n.headers);!r.payload||"object"!=typeof r.payload||r.payload instanceof Stream||Buffer.isBuffer(r.payload)||(r.payload=JSON.stringify(r.payload),internals.findHeader("content-type",n.headers)||(n.headers["content-type"]="application/json")),r.gunzip&&void 0===internals.findHeader("accept-encoding",n.headers)&&(n.headers["accept-encoding"]="gzip");const i="GET"!==n.method&&"HEAD"!==n.method&&null!==r.payload&&void 0!==r.payload;!i||"string"!=typeof r.payload&&!Buffer.isBuffer(r.payload)||a||(n.headers["content-length"]=Buffer.isBuffer(r.payload)?r.payload.length:Buffer.byteLength(r.payload));let l=!!r.hasOwnProperty("redirects")&&r.redirects;(s=s||[]).push({method:n.method,url:t});const c="https:"===n.protocol?Https:Http;void 0!==r.rejectUnauthorized&&"https:"===n.protocol?n.agent=r.rejectUnauthorized?this.agents.https:this.agents.httpsAllowUnauthorized:r.agent||!1===r.agent?n.agent=r.agent:n.agent="https:"===n.protocol?this.agents.https:this.agents.http,void 0!==r.secureProtocol&&(n.secureProtocol=r.secureProtocol),void 0!==r.ciphers&&(n.ciphers=r.ciphers),this._emit("preRequest",n,r);const d=Date.now(),p=c.request(n);this._emit("request",p);let u,h=null;const f=e=>(e.trace=s,g(Boom.badGateway("Client request error",e))),m=()=>{if(!p.socket){const e=new Error("socket hang up");e.code="ECONNRESET",g(e)}};p.once("error",f);const y=e=>{const t=e.statusCode,o=internals.redirectMethod(t,n.method,r);if(!1===l||!o)return g(null,e);if(e.destroy(),0===l)return g(Boom.badGateway("Maximum redirections reached",s));let a=e.headers.location;if(!a)return g(Boom.badGateway("Received redirection without location",s));/^https?:/i.test(a)||(a=Url.resolve(n.href,a));const i=Hoek.clone(r,{shallow:internals.shallowOptions});i.payload=h||r.payload,i.redirects=--l;const c=()=>{const e=this._request(o,a,i,{callback:g},s);r.redirected&&r.redirected(t,a,e)};return r.beforeRedirect?r.beforeRedirect(o,t,a,e.headers,i,c):c()},g=Hoek.once((e,t)=>(e&&p.abort(),p.removeListener("response",y),p.removeListener("error",f),p.removeListener("abort",m),p.on("error",Hoek.ignore),clearTimeout(u),this._emit("response",e,{req:p,res:t,start:d,uri:n}),o.callback(e,t)));if(p.once("response",y),r.timeout&&(u=setTimeout(()=>g(Boom.gatewayTimeout("Client request timeout")),r.timeout),delete r.timeout),p.on("abort",m),i){if(r.payload instanceof Stream){let e=r.payload;if(l){const t=new Tap;t.once("finish",()=>{h=t.collect()}),e=r.payload.pipe(t)}return internals.deferPipeUntilSocketConnects(p,e),p}p.write(r.payload)}return p.end(),p}_emit(...e){this.events&&this.events.emit(...e)}read(e,t={}){return new Promise((r,o)=>{this._read(e,t,(e,t)=>{e?o(e):r(t)})})}_read(e,t,r){t=Hoek.applyToDefaults(this._defaults,t,{shallow:internals.shallowOptions});let o=null;const s=Hoek.once((s,n)=>{if(clearTimeout(o),l.removeListener("error",c),l.removeListener("finish",d),e.removeListener("error",a),e.removeListener("close",i),e.removeListener("aborted",i),e.on("error",Hoek.ignore),s)return r(s);if(!t.json)return r(null,n);if("force"===t.json)return internals.tryParseBuffer(n,r);const p=(e.headers&&internals.findHeader("content-type",e.headers)||"").split(";")[0].trim().toLowerCase();return internals.jsonRegex.test(p)?internals.tryParseBuffer(n,r):"strict"===t.json?r(Boom.notAcceptable("The content-type is not JSON compatible")):r(null,n)}),n=t.timeout;n&&n>0&&(o=setTimeout(()=>s(Boom.clientTimeout()),n));const a=e=>s(e.isBoom?e:Boom.internal("Payload stream error",e)),i=()=>{e.complete||s(Boom.internal("Payload stream closed prematurely"))};e.once("error",a),e.once("close",i),e.once("aborted",i);const l=new Recorder({maxBytes:t.maxBytes}),c=t=>(e.destroy&&e.destroy(),s(t));l.once("error",c);const d=()=>s(null,l.collect());if(l.once("finish",d),t.gunzip){const r="force"===t.gunzip?"gzip":e.headers&&internals.findHeader("content-encoding",e.headers)||"";if(/^(x-)?gzip(\s*,\s*identity)?$/.test(r)){const t=Zlib.createGunzip();return t.once("error",c),void e.pipe(t).pipe(l)}}e.pipe(l)}toReadableStream(e,t){return new Payload(e,t)}parseCacheControl(e){const t={},r=e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,r,o,s)=>{const n=o||s;return t[r]=!n||n.toLowerCase(),""});if(t["max-age"])try{const e=parseInt(t["max-age"],10);if(isNaN(e))return null;t["max-age"]=e}catch(e){}return r?null:t}get(e,t){return this._shortcut("GET",e,t)}post(e,t){return this._shortcut("POST",e,t)}patch(e,t){return this._shortcut("PATCH",e,t)}put(e,t){return this._shortcut("PUT",e,t)}delete(e,t){return this._shortcut("DELETE",e,t)}async _shortcut(e,t,r={}){const o=await this.request(e,t,r);let s;try{s=await this.read(o,r)}catch(e){throw e.data=e.data||{},e.data.res=o,e}if(o.statusCode<400)return{res:o,payload:s};const n={isResponseError:!0,headers:o.headers,res:o,payload:s};throw new Boom.Boom(`Response Error: ${o.statusCode} ${o.statusMessage}`,{statusCode:o.statusCode,data:n})}},resolveUrl:function(e,t){if(!t)return e;const r=new Url.URL(t,e);return Url.format(r)},deferPipeUntilSocketConnects:function(e,t){const r=()=>{t.pipe(e),t.removeListener("error",o)},o=t=>{e.emit("error",t)};e.once("socket",e=>{if(!e.connecting)return r();e.once("connect",r)}),t.on("error",o)},redirectMethod:function(e,t,r){switch(e){case 301:case 302:return r.redirectMethod||t;case 303:if(r.redirect303)return"GET";break;case 307:case 308:return t}return null},tryParseBuffer:function(e,t){if(0===e.length)return t(null,null);let r;try{r=Bourne.parse(e.toString())}catch(r){return t(Boom.badGateway(r.message,{payload:e}))}return t(null,r)},findHeader:function(e,t){const r=e.toLowerCase();for(const e of Object.keys(t))if(e.toLowerCase()===r)return t[e]},applyUrlToOptions:(e,t)=>(e.host=t.host,e.origin=t.origin,e.searchParams=t.searchParams,e.protocol=t.protocol,e.hostname=t.hostname,e.hash=t.hash,e.search=t.search,e.pathname=t.pathname,e.path=`${t.pathname}${t.search||""}`,e.href=t.href,""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username}:${t.password}`,e.username=t.username,e.password=t.password),e)};module.exports=new internals.Client;

}).call(this,require("buffer").Buffer)
},{"./payload":30,"./recorder":31,"./tap":32,"@hapi/boom":1,"@hapi/bourne":2,"@hapi/hoek":17,"buffer":49,"events":82,"http":197,"https":91,"stream":196,"url":219,"zlib":46}],30:[function(require,module,exports){
(function (Buffer){
"use strict";const Stream=require("stream"),internals={};module.exports=internals.Payload=class extends Stream.Readable{constructor(t,s){super();const i=[].concat(t||"");let e=0;for(let t=0;t<i.length;++t){const s=i[t];e+=s.length,i[t]=Buffer.isBuffer(s)?s:Buffer.from(s)}this._data=Buffer.concat(i,e),this._position=0,this._encoding=s||"utf8"}_read(t){const s=this._data.slice(this._position,this._position+t);this.push(s,this._encoding),this._position=this._position+s.length,this._position>=this._data.length&&this.push(null)}};

}).call(this,require("buffer").Buffer)
},{"buffer":49,"stream":196}],31:[function(require,module,exports){
(function (Buffer){
"use strict";const Stream=require("stream"),Boom=require("@hapi/boom"),internals={};module.exports=internals.Recorder=class extends Stream.Writable{constructor(t){super(),this.settings=t,this.buffers=[],this.length=0}_write(t,e,s){if(this.settings.maxBytes&&this.length+t.length>this.settings.maxBytes)return this.emit("error",Boom.entityTooLarge("Payload content length greater than maximum allowed: "+this.settings.maxBytes));this.length=this.length+t.length,this.buffers.push(t),s()}collect(){return 0===this.buffers.length?Buffer.alloc(0):1===this.buffers.length?this.buffers[0]:Buffer.concat(this.buffers,this.length)}};

}).call(this,require("buffer").Buffer)
},{"@hapi/boom":1,"buffer":49,"stream":196}],32:[function(require,module,exports){
"use strict";const Stream=require("stream"),Payload=require("./payload"),internals={};module.exports=internals.Tap=class extends Stream.Transform{constructor(){super(),this.buffers=[]}_transform(r,e,s){this.buffers.push(r),s(null,r)}collect(){return new Payload(this.buffers)}};

},{"./payload":30,"stream":196}],33:[function(require,module,exports){
(function (global){
"use strict";var objectAssign=require("object-assign");function compare(t,e){if(t===e)return 0;for(var r=t.length,i=e.length,n=0,a=Math.min(r,i);n<a;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0}function isBuffer(t){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var util=require("util/"),hasOwn=Object.prototype.hasOwnProperty,pSlice=Array.prototype.slice,functionsHaveNames="foo"===function(){}.name;function pToString(t){return Object.prototype.toString.call(t)}function isView(t){return!isBuffer(t)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var assert=module.exports=ok,regex=/\s*function\s+([^\(\s]*)\s*/;function getName(t){if(util.isFunction(t)){if(functionsHaveNames)return t.name;var e=t.toString().match(regex);return e&&e[1]}}function truncate(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function inspect(t){if(functionsHaveNames||!util.isFunction(t))return util.inspect(t);var e=getName(t);return"[Function"+(e?": "+e:"")+"]"}function getMessage(t){return truncate(inspect(t.actual),128)+" "+t.operator+" "+truncate(inspect(t.expected),128)}function fail(t,e,r,i,n){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:n})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e,r,i){if(t===e)return!0;if(isBuffer(t)&&isBuffer(e))return 0===compare(t,e);if(util.isDate(t)&&util.isDate(e))return t.getTime()===e.getTime();if(util.isRegExp(t)&&util.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(isView(t)&&isView(e)&&pToString(t)===pToString(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===compare(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(isBuffer(t)!==isBuffer(e))return!1;var n=(i=i||{actual:[],expected:[]}).actual.indexOf(t);return-1!==n&&n===i.expected.indexOf(e)||(i.actual.push(t),i.expected.push(e),objEquiv(t,e,r,i))}return r?t===e:t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e,r,i){if(null==t||null==e)return!1;if(util.isPrimitive(t)||util.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=isArguments(t),a=isArguments(e);if(n&&!a||!n&&a)return!1;if(n)return _deepEqual(t=pSlice.call(t),e=pSlice.call(e),r);var s,u,o=objectKeys(t),c=objectKeys(e);if(o.length!==c.length)return!1;for(o.sort(),c.sort(),u=o.length-1;u>=0;u--)if(o[u]!==c[u])return!1;for(u=o.length-1;u>=0;u--)if(!_deepEqual(t[s=o[u]],e[s],r,i))return!1;return!0}function notDeepStrictEqual(t,e,r){_deepEqual(t,e,!0)&&fail(t,e,r,"notDeepStrictEqual",notDeepStrictEqual)}function expectedException(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function _tryBlock(t){var e;try{t()}catch(t){e=t}return e}function _throws(t,e,r,i){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(i=r,r=null),n=_tryBlock(e),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!n&&fail(n,r,"Missing expected exception"+i);var a="string"==typeof i,s=!t&&n&&!r;if((!t&&util.isError(n)&&a&&expectedException(n,r)||s)&&fail(n,r,"Got unwanted exception"+i),t&&n&&r&&!expectedException(n,r)||!t&&n)throw n}function strict(t,e){t||fail(t,!0,e,"==",strict)}assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,n=getName(e),a=i.indexOf("\n"+n);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e,!1)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.deepStrictEqual=function(t,e,r){_deepEqual(t,e,!0)||fail(t,e,r,"deepStrictEqual",assert.deepStrictEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e,!1)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.notDeepStrictEqual=notDeepStrictEqual,assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert.throws=function(t,e,r){_throws(!0,t,e,r)},assert.doesNotThrow=function(t,e,r){_throws(!1,t,e,r)},assert.ifError=function(t){if(t)throw t},assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual}),assert.strict.strict=assert.strict;var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"object-assign":119,"util/":36}],34:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};

},{}],35:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};

},{}],36:[function(require,module,exports){
(function (process,global){
var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var t=!1;return function(){if(!t){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),t=!0}return e.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c,a="",l=!1,p=["{","}"];(isArray(r)&&(l=!0,p=["[","]"]),isFunction(r))&&(a=" [Function"+(r.name?": "+r.name:"")+"]");return isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0!==o.length||l&&0!=r.length?t<0?isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=l?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,l)}),e.seen.pop(),reduceToSingleString(c,a,p)):p[0]+a+p[1]}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){return e.reduce(function(e,r){return 0,r.indexOf("\n")>=0&&0,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":35,"_process":144,"inherits":34}],37:[function(require,module,exports){
var Backoff=require("./lib/backoff"),ExponentialBackoffStrategy=require("./lib/strategy/exponential"),FibonacciBackoffStrategy=require("./lib/strategy/fibonacci"),FunctionCall=require("./lib/function_call.js");module.exports.Backoff=Backoff,module.exports.FunctionCall=FunctionCall,module.exports.FibonacciStrategy=FibonacciBackoffStrategy,module.exports.ExponentialStrategy=ExponentialBackoffStrategy,module.exports.fibonacci=function(e){return new Backoff(new FibonacciBackoffStrategy(e))},module.exports.exponential=function(e){return new Backoff(new ExponentialBackoffStrategy(e))},module.exports.call=function(e,o,t){var a=Array.prototype.slice.call(arguments);return e=a[0],o=a.slice(1,a.length-1),t=a[a.length-1],new FunctionCall(e,o,t)};

},{"./lib/backoff":38,"./lib/function_call.js":39,"./lib/strategy/exponential":40,"./lib/strategy/fibonacci":41}],38:[function(require,module,exports){
var events=require("events"),precond=require("precond"),util=require("util");function Backoff(t){events.EventEmitter.call(this),this.backoffStrategy_=t,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}util.inherits(Backoff,events.EventEmitter),Backoff.prototype.failAfter=function(t){precond.checkArgument(t>0,"Expected a maximum number of retry greater than 0 but got %s.",t),this.maxNumberOfRetry_=t},Backoff.prototype.backoff=function(t){precond.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",t),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,t))},Backoff.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},Backoff.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},module.exports=Backoff;

},{"events":82,"precond":140,"util":228}],39:[function(require,module,exports){
var events=require("events"),precond=require("precond"),util=require("util"),Backoff=require("./backoff"),FibonacciBackoffStrategy=require("./strategy/fibonacci");function FunctionCall(t,n,i){events.EventEmitter.call(this),precond.checkIsFunction(t,"Expected fn to be a function."),precond.checkIsArray(n,"Expected args to be an array."),precond.checkIsFunction(i,"Expected callback to be a function."),this.function_=t,this.arguments_=n,this.callback_=i,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=FunctionCall.DEFAULT_RETRY_PREDICATE_,this.state_=FunctionCall.State_.PENDING}util.inherits(FunctionCall,events.EventEmitter),FunctionCall.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},FunctionCall.DEFAULT_RETRY_PREDICATE_=function(t){return!0},FunctionCall.prototype.isPending=function(){return this.state_==FunctionCall.State_.PENDING},FunctionCall.prototype.isRunning=function(){return this.state_==FunctionCall.State_.RUNNING},FunctionCall.prototype.isCompleted=function(){return this.state_==FunctionCall.State_.COMPLETED},FunctionCall.prototype.isAborted=function(){return this.state_==FunctionCall.State_.ABORTED},FunctionCall.prototype.setStrategy=function(t){return precond.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=t,this},FunctionCall.prototype.retryIf=function(t){return precond.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=t,this},FunctionCall.prototype.getLastResult=function(){return this.lastResult_.concat()},FunctionCall.prototype.getNumRetries=function(){return this.numRetries_},FunctionCall.prototype.failAfter=function(t){return precond.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=t,this},FunctionCall.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=FunctionCall.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},FunctionCall.prototype.start=function(t){precond.checkState(!this.isAborted(),"FunctionCall is aborted."),precond.checkState(this.isPending(),"FunctionCall already started.");var n=this.strategy_||new FibonacciBackoffStrategy;this.backoff_=t?t(n):new Backoff(n),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=FunctionCall.State_.RUNNING,this.doCall_(!1)},FunctionCall.prototype.doCall_=function(t){t&&this.numRetries_++;var n=["call"].concat(this.arguments_);events.EventEmitter.prototype.emit.apply(this,n);var i=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(i))},FunctionCall.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},FunctionCall.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var t=Array.prototype.slice.call(arguments);this.lastResult_=t,events.EventEmitter.prototype.emit.apply(this,["callback"].concat(t));var n=t[0];n&&this.retryPredicate_(n)?this.backoff_.backoff(n):(this.state_=FunctionCall.State_.COMPLETED,this.doCallback_())}},FunctionCall.prototype.handleBackoff_=function(t,n,i){this.emit("backoff",t,n,i)},module.exports=FunctionCall;

},{"./backoff":38,"./strategy/fibonacci":41,"events":82,"precond":140,"util":228}],40:[function(require,module,exports){
var util=require("util"),precond=require("precond"),BackoffStrategy=require("./strategy");function ExponentialBackoffStrategy(t){BackoffStrategy.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=ExponentialBackoffStrategy.DEFAULT_FACTOR,t&&void 0!==t.factor&&(precond.checkArgument(t.factor>1,"Exponential factor should be greater than 1 but got %s.",t.factor),this.factor_=t.factor)}util.inherits(ExponentialBackoffStrategy,BackoffStrategy),ExponentialBackoffStrategy.DEFAULT_FACTOR=2,ExponentialBackoffStrategy.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},ExponentialBackoffStrategy.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},module.exports=ExponentialBackoffStrategy;

},{"./strategy":42,"precond":140,"util":228}],41:[function(require,module,exports){
var util=require("util"),BackoffStrategy=require("./strategy");function FibonacciBackoffStrategy(t){BackoffStrategy.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}util.inherits(FibonacciBackoffStrategy,BackoffStrategy),FibonacciBackoffStrategy.prototype.next_=function(){var t=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=t,t},FibonacciBackoffStrategy.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},module.exports=FibonacciBackoffStrategy;

},{"./strategy":42,"util":228}],42:[function(require,module,exports){
var events=require("events"),util=require("util");function isDef(t){return null!=t}function BackoffStrategy(t){if(isDef((t=t||{}).initialDelay)&&t.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(isDef(t.maxDelay)&&t.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=t.initialDelay||100,this.maxDelay_=t.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(isDef(t.randomisationFactor)&&(t.randomisationFactor<0||t.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=t.randomisationFactor||0}BackoffStrategy.prototype.getMaxDelay=function(){return this.maxDelay_},BackoffStrategy.prototype.getInitialDelay=function(){return this.initialDelay_},BackoffStrategy.prototype.next=function(){var t=this.next_(),e=1+Math.random()*this.randomisationFactor_;return Math.round(t*e)},BackoffStrategy.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},BackoffStrategy.prototype.reset=function(){this.reset_()},BackoffStrategy.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},module.exports=BackoffStrategy;

},{"events":82,"util":228}],43:[function(require,module,exports){
"use strict";exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(o){var r=o.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=o.indexOf("=");return-1===e&&(e=r),[e,e===r?0:4-e%4]}function byteLength(o){var r=getLens(o),e=r[0],t=r[1];return 3*(e+t)/4-t}function _byteLength(o,r,e){return 3*(r+e)/4-e}function toByteArray(o){var r,e,t=getLens(o),n=t[0],u=t[1],p=new Arr(_byteLength(o,n,u)),a=0,h=u>0?n-4:n;for(e=0;e<h;e+=4)r=revLookup[o.charCodeAt(e)]<<18|revLookup[o.charCodeAt(e+1)]<<12|revLookup[o.charCodeAt(e+2)]<<6|revLookup[o.charCodeAt(e+3)],p[a++]=r>>16&255,p[a++]=r>>8&255,p[a++]=255&r;return 2===u&&(r=revLookup[o.charCodeAt(e)]<<2|revLookup[o.charCodeAt(e+1)]>>4,p[a++]=255&r),1===u&&(r=revLookup[o.charCodeAt(e)]<<10|revLookup[o.charCodeAt(e+1)]<<4|revLookup[o.charCodeAt(e+2)]>>2,p[a++]=r>>8&255,p[a++]=255&r),p}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[63&o]}function encodeChunk(o,r,e){for(var t,n=[],u=r;u<e;u+=3)t=(o[u]<<16&16711680)+(o[u+1]<<8&65280)+(255&o[u+2]),n.push(tripletToBase64(t));return n.join("")}function fromByteArray(o){for(var r,e=o.length,t=e%3,n=[],u=0,p=e-t;u<p;u+=16383)n.push(encodeChunk(o,u,u+16383>p?p:u+16383));return 1===t?(r=o[e-1],n.push(lookup[r>>2]+lookup[r<<4&63]+"==")):2===t&&(r=(o[e-2]<<8)+o[e-1],n.push(lookup[r>>10]+lookup[r>>4&63]+lookup[r<<2&63]+"=")),n.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;

},{}],44:[function(require,module,exports){

},{}],45:[function(require,module,exports){
(function (process,Buffer){
"use strict";var assert=require("assert"),Zstream=require("pako/lib/zlib/zstream"),zlib_deflate=require("pako/lib/zlib/deflate.js"),zlib_inflate=require("pako/lib/zlib/inflate.js"),constants=require("pako/lib/zlib/constants");for(var key in constants)exports[key]=constants[key];exports.NONE=0,exports.DEFLATE=1,exports.INFLATE=2,exports.GZIP=3,exports.GUNZIP=4,exports.DEFLATERAW=5,exports.INFLATERAW=6,exports.UNZIP=7;var GZIP_HEADER_ID1=31,GZIP_HEADER_ID2=139;function Zlib(t){if("number"!=typeof t||t<exports.DEFLATE||t>exports.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}Zlib.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,assert(this.init_done,"close before init"),assert(this.mode<=exports.UNZIP),this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW?zlib_deflate.deflateEnd(this.strm):this.mode!==exports.INFLATE&&this.mode!==exports.GUNZIP&&this.mode!==exports.INFLATERAW&&this.mode!==exports.UNZIP||zlib_inflate.inflateEnd(this.strm),this.mode=exports.NONE,this.dictionary=null)},Zlib.prototype.write=function(t,e,s,i,r,o,n){return this._write(!0,t,e,s,i,r,o,n)},Zlib.prototype.writeSync=function(t,e,s,i,r,o,n){return this._write(!1,t,e,s,i,r,o,n)},Zlib.prototype._write=function(t,e,s,i,r,o,n,h){if(assert.equal(arguments.length,8),assert(this.init_done,"write before init"),assert(this.mode!==exports.NONE,"already finalized"),assert.equal(!1,this.write_in_progress,"write already in progress"),assert.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,assert.equal(!1,void 0===e,"must provide flush value"),this.write_in_progress=!0,e!==exports.Z_NO_FLUSH&&e!==exports.Z_PARTIAL_FLUSH&&e!==exports.Z_SYNC_FLUSH&&e!==exports.Z_FULL_FLUSH&&e!==exports.Z_FINISH&&e!==exports.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=Buffer.alloc(0),r=0,i=0),this.strm.avail_in=r,this.strm.input=s,this.strm.next_in=i,this.strm.avail_out=h,this.strm.output=o,this.strm.next_out=n,this.flush=e,!t)return this._process(),this._checkError()?this._afterSync():void 0;var a=this;return process.nextTick(function(){a._process(),a._after()}),this},Zlib.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},Zlib.prototype._process=function(){var t=null;switch(this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:this.err=zlib_deflate.deflate(this.strm,this.flush);break;case exports.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(this.strm.input[t]!==GZIP_HEADER_ID1){this.mode=exports.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;this.strm.input[t]===GZIP_HEADER_ID2?(this.gzip_id_bytes_read=2,this.mode=exports.GUNZIP):this.mode=exports.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:for(this.err=zlib_inflate.inflate(this.strm,this.flush),this.err===exports.Z_NEED_DICT&&this.dictionary&&(this.err=zlib_inflate.inflateSetDictionary(this.strm,this.dictionary),this.err===exports.Z_OK?this.err=zlib_inflate.inflate(this.strm,this.flush):this.err===exports.Z_DATA_ERROR&&(this.err=exports.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===exports.GUNZIP&&this.err===exports.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=zlib_inflate.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},Zlib.prototype._checkError=function(){switch(this.err){case exports.Z_OK:case exports.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===exports.Z_FINISH)return this._error("unexpected end of file"),!1;break;case exports.Z_STREAM_END:break;case exports.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},Zlib.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},Zlib.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},Zlib.prototype.init=function(t,e,s,i,r){assert(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),assert(t>=8&&t<=15,"invalid windowBits"),assert(e>=-1&&e<=9,"invalid compression level"),assert(s>=1&&s<=9,"invalid memlevel"),assert(i===exports.Z_FILTERED||i===exports.Z_HUFFMAN_ONLY||i===exports.Z_RLE||i===exports.Z_FIXED||i===exports.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(e,t,s,i,r),this._setDictionary()},Zlib.prototype.params=function(){throw new Error("deflateParams Not supported")},Zlib.prototype.reset=function(){this._reset(),this._setDictionary()},Zlib.prototype._init=function(t,e,s,i,r){switch(this.level=t,this.windowBits=e,this.memLevel=s,this.strategy=i,this.flush=exports.Z_NO_FLUSH,this.err=exports.Z_OK,this.mode!==exports.GZIP&&this.mode!==exports.GUNZIP||(this.windowBits+=16),this.mode===exports.UNZIP&&(this.windowBits+=32),this.mode!==exports.DEFLATERAW&&this.mode!==exports.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new Zstream,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:this.err=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:this.err=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==exports.Z_OK&&this._error("Init error"),this.dictionary=r,this.write_in_progress=!1,this.init_done=!0},Zlib.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=exports.Z_OK,this.mode){case exports.DEFLATE:case exports.DEFLATERAW:this.err=zlib_deflate.deflateSetDictionary(this.strm,this.dictionary)}this.err!==exports.Z_OK&&this._error("Failed to set dictionary")}},Zlib.prototype._reset=function(){switch(this.err=exports.Z_OK,this.mode){case exports.DEFLATE:case exports.DEFLATERAW:case exports.GZIP:this.err=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:case exports.GUNZIP:this.err=zlib_inflate.inflateReset(this.strm)}this.err!==exports.Z_OK&&this._error("Failed to reset stream")},exports.Zlib=Zlib;

}).call(this,require('_process'),require("buffer").Buffer)
},{"_process":144,"assert":33,"buffer":49,"pako/lib/zlib/constants":129,"pako/lib/zlib/deflate.js":131,"pako/lib/zlib/inflate.js":133,"pako/lib/zlib/zstream":137}],46:[function(require,module,exports){
(function (process){
"use strict";var Buffer=require("buffer").Buffer,Transform=require("stream").Transform,binding=require("./binding"),util=require("util"),assert=require("assert").ok,kMaxLength=require("buffer").kMaxLength,kRangeErrorMessage="Cannot create final Buffer. It would be larger than 0x"+kMaxLength.toString(16)+" bytes";binding.Z_MIN_WINDOWBITS=8,binding.Z_MAX_WINDOWBITS=15,binding.Z_DEFAULT_WINDOWBITS=15,binding.Z_MIN_CHUNK=64,binding.Z_MAX_CHUNK=1/0,binding.Z_DEFAULT_CHUNK=16384,binding.Z_MIN_MEMLEVEL=1,binding.Z_MAX_MEMLEVEL=9,binding.Z_DEFAULT_MEMLEVEL=8,binding.Z_MIN_LEVEL=-1,binding.Z_MAX_LEVEL=9,binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION;for(var bkeys=Object.keys(binding),bk=0;bk<bkeys.length;bk++){var bkey=bkeys[bk];bkey.match(/^Z/)&&Object.defineProperty(exports,bkey,{enumerable:!0,value:binding[bkey],writable:!1})}for(var codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR},ckeys=Object.keys(codes),ck=0;ck<ckeys.length;ck++){var ckey=ckeys[ck];codes[codes[ckey]]=ckey}function zlibBuffer(e,n,i){var t=[],r=0;function s(){for(var n;null!==(n=e.read());)t.push(n),r+=n.length;e.once("readable",s)}function f(){var n,s=null;r>=kMaxLength?s=new RangeError(kRangeErrorMessage):n=Buffer.concat(t,r),t=[],e.close(),i(s,n)}e.on("error",function(n){e.removeListener("end",f),e.removeListener("readable",s),i(n)}),e.on("end",f),e.end(n),s()}function zlibBufferSync(e,n){if("string"==typeof n&&(n=Buffer.from(n)),!Buffer.isBuffer(n))throw new TypeError("Not a string or buffer");var i=e._finishFlushFlag;return e._processChunk(n,i)}function Deflate(e){if(!(this instanceof Deflate))return new Deflate(e);Zlib.call(this,e,binding.DEFLATE)}function Inflate(e){if(!(this instanceof Inflate))return new Inflate(e);Zlib.call(this,e,binding.INFLATE)}function Gzip(e){if(!(this instanceof Gzip))return new Gzip(e);Zlib.call(this,e,binding.GZIP)}function Gunzip(e){if(!(this instanceof Gunzip))return new Gunzip(e);Zlib.call(this,e,binding.GUNZIP)}function DeflateRaw(e){if(!(this instanceof DeflateRaw))return new DeflateRaw(e);Zlib.call(this,e,binding.DEFLATERAW)}function InflateRaw(e){if(!(this instanceof InflateRaw))return new InflateRaw(e);Zlib.call(this,e,binding.INFLATERAW)}function Unzip(e){if(!(this instanceof Unzip))return new Unzip(e);Zlib.call(this,e,binding.UNZIP)}function isValidFlushFlag(e){return e===binding.Z_NO_FLUSH||e===binding.Z_PARTIAL_FLUSH||e===binding.Z_SYNC_FLUSH||e===binding.Z_FULL_FLUSH||e===binding.Z_FINISH||e===binding.Z_BLOCK}function Zlib(e,n){var i=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||exports.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&!isValidFlushFlag(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!isValidFlushFlag(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:binding.Z_FINISH,e.chunkSize&&(e.chunkSize<exports.Z_MIN_CHUNK||e.chunkSize>exports.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<exports.Z_MIN_WINDOWBITS||e.windowBits>exports.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<exports.Z_MIN_LEVEL||e.level>exports.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<exports.Z_MIN_MEMLEVEL||e.memLevel>exports.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=exports.Z_FILTERED&&e.strategy!=exports.Z_HUFFMAN_ONLY&&e.strategy!=exports.Z_RLE&&e.strategy!=exports.Z_FIXED&&e.strategy!=exports.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new binding.Zlib(n);var t=this;this._hadError=!1,this._handle.onerror=function(e,n){_close(t),t._hadError=!0;var i=new Error(e);i.errno=n,i.code=exports.codes[n],t.emit("error",i)};var r=exports.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(r=e.level);var s=exports.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(s=e.strategy),this._handle.init(e.windowBits||exports.Z_DEFAULT_WINDOWBITS,r,e.memLevel||exports.Z_DEFAULT_MEMLEVEL,s,e.dictionary),this._buffer=Buffer.allocUnsafe(this._chunkSize),this._offset=0,this._level=r,this._strategy=s,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!i._handle},configurable:!0,enumerable:!0})}function _close(e,n){n&&process.nextTick(n),e._handle&&(e._handle.close(),e._handle=null)}function emitCloseNT(e){e.emit("close")}Object.defineProperty(exports,"codes",{enumerable:!0,value:Object.freeze(codes),writable:!1}),exports.Deflate=Deflate,exports.Inflate=Inflate,exports.Gzip=Gzip,exports.Gunzip=Gunzip,exports.DeflateRaw=DeflateRaw,exports.InflateRaw=InflateRaw,exports.Unzip=Unzip,exports.createDeflate=function(e){return new Deflate(e)},exports.createInflate=function(e){return new Inflate(e)},exports.createDeflateRaw=function(e){return new DeflateRaw(e)},exports.createInflateRaw=function(e){return new InflateRaw(e)},exports.createGzip=function(e){return new Gzip(e)},exports.createGunzip=function(e){return new Gunzip(e)},exports.createUnzip=function(e){return new Unzip(e)},exports.deflate=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Deflate(n),e,i)},exports.deflateSync=function(e,n){return zlibBufferSync(new Deflate(n),e)},exports.gzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Gzip(n),e,i)},exports.gzipSync=function(e,n){return zlibBufferSync(new Gzip(n),e)},exports.deflateRaw=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new DeflateRaw(n),e,i)},exports.deflateRawSync=function(e,n){return zlibBufferSync(new DeflateRaw(n),e)},exports.unzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Unzip(n),e,i)},exports.unzipSync=function(e,n){return zlibBufferSync(new Unzip(n),e)},exports.inflate=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Inflate(n),e,i)},exports.inflateSync=function(e,n){return zlibBufferSync(new Inflate(n),e)},exports.gunzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Gunzip(n),e,i)},exports.gunzipSync=function(e,n){return zlibBufferSync(new Gunzip(n),e)},exports.inflateRaw=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new InflateRaw(n),e,i)},exports.inflateRawSync=function(e,n){return zlibBufferSync(new InflateRaw(n),e)},util.inherits(Zlib,Transform),Zlib.prototype.params=function(e,n,i){if(e<exports.Z_MIN_LEVEL||e>exports.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=exports.Z_FILTERED&&n!=exports.Z_HUFFMAN_ONLY&&n!=exports.Z_RLE&&n!=exports.Z_FIXED&&n!=exports.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var t=this;this.flush(binding.Z_SYNC_FLUSH,function(){assert(t._handle,"zlib binding closed"),t._handle.params(e,n),t._hadError||(t._level=e,t._strategy=n,i&&i())})}else process.nextTick(i)},Zlib.prototype.reset=function(){return assert(this._handle,"zlib binding closed"),this._handle.reset()},Zlib.prototype._flush=function(e){this._transform(Buffer.alloc(0),"",e)},Zlib.prototype.flush=function(e,n){var i=this,t=this._writableState;("function"==typeof e||void 0===e&&!n)&&(n=e,e=binding.Z_FULL_FLUSH),t.ended?n&&process.nextTick(n):t.ending?n&&this.once("end",n):t.needDrain?n&&this.once("drain",function(){return i.flush(e,n)}):(this._flushFlag=e,this.write(Buffer.alloc(0),"",n))},Zlib.prototype.close=function(e){_close(this,e),process.nextTick(emitCloseNT,this)},Zlib.prototype._transform=function(e,n,i){var t,r=this._writableState,s=(r.ending||r.ended)&&(!e||r.length===e.length);return null===e||Buffer.isBuffer(e)?this._handle?(s?t=this._finishFlushFlag:(t=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH)),void this._processChunk(e,t,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},Zlib.prototype._processChunk=function(e,n,i){var t=e&&e.length,r=this._chunkSize-this._offset,s=0,f=this,o="function"==typeof i;if(!o){var l,a=[],u=0;this.on("error",function(e){l=e}),assert(this._handle,"zlib binding closed");do{var _=this._handle.writeSync(n,e,s,t,this._buffer,this._offset,r)}while(!this._hadError&&d(_[0],_[1]));if(this._hadError)throw l;if(u>=kMaxLength)throw _close(this),new RangeError(kRangeErrorMessage);var c=Buffer.concat(a,u);return _close(this),c}assert(this._handle,"zlib binding closed");var h=this._handle.write(n,e,s,t,this._buffer,this._offset,r);function d(l,_){if(this&&(this.buffer=null,this.callback=null),!f._hadError){var c=r-_;if(assert(c>=0,"have should not go down"),c>0){var h=f._buffer.slice(f._offset,f._offset+c);f._offset+=c,o?f.push(h):(a.push(h),u+=h.length)}if((0===_||f._offset>=f._chunkSize)&&(r=f._chunkSize,f._offset=0,f._buffer=Buffer.allocUnsafe(f._chunkSize)),0===_){if(s+=t-l,t=l,!o)return!0;var b=f._handle.write(n,e,s,t,f._buffer,f._offset,f._chunkSize);return b.callback=d,void(b.buffer=e)}if(!o)return!1;i()}}h.buffer=e,h.callback=d},util.inherits(Deflate,Zlib),util.inherits(Inflate,Zlib),util.inherits(Gzip,Zlib),util.inherits(Gunzip,Zlib),util.inherits(DeflateRaw,Zlib),util.inherits(InflateRaw,Zlib),util.inherits(Unzip,Zlib);

}).call(this,require('_process'))
},{"./binding":45,"_process":144,"assert":33,"buffer":49,"stream":196,"util":228}],47:[function(require,module,exports){

},{}],48:[function(require,module,exports){
(function (global){
!function(e){var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,n="object"==typeof module&&module&&!module.nodeType&&module,t="object"==typeof global&&global;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var r,u,i=2147483647,f=36,c=1,l=26,s=38,d=700,p=72,a=128,h="-",v=/^xn--/,g=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=f-c,y=Math.floor,C=String.fromCharCode;function m(e){throw new RangeError(x[e])}function j(e,o){for(var n=e.length,t=[];n--;)t[n]=o(e[n]);return t}function A(e,o){var n=e.split("@"),t="";return n.length>1&&(t=n[0]+"@",e=n[1]),t+j((e=e.replace(w,".")).split("."),o).join(".")}function I(e){for(var o,n,t=[],r=0,u=e.length;r<u;)(o=e.charCodeAt(r++))>=55296&&o<=56319&&r<u?56320==(64512&(n=e.charCodeAt(r++)))?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--):t.push(o);return t}function E(e){return j(e,function(e){var o="";return e>65535&&(o+=C((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=C(e)}).join("")}function F(e,o){return e+22+75*(e<26)-((0!=o)<<5)}function O(e,o,n){var t=0;for(e=n?y(e/d):e>>1,e+=y(e/o);e>b*l>>1;t+=f)e=y(e/b);return y(t+(b+1)*e/(e+s))}function S(e){var o,n,t,r,u,s,d,v,g,w,x,b=[],C=e.length,j=0,A=a,I=p;for((n=e.lastIndexOf(h))<0&&(n=0),t=0;t<n;++t)e.charCodeAt(t)>=128&&m("not-basic"),b.push(e.charCodeAt(t));for(r=n>0?n+1:0;r<C;){for(u=j,s=1,d=f;r>=C&&m("invalid-input"),((v=(x=e.charCodeAt(r++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:f)>=f||v>y((i-j)/s))&&m("overflow"),j+=v*s,!(v<(g=d<=I?c:d>=I+l?l:d-I));d+=f)s>y(i/(w=f-g))&&m("overflow"),s*=w;I=O(j-u,o=b.length+1,0==u),y(j/o)>i-A&&m("overflow"),A+=y(j/o),j%=o,b.splice(j++,0,A)}return E(b)}function T(e){var o,n,t,r,u,s,d,v,g,w,x,b,j,A,E,S=[];for(b=(e=I(e)).length,o=a,n=0,u=p,s=0;s<b;++s)(x=e[s])<128&&S.push(C(x));for(t=r=S.length,r&&S.push(h);t<b;){for(d=i,s=0;s<b;++s)(x=e[s])>=o&&x<d&&(d=x);for(d-o>y((i-n)/(j=t+1))&&m("overflow"),n+=(d-o)*j,o=d,s=0;s<b;++s)if((x=e[s])<o&&++n>i&&m("overflow"),x==o){for(v=n,g=f;!(v<(w=g<=u?c:g>=u+l?l:g-u));g+=f)E=v-w,A=f-w,S.push(C(F(w+E%A,0))),v=y(E/A);S.push(C(F(v,0))),u=O(n,j,t==r),n=0,++t}++n,++o}return S.join("")}if(r={version:"1.4.1",ucs2:{decode:I,encode:E},decode:S,encode:T,toASCII:function(e){return A(e,function(e){return g.test(e)?"xn--"+T(e):e})},toUnicode:function(e){return A(e,function(e){return v.test(e)?S(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return r});else if(o&&n)if(module.exports==o)n.exports=r;else for(u in r)r.hasOwnProperty(u)&&(o[u]=r[u]);else e.punycode=r}(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],49:[function(require,module,exports){
(function (Buffer){
"use strict";var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}function createBuffer(e){if(e>K_MAX_LENGTH)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=Buffer.prototype,t}function Buffer(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,r)}function from(e,t,r){if("string"==typeof e)return fromString(e,t);if(ArrayBuffer.isView(e))return fromArrayLike(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Buffer.from(n,t,r);var f=fromObject(e);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function alloc(e,t,r){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof r?createBuffer(e).fill(t,r):createBuffer(e).fill(t):createBuffer(e)}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromString(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|byteLength(e,t),n=createBuffer(r),f=n.write(e,t);return f!==r&&(n=n.slice(0,f)),n}function fromArrayLike(e){for(var t=e.length<0?0:0|checked(e.length),r=createBuffer(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function fromArrayBuffer(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=Buffer.prototype,n}function fromObject(e){if(Buffer.isBuffer(e)){var t=0|checked(e.length),r=createBuffer(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}return void 0!==e.length?"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}function checked(e){if(e>=K_MAX_LENGTH)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var f=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(f)return n?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),f=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,f){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),numberIsNaN(r=+r)&&(r=f?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(f)return-1;r=e.length-1}else if(r<0){if(!f)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,f);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,f);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,f){var i,o=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,r/=2}function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(f){var h=-1;for(i=r;i<u;i++)if(a(e,i)===a(t,-1===h?0:i-h)){if(-1===h&&(h=i),i-h+1===s)return h*o}else-1!==h&&(i-=i-h),h=-1}else for(r+s>u&&(r=u-s),i=r;i>=0;i--){for(var c=!0,l=0;l<s;l++)if(a(e,i+l)!==a(t,l)){c=!1;break}if(c)return i}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var f=e.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=t.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(t.substr(2*o,2),16);if(numberIsNaN(u))return o;e[r+o]=u}return o}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?base64.fromByteArray(e):base64.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var n=[],f=t;f<r;){var i,o,u,s,a=e[f],h=null,c=a>239?4:a>223?3:a>191?2:1;if(f+c<=r)switch(c){case 1:a<128&&(h=a);break;case 2:128==(192&(i=e[f+1]))&&(s=(31&a)<<6|63&i)>127&&(h=s);break;case 3:i=e[f+1],o=e[f+2],128==(192&i)&&128==(192&o)&&(s=(15&a)<<12|(63&i)<<6|63&o)>2047&&(s<55296||s>57343)&&(h=s);break;case 4:i=e[f+1],o=e[f+2],u=e[f+3],128==(192&i)&&128==(192&o)&&128==(192&u)&&(s=(15&a)<<18|(63&i)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(h=s)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),f+=c}return decodeCodePointsArray(n)}exports.kMaxLength=K_MAX_LENGTH,Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(e,t,r){return from(e,t,r)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(e,t,r){return alloc(e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,f=0,i=Math.min(r,n);f<i;++f)if(e[f]!==t[f]){r=e[f],n=t[f];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer.allocUnsafe(t),f=0;for(r=0;r<e.length;++r){var i=e[r];if(isInstance(i,Uint8Array)&&(i=Buffer.from(i)),!Buffer.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",t=exports.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,t,r,n,f){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===f&&(f=this.length),t<0||r>e.length||n<0||f>this.length)throw new RangeError("out of range index");if(n>=f&&t>=r)return 0;if(n>=f)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(f>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),u=Math.min(i,o),s=this.slice(n,f),a=e.slice(t,r),h=0;h<u;++h)if(s[h]!==a[h]){i=s[h],o=a[h];break}return i<o?-1:o<i?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var f=t;f<r;++f)n+=String.fromCharCode(127&e[f]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var f=t;f<r;++f)n+=String.fromCharCode(e[f]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=t;i<r;++i)f+=toHex(e[i]);return f}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,f,i){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>f||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function checkIEEE754(e,t,r,n,f,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,f){return t=+t,r>>>=0,f||checkIEEE754(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,f){return t=+t,r>>>=0,f||checkIEEE754(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=Buffer.prototype,n},Buffer.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],f=1,i=0;++i<t&&(f*=256);)n+=this[e+i]*f;return n},Buffer.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],f=1;t>0&&(f*=256);)n+=this[e+--t]*f;return n},Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=this[e],f=1,i=0;++i<t&&(f*=256);)n+=this[e+i]*f;return n>=(f*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||checkOffset(e,t,this.length);for(var n=t,f=1,i=this[e+--n];n>0&&(f*=256);)i+=this[e+--n]*f;return i>=(f*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),ieee754.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),ieee754.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),ieee754.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),ieee754.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var f=1,i=0;for(this[t]=255&e;++i<r&&(f*=256);)this[t+i]=e/f&255;return t+r},Buffer.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var f=r-1,i=1;for(this[t+f]=255&e;--f>=0&&(i*=256);)this[t+f]=e/i&255;return t+r},Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,e,t,r,f-1,-f)}var i=0,o=1,u=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,e,t,r,f-1,-f)}var i=r-1,o=1,u=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var f=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=f-1;i>=0;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return f},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var f=e.charCodeAt(0);("utf8"===n&&f<128||"latin1"===n)&&(e=f)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=Buffer.isBuffer(e)?e:Buffer.from(e,n),u=o.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%u]}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(e){if((e=(e=e.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var n=e.length,f=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(t-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,f,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(e){return base64.toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var f=0;f<n&&!(f+r>=t.length||f>=e.length);++f)t[f+r]=e[f];return f}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}

}).call(this,require("buffer").Buffer)
},{"base64-js":43,"buffer":49,"ieee754":92}],50:[function(require,module,exports){
module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};

},{}],51:[function(require,module,exports){
(function (Buffer){
function isArray(r){return Array.isArray?Array.isArray(r):"[object Array]"===objectToString(r)}function isBoolean(r){return"boolean"==typeof r}function isNull(r){return null===r}function isNullOrUndefined(r){return null==r}function isNumber(r){return"number"==typeof r}function isString(r){return"string"==typeof r}function isSymbol(r){return"symbol"==typeof r}function isUndefined(r){return void 0===r}function isRegExp(r){return"[object RegExp]"===objectToString(r)}function isObject(r){return"object"==typeof r&&null!==r}function isDate(r){return"[object Date]"===objectToString(r)}function isError(r){return"[object Error]"===objectToString(r)||r instanceof Error}function isFunction(r){return"function"==typeof r}function isPrimitive(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function objectToString(r){return Object.prototype.toString.call(r)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer;

}).call(this,{"isBuffer":require("../../is-buffer/index.js")})
},{"../../is-buffer/index.js":94}],52:[function(require,module,exports){
"use strict";var keys=require("object-keys"),hasSymbols="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),toStr=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction=function(e){return"function"==typeof e&&"[object Function]"===toStr.call(e)},arePropertyDescriptorsSupported=function(){var e={};try{for(var r in origDefineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}},supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported(),defineProperty=function(e,r,t,o){(!(r in e)||isFunction(o)&&o())&&(supportsDescriptors?origDefineProperty(e,r,{configurable:!0,enumerable:!1,value:t,writable:!0}):e[r]=t)},defineProperties=function(e,r){var t=arguments.length>2?arguments[2]:{},o=keys(r);hasSymbols&&(o=concat.call(o,Object.getOwnPropertySymbols(r)));for(var n=0;n<o.length;n+=1)defineProperty(e,o[n],r[o[n]],t[o[n]])};defineProperties.supportsDescriptors=!!supportsDescriptors,module.exports=defineProperties;

},{"object-keys":54}],53:[function(require,module,exports){
"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=require("./isArguments"),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(t){var o=t.constructor;return o&&o.prototype===t},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!excludedKeys["$"+t]&&has.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{equalsConstructorPrototype(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(t){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(t);try{return equalsConstructorPrototype(t)}catch(t){return!1}};keysShim=function(t){var o=null!==t&&"object"==typeof t,r="[object Function]"===toStr.call(t),e=isArgs(t),n=o&&"[object String]"===toStr.call(t),u=[];if(!o&&!r&&!e)throw new TypeError("Object.keys called on a non-object");var s=hasProtoEnumBug&&r;if(n&&t.length>0&&!has.call(t,0))for(var a=0;a<t.length;++a)u.push(String(a));if(e&&t.length>0)for(var l=0;l<t.length;++l)u.push(String(l));else for(var i in t)s&&"prototype"===i||!has.call(t,i)||u.push(String(i));if(hasDontEnumBug)for(var c=equalsConstructorPrototypeIfNotBuggy(t),p=0;p<dontEnums.length;++p)c&&"constructor"===dontEnums[p]||!has.call(t,dontEnums[p])||u.push(dontEnums[p]);return u}}module.exports=keysShim;

},{"./isArguments":55}],54:[function(require,module,exports){
"use strict";var slice=Array.prototype.slice,isArgs=require("./isArguments"),origKeys=Object.keys,keysShim=origKeys?function(e){return origKeys(e)}:require("./implementation"),originalKeys=Object.keys;keysShim.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return isArgs(e)?originalKeys(slice.call(e)):originalKeys(e)}):Object.keys=keysShim;return Object.keys||keysShim},module.exports=keysShim;

},{"./implementation":53,"./isArguments":55}],55:[function(require,module,exports){
"use strict";var toStr=Object.prototype.toString;module.exports=function(t){var e=toStr.call(t),o="[object Arguments]"===e;return o||(o="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===toStr.call(t.callee)),o};

},{}],56:[function(require,module,exports){
"use strict";const Util=require("util");var Template=require("lodash.template");function eraro(e){var r=!1===(e=e||{}).prefix?"":"string"==typeof e.prefix?e.prefix:"string"==typeof e.package?e.package+": ":"",a=e.package||"unknown",t=e.module||module,s=e.msgmap||{},n=null==e.inspect||!!e.inspect,i=[module.filename],o=t.filename;o&&i.push(o);var l=function(t,o,l,g){if(Util.isError(t)){if(t.eraro&&!e.override)return t}else t=null,o=arguments[0],l=arguments[1],g=arguments[2];o="string"==typeof o?o:t?t.code?t.code:t.message?t.message:"unknown":"unknown",g="object"==typeof g?g:"object"==typeof l&&"string"!=typeof l?l:{},t&&(g.errmsg=t.message,g.errline=callpoint(t,i)),l=buildmessage(e,l="string"==typeof l?l:null,s,r,n,o,g,t);var m=new Error(l);if(t)for(var p in g.orig$=null==g.orig$?t:g.orig$,g.message$=null==g.message$?t.message:g.message$,t)m[p]=t[p];return m.eraro=!0,m.orig=t,m.code=o,m[a]=!0,m.package=a,m.msg=l,m.details=g,m.stack=t?t.stack:m.stack,m.callpoint=g.errline||callpoint(m,i),m};return l.callpoint=callpoint,l.has=function(e){return!!s[e]},l}function callpoint(e,r){r=Array.isArray(r)?r:[];var a=e?e.stack:null,t="";if(a){var s,n=a.split("\n");e:for(s=1;s<n.length;s++){for(var i=n[s],o=!1,l=0;l<r.length&&("string"!=typeof r[l]||!(o=-1!=i.indexOf(r[l])));l++);if(!o)break e}t="string"==typeof n[s]?n[s].substring(4):t}return t}function buildmessage(options,msg,msgmap,msgprefix,inspect,code,details,ex){var message=msgprefix+("string"==typeof msg?msg:"string"==typeof msgmap[code]?msgmap[code]:ex?originalmsg(options.override,ex):code),valmap=Object.assign({},details,{code:code}),valstrmap={util:Util};Object.entries(valmap).forEach(function(entry){var key=entry[0],val=entry[1];try{eval("var "+key+";")}catch(e){key+="$"}({undefined:1,NaN:1})[key]&&(key+="$"),valstrmap[key]=inspect&&"string"!=typeof val?Util.inspect(val):val});for(var done=!1;!done;)try{var tm=Template(message);message=tm(valstrmap),done=!0}catch(e){if(e instanceof ReferenceError){var m=/ReferenceError:\s+(.*?)\s+/.exec(e.toString());m&&m[1]?valstrmap[m[1]]="["+m[1]+"?]":done=!0}else done=!0,message=message+" VALUES:"+Util.inspect(valmap,{depth:2})+" TEMPLATE ERROR: "+e}return message}function originalmsg(e,r){if(r)return e&&r.eraro&&r.orig?r.orig.message:r.message}module.exports=eraro;

},{"lodash.template":109,"util":228}],57:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$TypeError=GetIntrinsic("%TypeError%"),DefineOwnProperty=require("../helpers/DefineOwnProperty"),FromPropertyDescriptor=require("./FromPropertyDescriptor"),OrdinaryGetOwnProperty=require("./OrdinaryGetOwnProperty"),IsDataDescriptor=require("./IsDataDescriptor"),IsExtensible=require("./IsExtensible"),IsPropertyKey=require("./IsPropertyKey"),SameValue=require("./SameValue"),Type=require("./Type");module.exports=function(r,e,t){if("Object"!==Type(r))throw new $TypeError("Assertion failed: Type(O) is not Object");if(!IsPropertyKey(e))throw new $TypeError("Assertion failed: IsPropertyKey(P) is not true");var i=OrdinaryGetOwnProperty(r,e),o=!i||IsExtensible(r);return!(i&&(!i["[[Writable]]"]||!i["[[Configurable]]"])||!o)&&DefineOwnProperty(IsDataDescriptor,SameValue,FromPropertyDescriptor,r,e,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":t,"[[Writable]]":!0})};

},{"../GetIntrinsic":74,"../helpers/DefineOwnProperty":75,"./FromPropertyDescriptor":58,"./IsDataDescriptor":61,"./IsExtensible":62,"./IsPropertyKey":63,"./OrdinaryGetOwnProperty":65,"./SameValue":67,"./Type":71}],58:[function(require,module,exports){
"use strict";var assertRecord=require("../helpers/assertRecord"),Type=require("./Type");module.exports=function(e){if(void 0===e)return e;assertRecord(Type,"Property Descriptor","Desc",e);var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=e["[[Configurable]]"]),r};

},{"../helpers/assertRecord":76,"./Type":71}],59:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$Array=GetIntrinsic("%Array%"),toStr=!$Array.isArray&&require("../helpers/callBound")("Object.prototype.toString");module.exports=$Array.isArray||function(r){return"[object Array]"===toStr(r)};

},{"../GetIntrinsic":74,"../helpers/callBound":78}],60:[function(require,module,exports){
"use strict";module.exports=require("is-callable");

},{"is-callable":95}],61:[function(require,module,exports){
"use strict";var has=require("has"),assertRecord=require("../helpers/assertRecord"),Type=require("./Type");module.exports=function(e){return void 0!==e&&(assertRecord(Type,"Property Descriptor","Desc",e),!(!has(e,"[[Value]]")&&!has(e,"[[Writable]]")))};

},{"../helpers/assertRecord":76,"./Type":71,"has":90}],62:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$Object=GetIntrinsic("%Object%"),isPrimitive=require("../helpers/isPrimitive"),$preventExtensions=$Object.preventExtensions,$isExtensible=$Object.isExtensible;module.exports=$preventExtensions?function(e){return!isPrimitive(e)&&$isExtensible(e)}:function(e){return!isPrimitive(e)};

},{"../GetIntrinsic":74,"../helpers/isPrimitive":81}],63:[function(require,module,exports){
"use strict";module.exports=function(t){return"string"==typeof t||"symbol"==typeof t};

},{}],64:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$match=GetIntrinsic("%Symbol.match%",!0),hasRegExpMatcher=require("is-regex"),ToBoolean=require("./ToBoolean");module.exports=function(e){if(!e||"object"!=typeof e)return!1;if($match){var r=e[$match];if(void 0!==r)return ToBoolean(r)}return hasRegExpMatcher(e)};

},{"../GetIntrinsic":74,"./ToBoolean":68,"is-regex":96}],65:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$gOPD=require("../helpers/getOwnPropertyDescriptor"),$TypeError=GetIntrinsic("%TypeError%"),callBound=require("../helpers/callBound"),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable"),has=require("has"),IsArray=require("./IsArray"),IsPropertyKey=require("./IsPropertyKey"),IsRegExp=require("./IsRegExp"),ToPropertyDescriptor=require("./ToPropertyDescriptor"),Type=require("./Type");module.exports=function(r,e){if("Object"!==Type(r))throw new $TypeError("Assertion failed: O must be an Object");if(!IsPropertyKey(e))throw new $TypeError("Assertion failed: P must be a Property Key");if(has(r,e)){if(!$gOPD){var t=IsArray(r)&&"length"===e,s=IsRegExp(r)&&"lastIndex"===e;return{"[[Configurable]]":!(t||s),"[[Enumerable]]":$isEnumerable(r,e),"[[Value]]":r[e],"[[Writable]]":!0}}return ToPropertyDescriptor($gOPD(r,e))}};

},{"../GetIntrinsic":74,"../helpers/callBound":78,"../helpers/getOwnPropertyDescriptor":79,"./IsArray":59,"./IsPropertyKey":63,"./IsRegExp":64,"./ToPropertyDescriptor":70,"./Type":71,"has":90}],66:[function(require,module,exports){
"use strict";module.exports=require("../5/CheckObjectCoercible");

},{"../5/CheckObjectCoercible":72}],67:[function(require,module,exports){
"use strict";var $isNaN=require("../helpers/isNaN");module.exports=function(e,r){return e===r?0!==e||1/e==1/r:$isNaN(e)&&$isNaN(r)};

},{"../helpers/isNaN":80}],68:[function(require,module,exports){
"use strict";module.exports=function(t){return!!t};

},{}],69:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$Object=GetIntrinsic("%Object%"),RequireObjectCoercible=require("./RequireObjectCoercible");module.exports=function(e){return RequireObjectCoercible(e),$Object(e)};

},{"../GetIntrinsic":74,"./RequireObjectCoercible":66}],70:[function(require,module,exports){
"use strict";var has=require("has"),GetIntrinsic=require("../GetIntrinsic"),$TypeError=GetIntrinsic("%TypeError%"),Type=require("./Type"),ToBoolean=require("./ToBoolean"),IsCallable=require("./IsCallable");module.exports=function(e){if("Object"!==Type(e))throw new $TypeError("ToPropertyDescriptor requires an object");var r={};if(has(e,"enumerable")&&(r["[[Enumerable]]"]=ToBoolean(e.enumerable)),has(e,"configurable")&&(r["[[Configurable]]"]=ToBoolean(e.configurable)),has(e,"value")&&(r["[[Value]]"]=e.value),has(e,"writable")&&(r["[[Writable]]"]=ToBoolean(e.writable)),has(e,"get")){var a=e.get;if(void 0!==a&&!IsCallable(a))throw new TypeError("getter must be a function");r["[[Get]]"]=a}if(has(e,"set")){var t=e.set;if(void 0!==t&&!IsCallable(t))throw new $TypeError("setter must be a function");r["[[Set]]"]=t}if((has(r,"[[Get]]")||has(r,"[[Set]]"))&&(has(r,"[[Value]]")||has(r,"[[Writable]]")))throw new $TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r};

},{"../GetIntrinsic":74,"./IsCallable":60,"./ToBoolean":68,"./Type":71,"has":90}],71:[function(require,module,exports){
"use strict";var ES5Type=require("../5/Type");module.exports=function(e){return"symbol"==typeof e?"Symbol":ES5Type(e)};

},{"../5/Type":73}],72:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$TypeError=GetIntrinsic("%TypeError%");module.exports=function(r,e){if(null==r)throw new $TypeError(e||"Cannot call method on "+r);return r};

},{"../GetIntrinsic":74}],73:[function(require,module,exports){
"use strict";module.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0};

},{}],74:[function(require,module,exports){
"use strict";var undefined,$TypeError=TypeError,$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var generator,asyncFn,asyncGen,throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch(e){try{return $gOPD(arguments,"callee").get}catch(e){return throwTypeError}}}():throwTypeError,hasSymbols=require("has-symbols")(),getProto=Object.getPrototypeOf||function(e){return e.__proto__},generatorFunction=generator?getProto(generator):undefined,asyncFunction=asyncFn?asyncFn.constructor:undefined,asyncGenFunction=asyncGen?getProto(asyncGen):undefined,asyncGenIterator=asyncGen?asyncGen():undefined,TypedArray="undefined"==typeof Uint8Array?undefined:getProto(Uint8Array),INTRINSICS={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":asyncFunction,"%AsyncFunctionPrototype%":asyncFunction?asyncFunction.prototype:undefined,"%AsyncGenerator%":asyncGen?getProto(asyncGenIterator):undefined,"%AsyncGeneratorFunction%":asyncGenFunction,"%AsyncGeneratorPrototype%":asyncGenFunction?asyncGenFunction.prototype:undefined,"%AsyncIteratorPrototype%":asyncGenIterator&&hasSymbols&&Symbol.asyncIterator?asyncGenIterator[Symbol.asyncIterator]():undefined,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?undefined:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?undefined:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?undefined:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":generator?getProto(generator()):undefined,"%GeneratorFunction%":generatorFunction,"%GeneratorPrototype%":generatorFunction?generatorFunction.prototype:undefined,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?undefined:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?undefined:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?undefined:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%JSONParse%":"object"==typeof JSON?JSON.parse:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):undefined,"%MapPrototype%":"undefined"==typeof Map?undefined:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%PromisePrototype%":"undefined"==typeof Promise?undefined:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?undefined:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?undefined:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?undefined:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?undefined:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):undefined,"%SetPrototype%":"undefined"==typeof Set?undefined:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%StringPrototype%":String.prototype,"%Symbol%":hasSymbols?Symbol:undefined,"%SymbolPrototype%":hasSymbols?Symbol.prototype:undefined,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypedArrayPrototype%":TypedArray?TypedArray.prototype:undefined,"%TypeError%":$TypeError,"%TypeErrorPrototype%":$TypeError.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?undefined:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?undefined:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?undefined:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?undefined:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?undefined:WeakSet.prototype},bind=require("function-bind"),$replace=bind.call(Function.call,String.prototype.replace),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var r=[];return $replace(e,rePropName,function(e,t,o,n){r[r.length]=o?$replace(n,reEscapeChar,"$1"):t||e}),r},getBaseIntrinsic=function(e,r){if(!(e in INTRINSICS))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===INTRINSICS[e]&&!r)throw new $TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return INTRINSICS[e]};module.exports=function(e,r){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof r)throw new TypeError('"allowMissing" argument must be a boolean');for(var t=stringToPath(e),o=getBaseIntrinsic("%"+(t.length>0?t[0]:"")+"%",r),n=1;n<t.length;n+=1)if(null!=o)if($gOPD&&n+1>=t.length){var y=$gOPD(o,t[n]);if(!(r||t[n]in o))throw new $TypeError("base intrinsic for "+e+" exists, but the property is not available.");o=y?y.get||y.value:o[t[n]]}else o=o[t[n]];return o};

},{"function-bind":85,"has-symbols":88}],75:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0);if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}var callBound=require("../helpers/callBound"),$isEnumerable=callBound("Object.prototype.propertyIsEnumerable");module.exports=function(e,r,n,t,i,u){if(!$defineProperty){if(!e(u))return!1;if(!u["[[Configurable]]"]||!u["[[Writable]]"])return!1;if(i in t&&$isEnumerable(t,i)!==!!u["[[Enumerable]]"])return!1;var l=u["[[Value]]"];return t[i]=l,r(t[i],l)}return $defineProperty(t,i,n(u)),!0};

},{"../GetIntrinsic":74,"../helpers/callBound":78}],76:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$TypeError=GetIntrinsic("%TypeError%"),$SyntaxError=GetIntrinsic("%SyntaxError%"),has=require("has"),predicates={"Property Descriptor":function(r,e){if("Object"!==r(e))return!1;var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in e)if(has(e,n)&&!t[n])return!1;var o=has(e,"[[Value]]"),a=has(e,"[[Get]]")||has(e,"[[Set]]");if(o&&a)throw new $TypeError("Property Descriptors may not be both accessor and data descriptors");return!0}};module.exports=function(r,e,t,n){var o=predicates[e];if("function"!=typeof o)throw new $SyntaxError("unknown record type: "+e);if(!o(r,n))throw new $TypeError(t+" must be a "+e)};

},{"../GetIntrinsic":74,"has":90}],77:[function(require,module,exports){
"use strict";var bind=require("function-bind"),GetIntrinsic=require("../GetIntrinsic"),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply);module.exports=function(){return $reflectApply(bind,$call,arguments)},module.exports.apply=function(){return $reflectApply(bind,$apply,arguments)};

},{"../GetIntrinsic":74,"function-bind":85}],78:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),callBind=require("./callBind"),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function(i,n){var t=GetIntrinsic(i,!!n);return"function"==typeof t&&$indexOf(i,".prototype.")?callBind(t):t};

},{"../GetIntrinsic":74,"./callBind":77}],79:[function(require,module,exports){
"use strict";var GetIntrinsic=require("../GetIntrinsic"),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%");if($gOPD)try{$gOPD([],"length")}catch(t){$gOPD=null}module.exports=$gOPD;

},{"../GetIntrinsic":74}],80:[function(require,module,exports){
"use strict";module.exports=Number.isNaN||function(e){return e!=e};

},{}],81:[function(require,module,exports){
"use strict";module.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t};

},{}],82:[function(require,module,exports){
var objectCreate=Object.create||objectCreatePolyfill,objectKeys=Object.keys||objectKeysPolyfill,bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var hasDefineProperty,defaultMaxListeners=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(e){hasDefineProperty=!1}function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function emitNone(e,t,n){if(t)e.call(n);else for(var r=e.length,i=arrayClone(e,r),s=0;s<r;++s)i[s].call(n)}function emitOne(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].call(n,r)}function emitTwo(e,t,n,r,i){if(t)e.call(n,r,i);else for(var s=e.length,o=arrayClone(e,s),a=0;a<s;++a)o[a].call(n,r,i)}function emitThree(e,t,n,r,i,s){if(t)e.call(n,r,i,s);else for(var o=e.length,a=arrayClone(e,o),l=0;l<o;++l)a[l].call(n,r,i,s)}function emitMany(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,s=arrayClone(e,i),o=0;o<i;++o)s[o].apply(n,r)}function _addListener(e,t,n,r){var i,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]):(s=e._events=objectCreate(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=$getMaxListeners(e))&&i>0&&o.length>i){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else o=s[t]=n,++e._eventsCount;return e}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=bind.call(onceWrapper,r);return i.listener=n,r.wrapFn=i,i}function _listeners(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?unwrapListeners(i):arrayClone(i,i.length):[]}function listenerCount(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function spliceOne(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function arrayClone(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function unwrapListeners(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function objectCreatePolyfill(e){var t=function(){};return t.prototype=e,new t}function objectKeysPolyfill(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n}function functionBindPolyfill(e){var t=this;return function(){return t.apply(e,arguments)}}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=e}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(e){var t,n,r,i,s,o,a="error"===e;if(o=this._events)a=a&&null==o.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:emitNone(n,u,this);break;case 2:emitOne(n,u,this,arguments[1]);break;case 3:emitTwo(n,u,this,arguments[1],arguments[2]);break;case 4:emitThree(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),s=1;s<r;s++)i[s-1]=arguments[s];emitMany(n,u,this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=objectCreate(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():spliceOne(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=objectCreate(null):delete n[e]),this;if(0===arguments.length){var i,s=objectKeys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};

},{}],83:[function(require,module,exports){
module.exports=stringify,stringify.default=stringify,stringify.stable=deterministicStringify,stringify.stableStringify=deterministicStringify;var arr=[],replacerStack=[];function stringify(r,e,t){var i;for(decirc(r,"",[],void 0),i=0===replacerStack.length?JSON.stringify(r,e,t):JSON.stringify(r,replaceGetterValues(e),t);0!==arr.length;){var c=arr.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}return i}function decirc(r,e,t,i){var c;if("object"==typeof r&&null!==r){for(c=0;c<t.length;c++)if(t[c]===r){var n=Object.getOwnPropertyDescriptor(i,e);return void(void 0!==n.get?n.configurable?(Object.defineProperty(i,e,{value:"[Circular]"}),arr.push([i,e,r,n])):replacerStack.push([r,e]):(i[e]="[Circular]",arr.push([i,e,r])))}if(t.push(r),Array.isArray(r))for(c=0;c<r.length;c++)decirc(r[c],c,t,r);else{var a=Object.keys(r);for(c=0;c<a.length;c++){var o=a[c];decirc(r[o],o,t,r)}}t.pop()}}function compareFunction(r,e){return r<e?-1:r>e?1:0}function deterministicStringify(r,e,t){var i,c=deterministicDecirc(r,"",[],void 0)||r;for(i=0===replacerStack.length?JSON.stringify(c,e,t):JSON.stringify(c,replaceGetterValues(e),t);0!==arr.length;){var n=arr.pop();4===n.length?Object.defineProperty(n[0],n[1],n[3]):n[0][n[1]]=n[2]}return i}function deterministicDecirc(r,e,t,i){var c;if("object"==typeof r&&null!==r){for(c=0;c<t.length;c++)if(t[c]===r){var n=Object.getOwnPropertyDescriptor(i,e);return void(void 0!==n.get?n.configurable?(Object.defineProperty(i,e,{value:"[Circular]"}),arr.push([i,e,r,n])):replacerStack.push([r,e]):(i[e]="[Circular]",arr.push([i,e,r])))}if("function"==typeof r.toJSON)return;if(t.push(r),Array.isArray(r))for(c=0;c<r.length;c++)deterministicDecirc(r[c],c,t,r);else{var a={},o=Object.keys(r).sort(compareFunction);for(c=0;c<o.length;c++){var f=o[c];deterministicDecirc(r[f],f,t,r),a[f]=r[f]}if(void 0===i)return a;arr.push([i,e,r]),i[e]=a}t.pop()}}function replaceGetterValues(r){return r=void 0!==r?r:function(r,e){return e},function(e,t){if(replacerStack.length>0)for(var i=0;i<replacerStack.length;i++){var c=replacerStack[i];if(c[1]===e&&c[0]===t){t="[Circular]",replacerStack.splice(i,1);break}}return r.call(this,e,t)}}

},{}],84:[function(require,module,exports){
"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString,funcType="[object Function]";module.exports=function(t){var n=this;if("function"!=typeof n||toStr.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var o,e=slice.call(arguments,1),r=Math.max(0,n.length-e.length),c=[],i=0;i<r;i++)c.push("$"+i);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var r=n.apply(this,e.concat(slice.call(arguments)));return Object(r)===r?r:this}return n.apply(t,e.concat(slice.call(arguments)))}),n.prototype){var p=function(){};p.prototype=n.prototype,o.prototype=new p,p.prototype=null}return o};

},{}],85:[function(require,module,exports){
"use strict";var implementation=require("./implementation");module.exports=Function.prototype.bind||implementation;

},{"./implementation":84}],86:[function(require,module,exports){
(function (setImmediate){
"use strict";var Assert=require("assert");function make_GateExecutor(t){return(t=t||{}).interval=null==t.interval?111:t.interval,t.timeout=null==t.timeout?2222:t.timeout,Assert("object"==typeof t),Assert("number"==typeof t.interval),Assert("number"==typeof t.timeout),Assert(0<t.interval),Assert(0<t.timeout),new GateExecutor(t,0)}function GateExecutor(t,e){var n=this;Assert("object"==typeof t),Assert("number"==typeof e),n.id=++e,n.options=t;var r=[],o={lookup:{},history:[]},i=[],s={work_counter:0,gate:!1,running:!1,clear:null,firstclear:null,tm_in:null};function l(){if(s.running){n.isclear()||s.tm_in||(s.tm_in=setInterval(a,t.interval));do{var e=!1,l=null;s.gate||(l=r.shift()),l&&(Assert("object"==typeof l),Assert("string"==typeof l.id),Assert("function"==typeof l.fn),o.lookup[l.id]=l,o.history.push(l),s.gate=l.gate,l.start=Date.now(),l.callback=u(l),i.push(l),l.fn(l.callback),e=!0)}while(e)}}function u(t){return function(){if(!t.done){for(t.done=!0,delete o.lookup[t.id];o.history[0]&&o.history[0].done;)o.history.shift();for(;i[0]&&i[0].done;)i.shift();if(t.gate&&(s.gate=!1),0===r.length&&0===o.history.length){if(clearInterval(s.tm_in),s.tm_in=null,s.firstclear){var e=s.firstclear;s.firstclear=null,e()}s.clear&&s.clear()}setImmediate(l)}}}function a(){for(var t=Date.now(),e=null,n=0;n<i.length;++n)!(e=i[n]).gate&&!e.done&&e.tm<t-e.start&&(e.ontm&&e.ontm(e.tm,e.start,t),e.callback())}n.start=function(t){return Assert(null==t||"function"==typeof t),setImmediate(function(){s.running=!0,t&&(s.firstclear=t),l()}),n},n.pause=function(){s.running=!1},n.clear=function(t){return Assert("function"==typeof t),s.clear=t,n},n.isclear=function(){return 0===r.length&&0===o.history.length},n.add=function(e){return Assert("object"==typeof e),Assert("function"==typeof e.fn),Assert(null==e.id||"string"==typeof e.id),Assert(null==e.tm||"number"==typeof e.tm),Assert(null==e.dn||"string"==typeof e.dn),s.work_counter+=1,e.id=e.id||""+s.work_counter,e.ge=n.id,e.tm=null==e.tm?t.timeout:e.tm,e.dn=e.dn||e.fn.name||""+Date.now(),e.ctxt={},r.push(e),s.running&&setImmediate(l),n},n.gate=function(){var r=new GateExecutor(t,e);return n.add({gate:r,fn:function(t){r.start(t)}}),r},n.state=function(){for(var t=[],e=0;e<o.history.length;++e){var n=o.history[e];n.done||t.push({s:"a",ge:n.ge,dn:n.dn,id:n.id})}for(var i=0;i<r.length;++i){var s=r[i];s.gate?t.push(s.gate.state()):t.push({s:"w",ge:s.ge,dn:s.dn,id:s.id})}return t.internal={qlen:r.length,hlen:o.history.length,klen:Object.keys(o.lookup).length,tlen:a.length},t}}module.exports=make_GateExecutor;

}).call(this,require("timers").setImmediate)
},{"assert":33,"timers":218}],87:[function(require,module,exports){
(function(){"use strict";var e=this,r=e.gex;function n(n){var t=this;function o(e){return null==e||null==e||Number.isNaN(e)}function u(e){var r=""+e;return o(e)&&(r=""),r}function c(e){e=""+e;for(var r=!1,n=Object.keys(s),t=0;t<n.length&&!r;t++)r=!!s[n[t]].exec(e);return r}t.noConflict=function(){return e.gex=r,t},t.on=function(e){var r=typeof e;if("string"===r||"number"===r||"boolean"===r||e instanceof Date||e instanceof RegExp)return c(e)?e:null;if(Array.isArray(e)){for(var n=[],t=0;t<e.length;t++)!o(e[t])&&c(e[t])&&n.push(e[t]);return n}if("object"===r){var u={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&c(i)&&(u[i]=e[i]);return u}return null},t.esc=function(e){var r=u(e);return r=(r=r.replace(/\*/g,"**")).replace(/\?/g,"*?")},t.re=function(e){if(""===e||e)return e="^"+(e=(e=(e=(e=(e=t.escregexp(e)).replace(/\\\*/g,"[\\s\\S]*")).replace(/\\\?/g,"[\\s\\S]")).replace(/\[\\s\\S\]\*\[\\s\\S\]\*/g,"\\*")).replace(/\[\\s\\S\]\*\[\\s\\S\]/g,"\\?"))+"$",new RegExp(e);var r=Object.keys(s);return 1==r.length?s[r[0]]:{...s}},t.escregexp=function(e){return e?(""+e).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},t.toString=function(){return i||(i="gex["+Object.keys(s)+"]")},t.inspect=function(){return t.toString()};var i,a=Array.isArray(n)?n:[n],s={};a.forEach(function(e){e=u(e);var r=t.re(e);s[e]=r})}function t(e){return new n(e)}t.Gex=n,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.gex=t):e.gex=t}).call(this);

},{}],88:[function(require,module,exports){
(function (global){
"use strict";var origSymbol=global.Symbol,hasSymbolSham=require("./shams");module.exports=function(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./shams":89}],89:[function(require,module,exports){
"use strict";module.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0};

},{}],90:[function(require,module,exports){
"use strict";var bind=require("function-bind");module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty);

},{"function-bind":85}],91:[function(require,module,exports){
var http=require("http"),url=require("url"),https=module.exports;for(var key in http)http.hasOwnProperty(key)&&(https[key]=http[key]);function validateParams(t){if("string"==typeof t&&(t=url.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}https.request=function(t,r){return t=validateParams(t),http.request.call(this,t,r)},https.get=function(t,r){return t=validateParams(t),http.get.call(this,t,r)};

},{"http":197,"url":219}],92:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],93:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};

},{}],94:[function(require,module,exports){
function isBuffer(f){return!!f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)}function isSlowBuffer(f){return"function"==typeof f.readFloatLE&&"function"==typeof f.slice&&isBuffer(f.slice(0,0))}module.exports=function(f){return null!=f&&(isBuffer(f)||isSlowBuffer(f)||!!f._isBuffer)};

},{}],95:[function(require,module,exports){
"use strict";var badArrayLike,isCallableMarker,fnToStr=Function.prototype.toString,reflectApply="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof reflectApply&&"function"==typeof Object.defineProperty)try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={}}catch(t){reflectApply=null}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(t){try{var e=fnToStr.call(t);return constructorRegex.test(e)}catch(t){return!1}},tryFunctionObject=function(t){try{return!isES6ClassFn(t)&&(fnToStr.call(t),!0)}catch(t){return!1}},toStr=Object.prototype.toString,fnClass="[object Function]",genClass="[object GeneratorFunction]",hasToStringTag="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;module.exports=reflectApply?function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;try{reflectApply(t,null,badArrayLike)}catch(t){if(t!==isCallableMarker)return!1}return!isES6ClassFn(t)}:function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(hasToStringTag)return tryFunctionObject(t);if(isES6ClassFn(t))return!1;var e=toStr.call(t);return e===fnClass||e===genClass};

},{}],96:[function(require,module,exports){
"use strict";var regexExec,isRegexMarker,badStringifier,hasSymbols=require("has-symbols")(),hasToStringTag=hasSymbols&&"symbol"==typeof Symbol.toStringTag;if(hasToStringTag){regexExec=Function.call.bind(RegExp.prototype.exec),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var toStr=Object.prototype.toString,regexClass="[object RegExp]";module.exports=hasToStringTag?function(e){if(!e||"object"!=typeof e)return!1;try{regexExec(e,badStringifier)}catch(e){return e===isRegexMarker}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&toStr.call(e)===regexClass};

},{"has-symbols":88}],97:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],98:[function(require,module,exports){
function stringify(i,r,e,n){return JSON.stringify(i,serializer(r,n),e)}function serializer(i,r){var e=[],n=[];return null==r&&(r=function(i,r){return e[0]===r?"[Circular ~]":"[Circular ~."+n.slice(0,e.indexOf(r)).join(".")+"]"}),function(l,s){if(e.length>0){var t=e.indexOf(this);~t?e.splice(t+1):e.push(this),~t?n.splice(t,1/0,l):n.push(l),~e.indexOf(s)&&(s=r.call(this,l,s))}else e.push(s);return null==i?s:i.call(this,l,s)}}exports=module.exports=stringify,exports.getSerialize=serializer;

},{}],99:[function(require,module,exports){
"use strict";(function(){var t=this,r=t.jsonic,e=t.jsonic=function(t){return"[object String]"!==Object.prototype.toString.call(t)?Object.prototype.toString.call(t).match(/\[object (Object|Array)\]/)?t:""+t:("{"!=(t=t.trim())[0]&&"["!=t[0]&&(t="{"+t+"}"),n.parse(t))};e.noConflict=function(){return t.jsonic=r,e};var n=function(){function t(t,r,e,n,i,u){this.message=t,this.expected=r,this.found=e,this.offset=n,this.line=i,this.column=u,this.name="SyntaxError"}return function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(t,Error),{SyntaxError:t,parse:function(r){var e,n=arguments.length>1?arguments[1]:{},i={},u={start:mr},o=mr,c=i,a=function(t){return t},s=function(t){return t},l="{",f={type:"literal",value:"{",description:'"{"'},p="}",h={type:"literal",value:"}",description:'"}"'},d=function(){return{}},v=function(t){return t},A=null,y=",",g={type:"literal",value:",",description:'","'},m=function(t,r){var e={};t&&(e[t[0]]=Br(t[1]));for(var n=0;n<r.length;n++)e[r[n][2][0]]=Br(r[n][2][1]);return e},x=":",C={type:"literal",value:":",description:'":"'},b=function(t,r){return[t,r]},F="[",j={type:"literal",value:"[",description:'"["'},w="]",O={type:"literal",value:"]",description:'"]"'},S=function(){return[]},R=function(t){return t},E=function(t,r){var e=[];null!=t&&e.push(Br(t));for(var n=0;n<r.length;n++)e.push(Br(r[n][2]));return e},$="true",N={type:"literal",value:"true",description:'"true"'},z=function(){return!0},Z="false",_={type:"literal",value:"false",description:'"false"'},k=function(){return!1},q="null",J={type:"literal",value:"null",description:'"null"'},P=function(){return Pr},B=function(t){return t.join("").trim()},I={type:"other",description:"double-quote string"},U='"',D={type:"literal",value:'"',description:'"\\""'},G=function(){return""},H=function(t){return t},K={type:"other",description:"single-quote string"},L="'",M={type:"literal",value:"'",description:'"\'"'},Q=function(t){return t.join("")},T=/^[^"\\\0-\x1F]/,V={type:"class",value:'[^"\\\\\\0-\\x1F]',description:'[^"\\\\\\0-\\x1F]'},W='\\"',X={type:"literal",value:'\\"',description:'"\\\\\\""'},Y=function(){return'"'},tt="\\\\",rt={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},et=function(){return"\\"},nt="\\/",it={type:"literal",value:"\\/",description:'"\\\\/"'},ut=function(){return"/"},ot="\\b",ct={type:"literal",value:"\\b",description:'"\\\\b"'},at=function(){return"\b"},st="\\f",lt={type:"literal",value:"\\f",description:'"\\\\f"'},ft=function(){return"\f"},pt="\\n",ht={type:"literal",value:"\\n",description:'"\\\\n"'},dt=function(){return"\n"},vt="\\r",At={type:"literal",value:"\\r",description:'"\\\\r"'},yt=function(){return"\r"},gt="\\t",mt={type:"literal",value:"\\t",description:'"\\\\t"'},xt=function(){return"\t"},Ct="\\u",bt={type:"literal",value:"\\u",description:'"\\\\u"'},Ft=function(t,r,e,n){return String.fromCharCode(parseInt("0x"+t+r+e+n))},jt=/^[^'\\\0-\x1F]/,wt={type:"class",value:"[^'\\\\\\0-\\x1F]",description:"[^'\\\\\\0-\\x1F]"},Ot="\\'",St={type:"literal",value:"\\'",description:'"\\\\\'"'},Rt=function(){return"'"},Et={type:"other",description:"key"},$t=/^[a-zA-Z0-9_$\-]/,Nt={type:"class",value:"[a-zA-Z0-9_$\\-]",description:"[a-zA-Z0-9_$\\-]"},zt=function(t){return t.join("")},Zt=/^[^,}\]]/,_t={type:"class",value:"[^,}\\]]",description:"[^,}\\]]"},kt={type:"other",description:"number"},qt=function(t,r,e,n){return 0===n.length?parseFloat(t+r+e):(t+r+e+n.join("")).trim()},Jt=function(t,r,e){return 0===e.length?parseFloat(t+r):(t+r+e.join("")).trim()},Pt=function(t,r,e){return 0===e.length?parseFloat(t+r):(t+r+e.join("")).trim()},Bt=function(t,r){return 0===r.length?parseFloat(t):(t+r.join("")).trim()},It=function(t,r){return t+r},Ut="-",Dt={type:"literal",value:"-",description:'"-"'},Gt=function(t,r){return"-"+t+r},Ht=function(t){return"-"+t},Kt=".",Lt={type:"literal",value:".",description:'"."'},Mt=function(t){return"."+t},Qt=function(t,r){return t+r},Tt=function(t){return t.join("")},Vt=/^[eE]/,Wt={type:"class",value:"[eE]",description:"[eE]"},Xt=/^[+\-]/,Yt={type:"class",value:"[+\\-]",description:"[+\\-]"},tr=function(t,r){return t+(r||"")},rr=/^[0-9]/,er={type:"class",value:"[0-9]",description:"[0-9]"},nr=/^[1-9]/,ir={type:"class",value:"[1-9]",description:"[1-9]"},ur=/^[0-9a-fA-F]/,or={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},cr={type:"other",description:"whitespace"},ar=/^[ \t\n\r]/,sr={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},lr=0,fr=0,pr={line:1,column:1,seenCR:!1},hr=0,dr=[],vr=0;if("startRule"in n){if(!(n.startRule in u))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=u[n.startRule]}function Ar(t){return fr!==t&&(fr>t&&(fr=0,pr={line:1,column:1,seenCR:!1}),function(t,e,n){var i,u;for(i=e;i<n;i++)"\n"===(u=r.charAt(i))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(pr,fr,t),fr=t),pr}function yr(t){lr<hr||(lr>hr&&(hr=lr,dr=[]),dr.push(t))}function gr(e,n,i){var u=Ar(i),o=i<r.length?r.charAt(i):null;return null!==n&&function(t){var r=1;for(t.sort(function(t,r){return t.description<r.description?-1:t.description>r.description?1:0});r<t.length;)t[r-1]===t[r]?t.splice(r,1):r++}(n),new t(null!==e?e:function(t,r){var e,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=t[e].description;return"Expected "+(t.length>1?n.slice(0,-1).join(", ")+" or "+n[t.length-1]:n[0])+" but "+(r?'"'+function(t){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+r(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+r(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+r(t)})}(r)+'"':"end of input")+" found."}(n,o),n,o,i,u.line,u.column)}function mr(){var t,r;return t=lr,qr()!==i&&(r=xr())!==i?t=a(r):(lr=t,t=c),t===i&&(t=lr,qr()!==i&&(r=br())!==i?t=s(r):(lr=t,t=c)),t}function xr(){var t,e,n,u;return t=lr,123===r.charCodeAt(lr)?(e=l,lr++):(e=i,0===vr&&yr(f)),e!==i&&qr()!==i?(125===r.charCodeAt(lr)?(n=p,lr++):(n=i,0===vr&&yr(h)),n!==i&&(u=qr())!==i?t=e=d():(lr=t,t=c)):(lr=t,t=c),t===i&&(t=lr,123===r.charCodeAt(lr)?(e=l,lr++):(e=i,0===vr&&yr(f)),e!==i&&qr()!==i&&(n=function(){var t,e,n,u,o,a,s,l;if(t=lr,44===r.charCodeAt(lr)?(e=y,lr++):(e=i,0===vr&&yr(g)),e===i&&(e=A),e!==i)if((n=Cr())===i&&(n=A),n!==i){for(u=[],o=lr,44===r.charCodeAt(lr)?(a=y,lr++):(a=i,0===vr&&yr(g)),a!==i&&(s=qr())!==i&&(l=Cr())!==i?o=a=[a,s,l]:(lr=o,o=c);o!==i;)u.push(o),o=lr,44===r.charCodeAt(lr)?(a=y,lr++):(a=i,0===vr&&yr(g)),a!==i&&(s=qr())!==i&&(l=Cr())!==i?o=a=[a,s,l]:(lr=o,o=c);u!==i?(44===r.charCodeAt(lr)?(o=y,lr++):(o=i,0===vr&&yr(g)),o===i&&(o=A),o!==i&&(a=qr())!==i?(e=m(n,u),t=e):(lr=t,t=c)):(lr=t,t=c)}else lr=t,t=c;else lr=t,t=c;return t}())!==i?(125===r.charCodeAt(lr)?(u=p,lr++):(u=i,0===vr&&yr(h)),u!==i&&qr()!==i?t=e=v(n):(lr=t,t=c)):(lr=t,t=c)),t}function Cr(){var t,e,n,u;return t=lr,(e=function(){var t,e,n;if(vr++,(t=jr())===i&&(t=wr())===i){if(t=lr,e=[],$t.test(r.charAt(lr))?(n=r.charAt(lr),lr++):(n=i,0===vr&&yr(Nt)),n!==i)for(;n!==i;)e.push(n),$t.test(r.charAt(lr))?(n=r.charAt(lr),lr++):(n=i,0===vr&&yr(Nt));else e=c;e!==i&&(e=zt(e)),t=e}return vr--,t===i&&(e=i,0===vr&&yr(Et)),t}())!==i&&qr()!==i?(58===r.charCodeAt(lr)?(n=x,lr++):(n=i,0===vr&&yr(C)),n!==i&&qr()!==i&&(u=Fr())!==i?t=e=b(e,u):(lr=t,t=c)):(lr=t,t=c),t}function br(){var t,e,n,u;return t=lr,91===r.charCodeAt(lr)?(e=F,lr++):(e=i,0===vr&&yr(j)),e!==i&&qr()!==i?(93===r.charCodeAt(lr)?(n=w,lr++):(n=i,0===vr&&yr(O)),n!==i&&(u=qr())!==i?t=e=S():(lr=t,t=c)):(lr=t,t=c),t===i&&(t=lr,91===r.charCodeAt(lr)?(e=F,lr++):(e=i,0===vr&&yr(j)),e!==i&&qr()!==i&&(n=function(){var t,e,n,u,o,a,s,l;if(t=lr,44===r.charCodeAt(lr)?(e=y,lr++):(e=i,0===vr&&yr(g)),e===i&&(e=A),e!==i)if((n=Fr())===i&&(n=A),n!==i){for(u=[],o=lr,44===r.charCodeAt(lr)?(a=y,lr++):(a=i,0===vr&&yr(g)),a!==i&&(s=qr())!==i&&(l=Fr())!==i?o=a=[a,s,l]:(lr=o,o=c);o!==i;)u.push(o),o=lr,44===r.charCodeAt(lr)?(a=y,lr++):(a=i,0===vr&&yr(g)),a!==i&&(s=qr())!==i&&(l=Fr())!==i?o=a=[a,s,l]:(lr=o,o=c);u!==i?(44===r.charCodeAt(lr)?(o=y,lr++):(o=i,0===vr&&yr(g)),o===i&&(o=A),o!==i&&(a=qr())!==i?(e=E(n,u),t=e):(lr=t,t=c)):(lr=t,t=c)}else lr=t,t=c;else lr=t,t=c;return t}())!==i?(93===r.charCodeAt(lr)?(u=w,lr++):(u=i,0===vr&&yr(O)),u!==i&&qr()!==i?t=e=R(n):(lr=t,t=c)):(lr=t,t=c)),t}function Fr(){var t,e;return(t=jr())===i&&(t=wr())===i&&(t=xr())===i&&(t=br())===i&&(t=lr,r.substr(lr,4)===$?(e=$,lr+=4):(e=i,0===vr&&yr(N)),e!==i&&qr()!==i?t=e=z():(lr=t,t=c),t===i&&(t=lr,r.substr(lr,5)===Z?(e=Z,lr+=5):(e=i,0===vr&&yr(_)),e!==i&&qr()!==i?t=e=k():(lr=t,t=c),t===i&&(t=lr,r.substr(lr,4)===q?(e=q,lr+=4):(e=i,0===vr&&yr(J)),e!==i&&qr()!==i?t=e=P():(lr=t,t=c),t===i&&(t=function(){var t,r,e,n,u,o,a;if(vr++,t=lr,(r=Er())!==i)if((e=$r())!==i)if((n=Nr())!==i)if((u=qr())!==i){for(o=[],a=Rr();a!==i;)o.push(a),a=Rr();o!==i?(r=qt(r,e,n,o),t=r):(lr=t,t=c)}else lr=t,t=c;else lr=t,t=c;else lr=t,t=c;else lr=t,t=c;if(t===i){if(t=lr,(r=Er())!==i)if((e=$r())!==i)if((n=qr())!==i){for(u=[],o=Rr();o!==i;)u.push(o),o=Rr();u!==i?(r=Jt(r,e,u),t=r):(lr=t,t=c)}else lr=t,t=c;else lr=t,t=c;else lr=t,t=c;if(t===i){if(t=lr,(r=Er())!==i)if((e=Nr())!==i)if((n=qr())!==i){for(u=[],o=Rr();o!==i;)u.push(o),o=Rr();u!==i?(r=Pt(r,e,u),t=r):(lr=t,t=c)}else lr=t,t=c;else lr=t,t=c;else lr=t,t=c;if(t===i)if(t=lr,(r=Er())!==i)if((e=qr())!==i){for(n=[],u=Rr();u!==i;)n.push(u),u=Rr();n!==i?(r=Bt(r,n),t=r):(lr=t,t=c)}else lr=t,t=c;else lr=t,t=c}}return vr--,t===i&&(r=i,0===vr&&yr(kt)),t}())===i&&(t=lr,(e=function(){var t,r;if(t=[],(r=Rr())!==i)for(;r!==i;)t.push(r),r=Rr();else t=c;return t}())!==i&&(e=B(e)),t=e)))),t}function jr(){var t,e,n,u;return vr++,t=lr,34===r.charCodeAt(lr)?(e=U,lr++):(e=i,0===vr&&yr(D)),e!==i?(34===r.charCodeAt(lr)?(n=U,lr++):(n=i,0===vr&&yr(D)),n!==i&&(u=qr())!==i?t=e=G():(lr=t,t=c)):(lr=t,t=c),t===i&&(t=lr,34===r.charCodeAt(lr)?(e=U,lr++):(e=i,0===vr&&yr(D)),e!==i&&(n=function(){var t,r;if(lr,t=[],(r=Or())!==i)for(;r!==i;)t.push(r),r=Or();else t=c;return t!==i&&(t=Q(t)),t}())!==i?(34===r.charCodeAt(lr)?(u=U,lr++):(u=i,0===vr&&yr(D)),u!==i&&qr()!==i?t=e=H(n):(lr=t,t=c)):(lr=t,t=c)),vr--,t===i&&(e=i,0===vr&&yr(I)),t}function wr(){var t,e,n,u;return vr++,t=lr,39===r.charCodeAt(lr)?(e=L,lr++):(e=i,0===vr&&yr(M)),e!==i?(39===r.charCodeAt(lr)?(n=L,lr++):(n=i,0===vr&&yr(M)),n!==i&&(u=qr())!==i?t=e=G():(lr=t,t=c)):(lr=t,t=c),t===i&&(t=lr,39===r.charCodeAt(lr)?(e=L,lr++):(e=i,0===vr&&yr(M)),e!==i&&(n=function(){var t,r;if(lr,t=[],(r=Sr())!==i)for(;r!==i;)t.push(r),r=Sr();else t=c;return t!==i&&(t=Q(t)),t}())!==i?(39===r.charCodeAt(lr)?(u=L,lr++):(u=i,0===vr&&yr(M)),u!==i&&qr()!==i?t=e=H(n):(lr=t,t=c)):(lr=t,t=c)),vr--,t===i&&(e=i,0===vr&&yr(K)),t}function Or(){var t,e,n,u,o,a;return T.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(V)),t===i&&(t=lr,r.substr(lr,2)===W?(e=W,lr+=2):(e=i,0===vr&&yr(X)),e!==i&&(e=Y()),(t=e)===i&&(t=lr,r.substr(lr,2)===tt?(e=tt,lr+=2):(e=i,0===vr&&yr(rt)),e!==i&&(e=et()),(t=e)===i&&(t=lr,r.substr(lr,2)===nt?(e=nt,lr+=2):(e=i,0===vr&&yr(it)),e!==i&&(e=ut()),(t=e)===i&&(t=lr,r.substr(lr,2)===ot?(e=ot,lr+=2):(e=i,0===vr&&yr(ct)),e!==i&&(e=at()),(t=e)===i&&(t=lr,r.substr(lr,2)===st?(e=st,lr+=2):(e=i,0===vr&&yr(lt)),e!==i&&(e=ft()),(t=e)===i&&(t=lr,r.substr(lr,2)===pt?(e=pt,lr+=2):(e=i,0===vr&&yr(ht)),e!==i&&(e=dt()),(t=e)===i&&(t=lr,r.substr(lr,2)===vt?(e=vt,lr+=2):(e=i,0===vr&&yr(At)),e!==i&&(e=yt()),(t=e)===i&&(t=lr,r.substr(lr,2)===gt?(e=gt,lr+=2):(e=i,0===vr&&yr(mt)),e!==i&&(e=xt()),(t=e)===i&&(t=lr,r.substr(lr,2)===Ct?(e=Ct,lr+=2):(e=i,0===vr&&yr(bt)),e!==i&&(n=kr())!==i&&(u=kr())!==i&&(o=kr())!==i&&(a=kr())!==i?t=e=Ft(n,u,o,a):(lr=t,t=c)))))))))),t}function Sr(){var t,e,n,u,o,a;return jt.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(wt)),t===i&&(t=lr,r.substr(lr,2)===Ot?(e=Ot,lr+=2):(e=i,0===vr&&yr(St)),e!==i&&(e=Rt()),(t=e)===i&&(t=lr,r.substr(lr,2)===tt?(e=tt,lr+=2):(e=i,0===vr&&yr(rt)),e!==i&&(e=et()),(t=e)===i&&(t=lr,r.substr(lr,2)===nt?(e=nt,lr+=2):(e=i,0===vr&&yr(it)),e!==i&&(e=ut()),(t=e)===i&&(t=lr,r.substr(lr,2)===ot?(e=ot,lr+=2):(e=i,0===vr&&yr(ct)),e!==i&&(e=at()),(t=e)===i&&(t=lr,r.substr(lr,2)===st?(e=st,lr+=2):(e=i,0===vr&&yr(lt)),e!==i&&(e=ft()),(t=e)===i&&(t=lr,r.substr(lr,2)===pt?(e=pt,lr+=2):(e=i,0===vr&&yr(ht)),e!==i&&(e=dt()),(t=e)===i&&(t=lr,r.substr(lr,2)===vt?(e=vt,lr+=2):(e=i,0===vr&&yr(At)),e!==i&&(e=yt()),(t=e)===i&&(t=lr,r.substr(lr,2)===gt?(e=gt,lr+=2):(e=i,0===vr&&yr(mt)),e!==i&&(e=xt()),(t=e)===i&&(t=lr,r.substr(lr,2)===Ct?(e=Ct,lr+=2):(e=i,0===vr&&yr(bt)),e!==i&&(n=kr())!==i&&(u=kr())!==i&&(o=kr())!==i&&(a=kr())!==i?t=e=Ft(n,u,o,a):(lr=t,t=c)))))))))),t}function Rr(){var t;return Zt.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(_t)),t}function Er(){var t,e,n,u;return t=lr,(e=_r())!==i&&(n=zr())!==i?t=e=It(e,n):(lr=t,t=c),t===i&&(t=Zr())===i&&(t=lr,45===r.charCodeAt(lr)?(e=Ut,lr++):(e=i,0===vr&&yr(Dt)),e!==i&&(n=_r())!==i&&(u=zr())!==i?t=e=Gt(n,u):(lr=t,t=c),t===i&&(t=lr,45===r.charCodeAt(lr)?(e=Ut,lr++):(e=i,0===vr&&yr(Dt)),e!==i&&(n=Zr())!==i?t=e=Ht(n):(lr=t,t=c))),t}function $r(){var t,e,n;return t=lr,46===r.charCodeAt(lr)?(e=Kt,lr++):(e=i,0===vr&&yr(Lt)),e!==i&&(n=zr())!==i?t=e=Mt(n):(lr=t,t=c),t}function Nr(){var t,e,n;return t=lr,(e=function(){var t,e,n;return t=lr,Vt.test(r.charAt(lr))?(e=r.charAt(lr),lr++):(e=i,0===vr&&yr(Wt)),e!==i?(Xt.test(r.charAt(lr))?(n=r.charAt(lr),lr++):(n=i,0===vr&&yr(Yt)),n===i&&(n=A),n!==i?(e=tr(e,n),t=e):(lr=t,t=c)):(lr=t,t=c),t}())!==i&&(n=zr())!==i?t=e=Qt(e,n):(lr=t,t=c),t}function zr(){var t,r;if(lr,t=[],(r=Zr())!==i)for(;r!==i;)t.push(r),r=Zr();else t=c;return t!==i&&(t=Tt(t)),t}function Zr(){var t;return rr.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(er)),t}function _r(){var t;return nr.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(ir)),t}function kr(){var t;return ur.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(or)),t}function qr(){var t,r;for(vr++,t=[],r=Jr();r!==i;)t.push(r),r=Jr();return vr--,t===i&&(r=i,0===vr&&yr(cr)),t}function Jr(){var t;return ar.test(r.charAt(lr))?(t=r.charAt(lr),lr++):(t=i,0===vr&&yr(sr)),t}var Pr=new Object;function Br(t){return t===Pr?null:t}if((e=o())!==i&&lr===r.length)return e;throw e!==i&&lr<r.length&&yr({type:"end",description:"end of input"}),gr(null,dr,hr)}}}();e.stringify=function(t,r){try{r=r||{};var e={};e.showfunc=r.showfunc||r.f||!1,e.custom=r.custom||r.c||!1,e.depth=r.depth||r.d||3,e.maxitems=r.maxitems||r.mi||11,e.maxchars=r.maxchars||r.mc||111,e.exclude=r.exclude||r.x||["$"];var n=r.omit||r.o||[];e.omit={};for(var i=0;i<n.length;i++)e.omit[n[i]]=!0;var u=function t(r,e,n){if(n++,null==r)return"null";var i=Object.prototype.toString.call(r).charAt(8);if("F"===i&&!e.showfunc)return null;if(e.custom){if(r.hasOwnProperty("toString"))return r.toString();if(r.hasOwnProperty("inspect"))return r.inspect()}var u,o,c,a=0;if("N"===i)return isNaN(r)?"null":r.toString();if("O"===i){if(u=[],n<=e.depth)for(a in o=0,r){if(o>=e.maxitems)break;var s=!0;for(c=0;c<e.exclude.length&&s;c++)s=!~a.indexOf(e.exclude[c]);if(s=s&&!e.omit[a],null!=(f=t(r[a],e,n))&&s){var l=a.match(/^[a-zA-Z0-9_$]+$/)?a:JSON.stringify(a);u.push(l+":"+f),o++}}return"{"+u.join(",")+"}"}if("A"===i){if(u=[],n<=e.depth)for(;a<r.length&&a<e.maxitems;a++){var f;null!=(f=t(r[a],e,n))&&u.push(f)}return"["+u.join(",")+"]"}var p=r.toString();return(~" \"'\r\n\t,}]".indexOf(p[0])||!~p.match(/,}]/)||~" \r\n\t".indexOf(p[p.length-1]))&&(p="'"+p.replace(/'/g,"\\'")+"'"),p}(t,e,0);return u=null==u?"":u.substring(0,e.maxchars)}catch(r){return"ERROR: jsonic.stringify: "+r+" input was: "+JSON.stringify(t)}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.jsonic=e):t.jsonic=e}).call(this);

},{}],100:[function(require,module,exports){
var reInterpolate=/<%=([\s\S]+?)%>/g;module.exports=reInterpolate;

},{}],101:[function(require,module,exports){
(function (global){
var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",HOT_COUNT=800,HOT_SPAN=16,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule&&freeModule.require&&freeModule.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function baseUnary(e){return function(t){return e(t)}}function getValue(e,t){return null==e?void 0:e[t]}function overArg(e,t){return function(r){return e(t(r))}}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeMax=Math.max,nativeNow=Date.now,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),baseCreate=function(){function e(){}return function(t){if(!isObject(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,a=assocIndexOf(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var r=getMapData(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var a=r.__data__;if(!Map||a.length<LARGE_ARRAY_SIZE-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new MapCache(a)}return r.set(e,t),this.size=r.size,this}function arrayLikeKeys(e,t){var r=isArray(e),a=!r&&isArguments(e),n=!r&&!a&&isBuffer(e),o=!r&&!a&&!n&&isTypedArray(e),s=r||a||n||o,i=s?baseTimes(e.length,String):[],c=i.length;for(var u in e)!t&&!hasOwnProperty.call(e,u)||s&&("length"==u||n&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||i.push(u);return i}function assignMergeValue(e,t,r){(void 0===r||eq(e[t],r))&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function assignValue(e,t,r){var a=e[t];hasOwnProperty.call(e,t)&&eq(a,r)&&(void 0!==r||t in e)||baseAssignValue(e,t,r)}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseAssignValue(e,t,r){"__proto__"==t&&defineProperty?defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseFor=createBaseFor();function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)?reIsNative:reIsHostCtor).test(toSource(e))}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var a in e)("constructor"!=a||!t&&hasOwnProperty.call(e,a))&&r.push(a);return r}function baseMerge(e,t,r,a,n){e!==t&&baseFor(t,function(o,s){if(n||(n=new Stack),isObject(o))baseMergeDeep(e,t,s,r,baseMerge,a,n);else{var i=a?a(safeGet(e,s),o,s+"",e,t,n):void 0;void 0===i&&(i=o),assignMergeValue(e,s,i)}},keysIn)}function baseMergeDeep(e,t,r,a,n,o,s){var i=safeGet(e,r),c=safeGet(t,r),u=s.get(c);if(u)assignMergeValue(e,r,u);else{var f=o?o(i,c,r+"",e,t,s):void 0,l=void 0===f;if(l){var y=isArray(c),g=!y&&isBuffer(c),p=!y&&!g&&isTypedArray(c);f=c,y||g||p?isArray(i)?f=i:isArrayLikeObject(i)?f=copyArray(i):g?(l=!1,f=cloneBuffer(c,!0)):p?(l=!1,f=cloneTypedArray(c,!0)):f=[]:isPlainObject(c)||isArguments(c)?(f=i,isArguments(i)?f=toPlainObject(i):isObject(i)&&!isFunction(i)||(f=initCloneObject(c))):l=!1}l&&(s.set(c,f),n(f,c,a,o,s),s.delete(c)),assignMergeValue(e,r,f)}}function baseRest(e,t){return setToString(overRest(e,t,identity),e+"")}var baseSetToString=defineProperty?function(e,t){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity;function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,a=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(a),a}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}function cloneTypedArray(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function copyArray(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}function copyObject(e,t,r,a){var n=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var i=t[o],c=a?a(r[i],e[i],i,r,e):void 0;void 0===c&&(c=e[i]),n?baseAssignValue(r,i,c):assignValue(r,i,c)}return r}function createAssigner(e){return baseRest(function(t,r){var a=-1,n=r.length,o=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(n--,o):void 0,s&&isIterateeCall(r[0],r[1],s)&&(o=n<3?void 0:o,n=1),t=Object(t);++a<n;){var i=r[a];i&&e(t,i,a,o)}return t})}function createBaseFor(e){return function(t,r,a){for(var n=-1,o=Object(t),s=a(t),i=s.length;i--;){var c=s[e?i:++n];if(!1===r(o[c],c,o))break}return t}}function customDefaultsMerge(e,t,r,a,n,o){return isObject(e)&&isObject(t)&&(o.set(t,e),baseMerge(e,t,void 0,customDefaultsMerge,o),o.delete(t)),e}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0;var a=!0}catch(e){}var n=nativeObjectToString.call(e);return a&&(t?e[symToStringTag]=r:delete e[symToStringTag]),n}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate(getPrototype(e))}function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var a=typeof t;return!!("number"==a?isArrayLike(r)&&isIndex(t,r.length):"string"==a&&t in r)&&eq(r[t],e)}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function objectToString(e){return nativeObjectToString.call(e)}function overRest(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var a=arguments,n=-1,o=nativeMax(a.length-t,0),s=Array(o);++n<o;)s[n]=a[t+n];n=-1;for(var i=Array(t+1);++n<t;)i[n]=a[n];return i[t]=r(s),apply(e,this,i)}}function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var setToString=shortOut(baseSetToString);function shortOut(e){var t=0,r=0;return function(){var a=nativeNow(),n=HOT_SPAN-(a-r);if(r=a,n>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eq(e,t){return e===t||e!=e&&t!=t}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isObjectLike(e){return null!=e&&"object"==typeof e}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag)return!1;var t=getPrototype(e);if(null===t)return!0;var r=hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString.call(r)==objectCtorString}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toPlainObject(e){return copyObject(e,keysIn(e))}var defaultsDeep=baseRest(function(e){return e.push(void 0,customDefaultsMerge),apply(mergeWith,void 0,e)});function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var mergeWith=createAssigner(function(e,t,r,a){baseMerge(e,t,r,a)});function constant(e){return function(){return e}}function identity(e){return e}function stubFalse(){return!1}module.exports=defaultsDeep;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],102:[function(require,module,exports){
(function (global){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function arrayPush(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;function baseFlatten(e,t,r,n,o){var a=-1,l=e.length;for(r||(r=isFlattenable),o||(o=[]);++a<l;){var b=e[a];t>0&&r(b)?t>1?baseFlatten(b,t-1,r,n,o):arrayPush(o,b):n||(o[o.length]=b)}return o}function isFlattenable(e){return isArray(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function flatten(e){return(e?e.length:0)?baseFlatten(e,1):[]}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}module.exports=flatten;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],103:[function(require,module,exports){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/;function arrayEach(r,e){for(var t=-1,n=r?r.length:0;++t<n&&!1!==e(r[t],t,r););return r}function baseTimes(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function overArg(r,e){return function(t){return r(e(t))}}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeKeys=overArg(Object.keys,Object);function arrayLikeKeys(r,e){var t=isArray(r)||isArguments(r)?baseTimes(r.length,String):[],n=t.length,o=!!n;for(var a in r)!e&&!hasOwnProperty.call(r,a)||o&&("length"==a||isIndex(a,n))||t.push(a);return t}var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor();function baseForOwn(r,e){return r&&baseFor(r,e,keys)}function baseKeys(r){if(!isPrototype(r))return nativeKeys(r);var e=[];for(var t in Object(r))hasOwnProperty.call(r,t)&&"constructor"!=t&&e.push(t);return e}function createBaseEach(r,e){return function(t,n){if(null==t)return t;if(!isArrayLike(t))return r(t,n);for(var o=t.length,a=e?o:-1,i=Object(t);(e?a--:++a<o)&&!1!==n(i[a],a,i););return t}}function createBaseFor(r){return function(e,t,n){for(var o=-1,a=Object(e),i=n(e),c=i.length;c--;){var u=i[r?c:++o];if(!1===t(a[u],u,a))break}return e}}function isIndex(r,e){return!!(e=null==e?MAX_SAFE_INTEGER:e)&&("number"==typeof r||reIsUint.test(r))&&r>-1&&r%1==0&&r<e}function isPrototype(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||objectProto)}function forEach(r,e){return(isArray(r)?arrayEach:baseEach)(r,"function"==typeof e?e:identity)}function isArguments(r){return isArrayLikeObject(r)&&hasOwnProperty.call(r,"callee")&&(!propertyIsEnumerable.call(r,"callee")||objectToString.call(r)==argsTag)}var isArray=Array.isArray;function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}function isArrayLikeObject(r){return isObjectLike(r)&&isArrayLike(r)}function isFunction(r){var e=isObject(r)?objectToString.call(r):"";return e==funcTag||e==genTag}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=MAX_SAFE_INTEGER}function isObject(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function isObjectLike(r){return!!r&&"object"==typeof r}function keys(r){return isArrayLike(r)?arrayLikeKeys(r):baseKeys(r)}function identity(r){return r}module.exports=forEach;

},{}],104:[function(require,module,exports){
var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(t){return isArrayLikeObject(t)&&hasOwnProperty.call(t,"callee")&&(!propertyIsEnumerable.call(t,"callee")||objectToString.call(t)==argsTag)}function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function isFunction(t){var e=isObject(t)?objectToString.call(t):"";return e==funcTag||e==genTag}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER}function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function isObjectLike(t){return!!t&&"object"==typeof t}module.exports=isArguments;

},{}],105:[function(require,module,exports){
(function (global){
var dateTag="[object Date]",freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsDate=nodeUtil&&nodeUtil.isDate;function baseUnary(e){return function(o){return e(o)}}var objectProto=Object.prototype,objectToString=objectProto.toString;function baseIsDate(e){return isObjectLike(e)&&objectToString.call(e)==dateTag}var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isObjectLike(e){return!!e&&"object"==typeof e}module.exports=isDate;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],106:[function(require,module,exports){
var numberTag="[object Number]",objectProto=Object.prototype,objectToString=objectProto.toString;function isObjectLike(t){return!!t&&"object"==typeof t}function isNaN(t){return isNumber(t)&&t!=+t}function isNumber(t){return"number"==typeof t||isObjectLike(t)&&objectToString.call(t)==numberTag}module.exports=isNaN;

},{}],107:[function(require,module,exports){
(function (global){
var regexpTag="[object RegExp]",freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp;function baseUnary(e){return function(o){return e(o)}}var objectProto=Object.prototype,objectToString=objectProto.toString;function baseIsRegExp(e){return isObject(e)&&objectToString.call(e)==regexpTag}function isObject(e){var o=typeof e;return!!e&&("object"==o||"function"==o)}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;module.exports=isRegExp;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],108:[function(require,module,exports){
(function (global){
var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function arrayIncludes(e,t){return!!(e?e.length:0)&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,r){for(var a=-1,n=e?e.length:0;++a<n;)if(r(t,e[a]))return!0;return!1}function arrayMap(e,t){for(var r=-1,a=e?e.length:0,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}function arrayPush(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e}function baseFindIndex(e,t,r,a){for(var n=e.length,o=r+(a?1:-1);a?o--:++o<n;)if(t(e[o],o,e))return o;return-1}function baseIndexOf(e,t,r){if(t!=t)return baseFindIndex(e,baseIsNaN,r);for(var a=r-1,n=e.length;++a<n;)if(e[a]===t)return a;return-1}function baseIsNaN(e){return e!=e}function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function baseUnary(e){return function(t){return e(t)}}function cacheHas(e,t){return e.has(t)}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function overArg(e,t){return function(r){return e(t(r))}}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,getPrototype=overArg(Object.getPrototypeOf,Object),propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0,nativeGetSymbols=Object.getOwnPropertySymbols,nativeMax=Math.max,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");function Hash(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){return this.__data__[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),!0)}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,a=assocIndexOf(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}function MapCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function SetCache(e){var t=-1,r=e?e.length:0;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],a=r.length,n=!!a;for(var o in e)!t&&!hasOwnProperty.call(e,o)||n&&("length"==o||isIndex(o,a))||r.push(o);return r}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseDifference(e,t,r,a){var n=-1,o=arrayIncludes,s=!0,i=e.length,c=[],u=t.length;if(!i)return c;r&&(t=arrayMap(t,baseUnary(r))),a?(o=arrayIncludesWith,s=!1):t.length>=LARGE_ARRAY_SIZE&&(o=cacheHas,s=!1,t=new SetCache(t));e:for(;++n<i;){var l=e[n],h=r?r(l):l;if(l=a||0!==l?l:0,s&&h==h){for(var f=u;f--;)if(t[f]===h)continue e;c.push(l)}else o(t,h,a)||c.push(l)}return c}function baseFlatten(e,t,r,a,n){var o=-1,s=e.length;for(r||(r=isFlattenable),n||(n=[]);++o<s;){var i=e[o];t>0&&r(i)?t>1?baseFlatten(i,t-1,r,a,n):arrayPush(n,i):a||(n[n.length]=i)}return n}function baseGetAllKeys(e,t,r){var a=t(e);return isArray(e)?a:arrayPush(a,r(e))}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor).test(toSource(e))}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var a in e)("constructor"!=a||!t&&hasOwnProperty.call(e,a))&&r.push(a);return r}function basePick(e,t){return basePickBy(e=Object(e),t,function(t,r){return r in e})}function basePickBy(e,t,r){for(var a=-1,n=t.length,o={};++a<n;){var s=t[a],i=e[s];r(i,s)&&(o[s]=i)}return o}function baseRest(e,t){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,n=nativeMax(r.length-t,0),o=Array(n);++a<n;)o[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=o,apply(e,this,s)}}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,getSymbolsIn)}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray,getSymbolsIn=nativeGetSymbols?function(e){for(var t=[];e;)arrayPush(t,getSymbols(e)),e=getPrototype(e);return t}:stubArray;function isFlattenable(e){return isArray(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto)}function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eq(e,t){return e===t||e!=e&&t!=t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}var isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var omit=baseRest(function(e,t){return null==e?{}:(t=arrayMap(baseFlatten(t,1),toKey),basePick(e,baseDifference(getAllKeysIn(e),t)))});function stubArray(){return[]}module.exports=omit;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],109:[function(require,module,exports){
(function (global){
var reInterpolate=require("lodash._reinterpolate"),templateSettings=require("lodash.templatesettings"),HOT_COUNT=800,HOT_SPAN=16,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule&&freeModule.require&&freeModule.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}function arrayMap(e,r){for(var t=-1,n=null==e?0:e.length,a=Array(n);++t<n;)a[t]=r(e[t],t,e);return a}function baseTimes(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function baseUnary(e){return function(r){return e(r)}}function baseValues(e,r){return arrayMap(r,function(r){return e[r]})}function escapeStringChar(e){return"\\"+stringEscapes[e]}function getValue(e,r){return null==e?void 0:e[r]}function overArg(e,r){return function(t){return e(r(t))}}var funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,getPrototype=overArg(Object.getPrototypeOf,Object),propertyIsEnumerable=objectProto.propertyIsEnumerable,symToStringTag=Symbol?Symbol.toStringTag:void 0,defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeNow=Date.now,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function arrayLikeKeys(e,r){var t=isArray(e),n=!t&&isArguments(e),a=!t&&!n&&isBuffer(e),o=!t&&!n&&!a&&isTypedArray(e),i=t||n||a||o,s=i?baseTimes(e.length,String):[],u=s.length;for(var c in e)!r&&!hasOwnProperty.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex(c,u))||s.push(c);return s}function assignValue(e,r,t){var n=e[r];hasOwnProperty.call(e,r)&&eq(n,t)&&(void 0!==t||r in e)||baseAssignValue(e,r,t)}function baseAssignValue(e,r,t){"__proto__"==r&&defineProperty?defineProperty(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)?reIsNative:reIsHostCtor).test(toSource(e))}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var r=[];for(var t in Object(e))hasOwnProperty.call(e,t)&&"constructor"!=t&&r.push(t);return r}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var r=isPrototype(e),t=[];for(var n in e)("constructor"!=n||!r&&hasOwnProperty.call(e,n))&&t.push(n);return t}function baseRest(e,r){return setToString(overRest(e,r,identity),e+"")}var baseSetToString=defineProperty?function(e,r){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;function baseToString(e){if("string"==typeof e)return e;if(isArray(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var r=e+"";return"0"==r&&1/e==-INFINITY?"-0":r}function copyObject(e,r,t,n){var a=!t;t||(t={});for(var o=-1,i=r.length;++o<i;){var s=r[o],u=n?n(t[s],e[s],s,t,e):void 0;void 0===u&&(u=e[s]),a?baseAssignValue(t,s,u):assignValue(t,s,u)}return t}function createAssigner(e){return baseRest(function(r,t){var n=-1,a=t.length,o=a>1?t[a-1]:void 0,i=a>2?t[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,i&&isIterateeCall(t[0],t[1],i)&&(o=a<3?void 0:o,a=1),r=Object(r);++n<a;){var s=t[n];s&&e(r,s,n,o)}return r})}function customDefaultsAssignIn(e,r,t,n){return void 0===e||eq(e,objectProto[t])&&!hasOwnProperty.call(n,t)?r:e}function getNative(e,r){var t=getValue(e,r);return baseIsNative(t)?t:void 0}function getRawTag(e){var r=hasOwnProperty.call(e,symToStringTag),t=e[symToStringTag];try{e[symToStringTag]=void 0;var n=!0}catch(e){}var a=nativeObjectToString.call(e);return n&&(r?e[symToStringTag]=t:delete e[symToStringTag]),a}function isIndex(e,r){var t=typeof e;return!!(r=null==r?MAX_SAFE_INTEGER:r)&&("number"==t||"symbol"!=t&&reIsUint.test(e))&&e>-1&&e%1==0&&e<r}function isIterateeCall(e,r,t){if(!isObject(t))return!1;var n=typeof r;return!!("number"==n?isArrayLike(t)&&isIndex(r,t.length):"string"==n&&r in t)&&eq(t[r],e)}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||objectProto)}function nativeKeysIn(e){var r=[];if(null!=e)for(var t in Object(e))r.push(t);return r}function objectToString(e){return nativeObjectToString.call(e)}function overRest(e,r,t){return r=nativeMax(void 0===r?e.length-1:r,0),function(){for(var n=arguments,a=-1,o=nativeMax(n.length-r,0),i=Array(o);++a<o;)i[a]=n[r+a];a=-1;for(var s=Array(r+1);++a<r;)s[a]=n[a];return s[r]=t(i),apply(e,this,s)}}var setToString=shortOut(baseSetToString);function shortOut(e){var r=0,t=0;return function(){var n=nativeNow(),a=HOT_SPAN-(n-t);if(t=n,a>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eq(e,r){return e===r||e!=e&&r!=r}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArray=Array.isArray;function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}var isBuffer=nativeIsBuffer||stubFalse;function isError(e){if(!isObjectLike(e))return!1;var r=baseGetTag(e);return r==errorTag||r==domExcTag||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject(e)}function isFunction(e){if(!isObject(e))return!1;var r=baseGetTag(e);return r==funcTag||r==genTag||r==asyncTag||r==proxyTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function isObjectLike(e){return null!=e&&"object"==typeof e}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag)return!1;var r=getPrototype(e);if(null===r)return!0;var t=hasOwnProperty.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&funcToString.call(t)==objectCtorString}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toString(e){return null==e?"":baseToString(e)}var assignInWith=createAssigner(function(e,r,t,n){copyObject(r,keysIn(r),e,n)});function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}function template(e,r,t){var n=templateSettings.imports._.templateSettings||templateSettings;t&&isIterateeCall(e,r,t)&&(r=void 0),e=toString(e),r=assignInWith({},r,n,customDefaultsAssignIn);var a,o,i=assignInWith({},r.imports,n.imports,customDefaultsAssignIn),s=keys(i),u=baseValues(i,s),c=0,g=r.interpolate||reNoMatch,y="__p += '",l=RegExp((r.escape||reNoMatch).source+"|"+g.source+"|"+(g===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(r.evaluate||reNoMatch).source+"|$","g"),f=hasOwnProperty.call(r,"sourceURL")?"//# sourceURL="+(r.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";e.replace(l,function(r,t,n,i,s,u){return n||(n=i),y+=e.slice(c,u).replace(reUnescapedString,escapeStringChar),t&&(a=!0,y+="' +\n__e("+t+") +\n'"),s&&(o=!0,y+="';\n"+s+";\n__p += '"),n&&(y+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+r.length,r}),y+="';\n";var p=hasOwnProperty.call(r,"variable")&&r.variable;p||(y="with (obj) {\n"+y+"\n}\n"),y=(o?y.replace(reEmptyStringLeading,""):y).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),y="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+y+"return __p\n}";var b=attempt(function(){return Function(s,f+"return "+y).apply(void 0,u)});if(b.source=y,isError(b))throw b;return b}var attempt=baseRest(function(e,r){try{return apply(e,void 0,r)}catch(e){return isError(e)?e:new Error(e)}});function constant(e){return function(){return e}}function identity(e){return e}function stubFalse(){return!1}module.exports=template;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"lodash._reinterpolate":100,"lodash.templatesettings":110}],110:[function(require,module,exports){
(function (global){
var reInterpolate=require("lodash._reinterpolate"),INFINITY=1/0,nullTag="[object Null]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function arrayMap(e,t){for(var r=-1,o=null==e?0:e.length,a=Array(o);++r<o;)a[r]=t(e[r],r,e);return a}function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}var escapeHtmlChar=basePropertyOf(htmlEscapes),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,Symbol=root.Symbol,symToStringTag=Symbol?Symbol.toStringTag:void 0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:{escape:escape}}};function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}function baseToString(e){if("string"==typeof e)return e;if(isArray(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0;var o=!0}catch(e){}var a=nativeObjectToString.call(e);return o&&(t?e[symToStringTag]=r:delete e[symToStringTag]),a}function objectToString(e){return nativeObjectToString.call(e)}var isArray=Array.isArray;function isObjectLike(e){return null!=e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}function toString(e){return null==e?"":baseToString(e)}function escape(e){return(e=toString(e))&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar):e}module.exports=templateSettings;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"lodash._reinterpolate":100}],111:[function(require,module,exports){
(function (global){
var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",INFINITY=1/0,funcTag="[object Function]",genTag="[object GeneratorFunction]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function arrayIncludes(t,e){return!!(t?t.length:0)&&baseIndexOf(t,e,0)>-1}function arrayIncludesWith(t,e,a){for(var r=-1,n=t?t.length:0;++r<n;)if(a(e,t[r]))return!0;return!1}function baseFindIndex(t,e,a,r){for(var n=t.length,o=a+(r?1:-1);r?o--:++o<n;)if(e(t[o],o,t))return o;return-1}function baseIndexOf(t,e,a){if(e!=e)return baseFindIndex(t,baseIsNaN,a);for(var r=a-1,n=t.length;++r<n;)if(t[r]===e)return r;return-1}function baseIsNaN(t){return t!=t}function cacheHas(t,e){return t.has(e)}function getValue(t,e){return null==t?void 0:t[e]}function isHostObject(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function setToArray(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=t}),a}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),splice=arrayProto.splice,Map=getNative(root,"Map"),Set=getNative(root,"Set"),nativeCreate=getNative(Object,"create");function Hash(t){var e=-1,a=t?t.length:0;for(this.clear();++e<a;){var r=t[e];this.set(r[0],r[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(t){return this.has(t)&&delete this.__data__[t]}function hashGet(t){var e=this.__data__;if(nativeCreate){var a=e[t];return a===HASH_UNDEFINED?void 0:a}return hasOwnProperty.call(e,t)?e[t]:void 0}function hashHas(t){var e=this.__data__;return nativeCreate?void 0!==e[t]:hasOwnProperty.call(e,t)}function hashSet(t,e){return this.__data__[t]=nativeCreate&&void 0===e?HASH_UNDEFINED:e,this}function ListCache(t){var e=-1,a=t?t.length:0;for(this.clear();++e<a;){var r=t[e];this.set(r[0],r[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(t){var e=this.__data__,a=assocIndexOf(e,t);return!(a<0)&&(a==e.length-1?e.pop():splice.call(e,a,1),!0)}function listCacheGet(t){var e=this.__data__,a=assocIndexOf(e,t);return a<0?void 0:e[a][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var a=this.__data__,r=assocIndexOf(a,t);return r<0?a.push([t,e]):a[r][1]=e,this}function MapCache(t){var e=-1,a=t?t.length:0;for(this.clear();++e<a;){var r=t[e];this.set(r[0],r[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(t){return getMapData(this,t).delete(t)}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){return getMapData(this,t).set(t,e),this}function SetCache(t){var e=-1,a=t?t.length:0;for(this.__data__=new MapCache;++e<a;)this.add(t[e])}function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function assocIndexOf(t,e){for(var a=t.length;a--;)if(eq(t[a][0],e))return a;return-1}function baseIsNative(t){return!(!isObject(t)||isMasked(t))&&(isFunction(t)||isHostObject(t)?reIsNative:reIsHostCtor).test(toSource(t))}function baseUniq(t,e,a){var r=-1,n=arrayIncludes,o=t.length,s=!0,c=[],i=c;if(a)s=!1,n=arrayIncludesWith;else if(o>=LARGE_ARRAY_SIZE){var h=e?null:createSet(t);if(h)return setToArray(h);s=!1,n=cacheHas,i=new SetCache}else i=e?[]:c;t:for(;++r<o;){var u=t[r],l=e?e(u):u;if(u=a||0!==u?u:0,s&&l==l){for(var f=i.length;f--;)if(i[f]===l)continue t;e&&i.push(l),c.push(u)}else n(i,l,a)||(i!==c&&i.push(l),c.push(u))}return c}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(t){return new Set(t)}:noop;function getMapData(t,e){var a=t.__data__;return isKeyable(e)?a["string"==typeof e?"string":"hash"]:a.map}function getNative(t,e){var a=getValue(t,e);return baseIsNative(a)?a:void 0}function isKeyable(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function uniq(t){return t&&t.length?baseUniq(t):[]}function eq(t,e){return t===e||t!=t&&e!=e}function isFunction(t){var e=isObject(t)?objectToString.call(t):"";return e==funcTag||e==genTag}function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function noop(){}module.exports=uniq;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],112:[function(require,module,exports){
"use strict";const Yallist=require("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1;class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=t.max||1/0;const e=t.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof e?naiveLength:e,this[ALLOW_STALE]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=t.maxAge||0,this[DISPOSE]=t.dispose,this[NO_DISPOSE_ON_SET]=t.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[MAX]=t||1/0,trim(this)}get max(){return this[MAX]}set allowStale(t){this[ALLOW_STALE]=!!t}get allowStale(){return this[ALLOW_STALE]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=t,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(t){"function"!=typeof t&&(t=naiveLength),t!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=t,this[LENGTH]=0,this[LRU_LIST].forEach(t=>{t.length=this[LENGTH_CALCULATOR](t.value,t.key),this[LENGTH]+=t.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(t,e){e=e||this;for(let s=this[LRU_LIST].tail;null!==s;){const i=s.prev;forEachStep(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[LRU_LIST].head;null!==s;){const i=s.next;forEachStep(this,t,s,e),s=i}}keys(){return this[LRU_LIST].toArray().map(t=>t.key)}values(){return this[LRU_LIST].toArray().map(t=>t.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(t=>this[DISPOSE](t.key,t.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(t=>!isStale(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[LRU_LIST]}set(t,e,s){if((s=s||this[MAX_AGE])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,h=this[LENGTH_CALCULATOR](e,t);if(this[CACHE].has(t)){if(h>this[MAX])return del(this,this[CACHE].get(t)),!1;const n=this[CACHE].get(t).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[LENGTH]+=h-n.length,n.length=h,this.get(t),trim(this),!0}const n=new Entry(t,e,h,i,s);return n.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](t,e),!1):(this[LENGTH]+=n.length,this[LRU_LIST].unshift(n),this[CACHE].set(t,this[LRU_LIST].head),trim(this),!0)}has(t){if(!this[CACHE].has(t))return!1;const e=this[CACHE].get(t).value;return!isStale(this,e)}get(t){return get(this,t,!0)}peek(t){return get(this,t,!1)}pop(){const t=this[LRU_LIST].tail;return t?(del(this,t),t.value):null}del(t){del(this,this[CACHE].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],h=i.e||0;if(0===h)this.set(i.k,i.v);else{const t=h-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[CACHE].forEach((t,e)=>get(this,e,!1))}}const get=(t,e,s)=>{const i=t[CACHE].get(e);if(i){const e=i.value;if(isStale(t,e)){if(del(t,i),!t[ALLOW_STALE])return}else s&&(t[UPDATE_AGE_ON_GET]&&(i.value.now=Date.now()),t[LRU_LIST].unshiftNode(i));return e.value}},isStale=(t,e)=>{if(!e||!e.maxAge&&!t[MAX_AGE])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[MAX_AGE]&&s>t[MAX_AGE]},trim=t=>{if(t[LENGTH]>t[MAX])for(let e=t[LRU_LIST].tail;t[LENGTH]>t[MAX]&&null!==e;){const s=e.prev;del(t,e),e=s}},del=(t,e)=>{if(e){const s=e.value;t[DISPOSE]&&t[DISPOSE](s.key,s.value),t[LENGTH]-=s.length,t[CACHE].delete(s.key),t[LRU_LIST].removeNode(e)}};class Entry{constructor(t,e,s,i,h){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=h||0}}const forEachStep=(t,e,s,i)=>{let h=s.value;isStale(t,h)&&(del(t,s),t[ALLOW_STALE]||(h=void 0)),h&&e.call(i,h.value,h.key,t)};module.exports=LRUCache;

},{"yallist":231}],113:[function(require,module,exports){
function hasKey(t,o){var n=t;return o.slice(0,-1).forEach(function(t){n=n[t]||{}}),o[o.length-1]in n}function isNumber(t){return"number"==typeof t||(!!/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t))}module.exports=function(t,o){o||(o={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof o.unknown&&(n.unknownFn=o.unknown),"boolean"==typeof o.boolean&&o.boolean?n.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(t){n.bools[t]=!0});var e={};Object.keys(o.alias||{}).forEach(function(t){e[t]=[].concat(o.alias[t]),e[t].forEach(function(o){e[o]=[t].concat(e[t].filter(function(t){return o!==t}))})}),[].concat(o.string).filter(Boolean).forEach(function(t){n.strings[t]=!0,e[t]&&(n.strings[e[t]]=!0)});var r=o.default||{},s={_:[]};Object.keys(n.bools).forEach(function(t){a(t,void 0!==r[t]&&r[t])});var i=[];function a(t,o,r){if(!r||!n.unknownFn||function(t,o){return n.allBools&&/^--[^=]+$/.test(o)||n.strings[t]||n.bools[t]||e[t]}(t,r)||!1!==n.unknownFn(r)){var i=!n.strings[t]&&isNumber(o)?Number(o):o;l(s,t.split("."),i),(e[t]||[]).forEach(function(t){l(s,t.split("."),i)})}}function l(t,o,e){for(var r=t,s=0;s<o.length-1;s++){if("__proto__"===(i=o[s]))return;void 0===r[i]&&(r[i]={}),r[i]!==Object.prototype&&r[i]!==Number.prototype&&r[i]!==String.prototype||(r[i]={}),r[i]===Array.prototype&&(r[i]=[]),r=r[i]}var i;"__proto__"!==(i=o[o.length-1])&&(r!==Object.prototype&&r!==Number.prototype&&r!==String.prototype||(r={}),r===Array.prototype&&(r=[]),void 0===r[i]||n.bools[i]||"boolean"==typeof r[i]?r[i]=e:Array.isArray(r[i])?r[i].push(e):r[i]=[r[i],e])}function f(t){return e[t].some(function(t){return n.bools[t]})}-1!==t.indexOf("--")&&(i=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var c=0;c<t.length;c++){var u=t[c];if(/^--.+=/.test(u)){var p=u.match(/^--([^=]+)=([\s\S]*)$/),b=p[1],h=p[2];n.bools[b]&&(h="false"!==h),a(b,h,u)}else if(/^--no-.+/.test(u)){a(b=u.match(/^--no-(.+)/)[1],!1,u)}else if(/^--.+/.test(u)){b=u.match(/^--(.+)/)[1];void 0===(d=t[c+1])||/^-/.test(d)||n.bools[b]||n.allBools||e[b]&&f(b)?/^(true|false)$/.test(d)?(a(b,"true"===d,u),c++):a(b,!n.strings[b]||"",u):(a(b,d,u),c++)}else if(/^-[^-]+/.test(u)){for(var y=u.slice(1,-1).split(""),g=!1,v=0;v<y.length;v++){var d;if("-"!==(d=u.slice(v+2))){if(/[A-Za-z]/.test(y[v])&&/=/.test(d)){a(y[v],d.split("=")[1],u),g=!0;break}if(/[A-Za-z]/.test(y[v])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(d)){a(y[v],d,u),g=!0;break}if(y[v+1]&&y[v+1].match(/\W/)){a(y[v],u.slice(v+2),u),g=!0;break}a(y[v],!n.strings[y[v]]||"",u)}else a(y[v],d,u)}b=u.slice(-1)[0];g||"-"===b||(!t[c+1]||/^(-|--)[^-]/.test(t[c+1])||n.bools[b]||e[b]&&f(b)?t[c+1]&&/^(true|false)$/.test(t[c+1])?(a(b,"true"===t[c+1],u),c++):a(b,!n.strings[b]||"",u):(a(b,t[c+1],u),c++))}else if(n.unknownFn&&!1===n.unknownFn(u)||s._.push(n.strings._||!isNumber(u)?u:Number(u)),o.stopEarly){s._.push.apply(s._,t.slice(c+1));break}}return Object.keys(r).forEach(function(t){hasKey(s,t.split("."))||(l(s,t.split("."),r[t]),(e[t]||[]).forEach(function(o){l(s,o.split("."),r[t])}))}),o["--"]?(s["--"]=new Array,i.forEach(function(t){s["--"].push(t)})):i.forEach(function(t){s._.push(t)}),s};

},{}],114:[function(require,module,exports){
var through=require("through2"),split=require("split2"),EOL=require("os").EOL,stringify=require("json-stringify-safe");function parse(r){return(r=r||{}).strict=!1!==r.strict,split(function(e){try{if(e)return JSON.parse(e)}catch(i){r.strict&&this.emit("error",new Error("Could not parse row "+e.slice(0,50)+"..."))}},r)}function serialize(r){return through.obj(r,function(r,e,i){i(null,stringify(r)+EOL)})}module.exports=parse,module.exports.serialize=module.exports.stringify=serialize,module.exports.parse=parse;

},{"json-stringify-safe":98,"os":126,"split2":195,"through2":217}],115:[function(require,module,exports){
"use strict";var defaults={len:6,alphabet:"0123456789abcdefghijklmnopqrstuvwxyz",curses:["fuck","shit","piss","cunt","tits","nigger","nigga","cocksucker","motherfucker","frack","frak","bitch","asshole","whore","cock","twat","wank","slut","pussy"]},default_cursed=cursing(defaults.curses);function cursing(e){var t=Object.prototype.toString.call(e).substring(8);return"String]"==t&&(e=e.split(/\s*,\s*/)),Array.isArray(e)?function(t){for(var r=t.toLowerCase(),n=0;n<e.length;n++)if(-1!=r.indexOf(e[n]))return!0}:"Function]"==t?e:"RegExp]"==t?function(t){return!!t.match(e)}:function(){return!1}}function generate(e){var t=defaults.len,r=defaults.alphabet,n=default_cursed;e&&(t=e.length||e.len||t,r=e.alphabet||r,n=e.curses?cursing(e.curses):n);var a=null,s=r.length;do{for(var u=(new Date).getTime(),l=[],c=0;c<t;c++){var i=Math.floor(u*Math.random()%s);l.push(r[i])}a=l.join("")}while(n(a));return a}function make(e){e.len=e.len||e.length,["len","alphabet","curses"].forEach(function(t){e[t]=void 0===e[t]?defaults[t]:e[t]}),e.hex?e.alphabet="0123456789abcdef":e.HEX&&(e.alphabet="0123456789ABCDEF"),e.curses=e.exclude||e.curses;var t=function(){return generate(e)},r=e.curses;return delete e.curses,t.curses=(()=>r),t.len=e.len,t.alphabet=e.alphabet,t}function nid(){var e=arguments[0];if(e){var t=Object.prototype.toString.call(e).substring(8);return"Number]"===t?generate({len:e}):"Object]"===t?make(e):generate()}return generate()}nid.curses=(()=>defaults.curses),nid.len=defaults.len,nid.alphabet=defaults.alphabet,module.exports=nid;

},{}],116:[function(require,module,exports){
"use strict";function peg$subclass(r,n){function t(){this.constructor=r}t.prototype=n.prototype,r.prototype=new t}function peg$SyntaxError(r,n,t,e){this.message=r,this.expected=n,this.found=t,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(r,n){n=void 0!==n?n:{};var t,e={},u={start:Jr},o=Jr,c="{",a=qr("{",!1),i="}",f=qr("}",!1),l=function(r){return Qr.object=!!r,Qr},s=/^[ \t\r\n]/,h=Br([" ","\t","\r","\n"],!1,!1),p=",",g=qr(",",!1),d=function(r,n,t){Qr.push({name:r,type:n,mod:t})},A=/^[a-zA-Z]/,v=Br([["a","z"],["A","Z"]],!1,!1),x=/^[a-zA-Z0-9]/,C=Br([["a","z"],["A","Z"],["0","9"]],!1,!1),y=":",m=qr(":",!1),E=function(r,n){return r+n.join("")},S="?",$=qr("?",!1),b=function(){return"?"},w="*",F=qr("*",!1),z=function(){return"*"},R="+",U=qr("+",!1),Z=function(){return"+"},j="|",k=qr("|",!1),N=function(r){return{mark:r[0],or:r[1]}},Y=function(){return"."},M=function(){return"s"},T=function(){return"i"},q=function(){return"A"},B=function(){return"Y"},D=function(){return"n"},G=function(){return"b"},H=function(){return"f"},I=function(){return"a"},J=function(){return"r"},K=function(){return"d"},L=function(){return"g"},O=function(){return"e"},P=function(){return"N"},Q=function(){return"U"},V=function(){return"o"},W=".",X=qr(".",!1),_="s",rr=qr("s",!1),nr="i",tr=qr("i",!1),er="A",ur=qr("A",!1),or="Y",cr=qr("Y",!1),ar="n",ir=qr("n",!1),fr="b",lr=qr("b",!1),sr="f",hr=qr("f",!1),pr="a",gr=qr("a",!1),dr="r",Ar=qr("r",!1),vr="d",xr=qr("d",!1),Cr="g",yr=qr("g",!1),mr="e",Er=qr("e",!1),Sr="N",$r=qr("N",!1),br="U",wr=qr("U",!1),Fr="o",zr=qr("o",!1),Rr=/^[^}]/,Ur=Br(["}"],!0,!1),Zr=function(r){!function(r,n){throw n=void 0!==n?n:Gr(kr,jr),function(r,n){return new peg$SyntaxError(r,null,null,n)}(r,n)}('not a type character: "'+r+'"')},jr=0,kr=0,Nr=[{line:1,column:1}],Yr=0,Mr=[],Tr=0;if("startRule"in n){if(!(n.startRule in u))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=u[n.startRule]}function qr(r,n){return{type:"literal",text:r,ignoreCase:n}}function Br(r,n,t){return{type:"class",parts:r,inverted:n,ignoreCase:t}}function Dr(n){var t,e=Nr[n];if(e)return e;for(t=n-1;!Nr[t];)t--;for(e={line:(e=Nr[t]).line,column:e.column};t<n;)10===r.charCodeAt(t)?(e.line++,e.column=1):e.column++,t++;return Nr[n]=e,e}function Gr(r,n){var t=Dr(r),e=Dr(n);return{start:{offset:r,line:t.line,column:t.column},end:{offset:n,line:e.line,column:e.column}}}function Hr(r){jr<Yr||(jr>Yr&&(Yr=jr,Mr=[]),Mr.push(r))}function Ir(r,n,t){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,n),r,n,t)}function Jr(){var n,t,u,o,s,h,p,g;if(n=jr,(t=Kr())===e&&(t=null),t!==e)if(123===r.charCodeAt(jr)?(u=c,jr++):(u=e,0===Tr&&Hr(a)),u===e&&(u=null),u!==e)if((o=Kr())===e&&(o=null),o!==e)if(Or()!==e){for(s=[],h=jr,(p=Lr())===e&&(p=null),p!==e&&(g=Or())!==e?h=p=[p,g]:(jr=h,h=e);h!==e;)s.push(h),h=jr,(p=Lr())===e&&(p=null),p!==e&&(g=Or())!==e?h=p=[p,g]:(jr=h,h=e);s!==e?((h=Lr())===e&&(h=null),h!==e?(125===r.charCodeAt(jr)?(p=i,jr++):(p=e,0===Tr&&Hr(f)),p===e&&(p=null),p!==e?((g=Kr())===e&&(g=null),g!==e?(kr=n,n=t=l(u)):(jr=n,n=e)):(jr=n,n=e)):(jr=n,n=e)):(jr=n,n=e)}else jr=n,n=e;else jr=n,n=e;else jr=n,n=e;else jr=n,n=e;return n}function Kr(){var n;return s.test(r.charAt(jr))?(n=r.charAt(jr),jr++):(n=e,0===Tr&&Hr(h)),n}function Lr(){var n,t,u,o;return n=jr,(t=Kr())===e&&(t=null),t!==e?(44===r.charCodeAt(jr)?(u=p,jr++):(u=e,0===Tr&&Hr(g)),u===e&&(u=null),u!==e?((o=Kr())===e&&(o=null),o!==e?n=t=[t,u,o]:(jr=n,n=e)):(jr=n,n=e)):(jr=n,n=e),n}function Or(){var n,t,u,o;return n=jr,(t=function(){var n,t,u,o;n=jr,A.test(r.charAt(jr))?(t=r.charAt(jr),jr++):(t=e,0===Tr&&Hr(v));if(t!==e){for(u=[],x.test(r.charAt(jr))?(o=r.charAt(jr),jr++):(o=e,0===Tr&&Hr(C));o!==e;)u.push(o),x.test(r.charAt(jr))?(o=r.charAt(jr),jr++):(o=e,0===Tr&&Hr(C));u!==e?(58===r.charCodeAt(jr)?(o=y,jr++):(o=e,0===Tr&&Hr(m)),o!==e?(kr=n,t=E(t,u),n=t):(jr=n,n=e)):(jr=n,n=e)}else jr=n,n=e;return n}())===e&&(t=null),t!==e&&(u=function(){var n,t,u,o,c,a,i;if(n=jr,t=jr,(u=Pr())!==e){for(o=[],c=jr,124===r.charCodeAt(jr)?(a=j,jr++):(a=e,0===Tr&&Hr(k)),a!==e&&(i=Pr())!==e?c=a=[a,i]:(jr=c,c=e);c!==e;)o.push(c),c=jr,124===r.charCodeAt(jr)?(a=j,jr++):(a=e,0===Tr&&Hr(k)),a!==e&&(i=Pr())!==e?c=a=[a,i]:(jr=c,c=e);o!==e?t=u=[u,o]:(jr=t,t=e)}else jr=t,t=e;t!==e&&(kr=n,t=N(t));return n=t}())!==e?((o=function(){var n,t;n=jr,63===r.charCodeAt(jr)?(t=S,jr++):(t=e,0===Tr&&Hr($));t!==e&&(kr=n,t=b());(n=t)===e&&(n=jr,42===r.charCodeAt(jr)?(t=w,jr++):(t=e,0===Tr&&Hr(F)),t!==e&&(kr=n,t=z()),(n=t)===e&&(n=jr,43===r.charCodeAt(jr)?(t=R,jr++):(t=e,0===Tr&&Hr(U)),t!==e&&(kr=n,t=Z()),n=t));return n}())===e&&(o=null),o!==e?(kr=n,n=t=d(t,u,o)):(jr=n,n=e)):(jr=n,n=e),n}function Pr(){var n,t;return n=jr,(t=function(){var n;46===r.charCodeAt(jr)?(n=W,jr++):(n=e,0===Tr&&Hr(X));return n}())!==e&&(kr=n,t=Y()),(n=t)===e&&(n=jr,(t=function(){var n;115===r.charCodeAt(jr)?(n=_,jr++):(n=e,0===Tr&&Hr(rr));return n}())!==e&&(kr=n,t=M()),(n=t)===e&&(n=jr,(t=function(){var n;105===r.charCodeAt(jr)?(n=nr,jr++):(n=e,0===Tr&&Hr(tr));return n}())!==e&&(kr=n,t=T()),(n=t)===e&&(n=jr,(t=function(){var n;65===r.charCodeAt(jr)?(n=er,jr++):(n=e,0===Tr&&Hr(ur));return n}())!==e&&(kr=n,t=q()),(n=t)===e&&(n=jr,(t=function(){var n;89===r.charCodeAt(jr)?(n=or,jr++):(n=e,0===Tr&&Hr(cr));return n}())!==e&&(kr=n,t=B()),(n=t)===e&&(n=jr,(t=function(){var n;110===r.charCodeAt(jr)?(n=ar,jr++):(n=e,0===Tr&&Hr(ir));return n}())!==e&&(kr=n,t=D()),(n=t)===e&&(n=jr,(t=function(){var n;98===r.charCodeAt(jr)?(n=fr,jr++):(n=e,0===Tr&&Hr(lr));return n}())!==e&&(kr=n,t=G()),(n=t)===e&&(n=jr,(t=function(){var n;102===r.charCodeAt(jr)?(n=sr,jr++):(n=e,0===Tr&&Hr(hr));return n}())!==e&&(kr=n,t=H()),(n=t)===e&&(n=jr,(t=function(){var n;97===r.charCodeAt(jr)?(n=pr,jr++):(n=e,0===Tr&&Hr(gr));return n}())!==e&&(kr=n,t=I()),(n=t)===e&&(n=jr,(t=function(){var n;114===r.charCodeAt(jr)?(n=dr,jr++):(n=e,0===Tr&&Hr(Ar));return n}())!==e&&(kr=n,t=J()),(n=t)===e&&(n=jr,(t=function(){var n;100===r.charCodeAt(jr)?(n=vr,jr++):(n=e,0===Tr&&Hr(xr));return n}())!==e&&(kr=n,t=K()),(n=t)===e&&(n=jr,(t=function(){var n;103===r.charCodeAt(jr)?(n=Cr,jr++):(n=e,0===Tr&&Hr(yr));return n}())!==e&&(kr=n,t=L()),(n=t)===e&&(n=jr,(t=function(){var n;101===r.charCodeAt(jr)?(n=mr,jr++):(n=e,0===Tr&&Hr(Er));return n}())!==e&&(kr=n,t=O()),(n=t)===e&&(n=jr,(t=function(){var n;78===r.charCodeAt(jr)?(n=Sr,jr++):(n=e,0===Tr&&Hr($r));return n}())!==e&&(kr=n,t=P()),(n=t)===e&&(n=jr,(t=function(){var n;85===r.charCodeAt(jr)?(n=br,jr++):(n=e,0===Tr&&Hr(wr));return n}())!==e&&(kr=n,t=Q()),(n=t)===e&&(n=jr,(t=function(){var n;111===r.charCodeAt(jr)?(n=Fr,jr++):(n=e,0===Tr&&Hr(zr));return n}())!==e&&(kr=n,t=V()),(n=t)===e&&(n=function(){var n,t;n=jr,Rr.test(r.charAt(jr))?(t=r.charAt(jr),jr++):(t=e,0===Tr&&Hr(Ur));t!==e&&(kr=n,t=Zr(t));return n=t}())))))))))))))))),n}var Qr=[];if((t=o())!==e&&jr===r.length)return t;throw t!==e&&jr<r.length&&Hr({type:"end"}),Ir(Mr,Yr<r.length?r.charAt(Yr):null,Yr<r.length?Gr(Yr,Yr+1):Gr(Yr,Yr))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,n){var t={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var n,t="";for(n=0;n<r.parts.length;n++)t+=r.parts[n]instanceof Array?o(r.parts[n][0])+"-"+o(r.parts[n][1]):o(r.parts[n]);return"["+(r.inverted?"^":"")+t+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function o(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}return"Expected "+function(r){var n,e,u,o=new Array(r.length);for(n=0;n<r.length;n++)o[n]=(u=r[n],t[u.type](u));if(o.sort(),o.length>0){for(n=1,e=1;n<o.length;n++)o[n-1]!==o[n]&&(o[e]=o[n],e++);o.length=e}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(r)+" but "+function(r){return r?'"'+u(r)+'"':"end of input"}(n)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};

},{}],117:[function(require,module,exports){
"use strict";var util=require("util"),_={};_.isNaN=require("lodash.isnan"),_.isRegExp=require("lodash.isregexp"),_.isDate=require("lodash.isdate"),_.isArguments=require("lodash.isarguments");var error=require("eraro")({package:"norma"}),parser=require("./norma-parser"),defopts={onfail:"throw",desclen:33},specmap={};function compile(e){if(null==e)throw error("no_spec","no argument specification");var r=specmap[e];if(null!=r)return r;var s=parse_spec(e),n=[],t=1,o=["^"],p=0;s.forEach(function(e){if(o.push("("),e.type.or&&0<e.type.or.length){var r=1;o.push("("),o.push(e.type.mark),o.push(")"),e.type.or.forEach(function(e){o.push("|"),o.push("("),o.push(e[1]),r++,o.push(")")}),"?"==e.mod&&o.push("|[UNA]?"),n[p]={index:t},t+=r}else"?"==e.mod?o.push("[UNA"+e.type.mark+"]?"):(o.push(e.type.mark),o.push(e.mod||"")),n[p]={index:t};n[p].mod=e.mod,o.push(")"),t++,p++}),o.push("$");var i=new RegExp(o.join(""));return r=specmap[e]={re:i,spec:e,respec:s,reindex:n}}function parse_spec(e){try{return parser.parse(e)}catch(r){throw error("parse",r.message+'; spec:"'+e+'", col:'+r.location.start.column+", line:"+r.location.start.line)}}function processargs(e,r,s){var n=Array.prototype.slice.call(s||[]),t=describe(n),o=e.re.exec(t);if(!o){if("throw"==r.onfail)throw error("invalid_arguments",'invalid arguments; expected: "'+e.spec+'", was: ['+t+"]; values: "+descargs(n,r),{args:n,specdef:e,options:r});return null}for(var p=e.respec.object?{}:[],i=0,u=0,a=0;i<e.reindex.length;i++){var c=e.reindex[i],l=void 0;if(e.respec.object||(p[a]=l),null!=c.index){var h=o[c.index];if(""!==h){var d=e.respec[i].name,f="*"===e.respec[i].mod,m="+"===e.respec[i].mod;if(0===h.length&&m)throw error("invalid_arguments",'invalid arguments; expected: "'+e.spec+'", was: ['+t+"]; values: "+descargs(n,r),{args:n,specdef:e,options:r});if(1==h.length)l=n[u],u++,e.respec.object||(p[a]=l),null!=d&&(f||m?(p[d]=p[d]||[]).push(l):p[e.respec[i].name]=l),a++;else if(1<h.length)for(var g=0;g<h.length;g++)l=n[u],u++,e.respec.object||(p[a]=l),null!=d&&(p[d]=p[d]||[]).push(l),a++}else e.respec.object||(p[a]=void 0),a++}}return p}function describe(e){var r=[];return e.forEach(function(e){"string"==typeof e?r.push("s"):isNaN(e)||(0|e)!==parseFloat(e)?_.isNaN(e)?r.push("A"):1/0===e?r.push("Y"):"number"==typeof e?r.push("n"):"boolean"==typeof e?r.push("b"):"function"==typeof e?r.push("f"):Array.isArray(e)?r.push("a"):_.isRegExp(e)?r.push("r"):_.isDate(e)?r.push("d"):_.isArguments(e)?r.push("g"):util.isError(e)?r.push("e"):null===e?r.push("N"):void 0===e?r.push("U"):"object"==typeof e?r.push("o"):r.push("q"):r.push("i")}),r.join("")}function descargs(e,r){var s=[];return e.forEach(function(e){var n=util.inspect(e).substring(0,r.desclen);s.push(n)}),s}function handle(e,r,s){if((_.isArguments(r)||Array.isArray(r))&&(s=r,r=null),r=null==r?defopts:Object.assign({},defopts,r),null==s)throw error("init",'no arguments variable; expected norma( "...", arguments ), or <compiled>( arguments )',{arguments:arguments});return processargs(e,r,s)}module.exports=function(e,r,s){return handle(compile(e),r,s)},module.exports.compile=function(e){var r=compile(e),s=function(e,s){return handle(r,e,s)};return s.toString=function(){return util.inspect({spec:r.spec,re:""+r.re})},s};

},{"./norma-parser":116,"eraro":56,"lodash.isarguments":104,"lodash.isdate":105,"lodash.isnan":106,"lodash.isregexp":107,"util":228}],118:[function(require,module,exports){
"use strict";function Nua(e,r,t){var l=(t=t||{}).depth||Number.MAX_VALUE,o=t.setter,n=!!t.preserve;"object"==typeof e&&"object"==typeof r&&function e(r,t,u){if(null==r||null==t||l<=u)return;var a=u+1;if(Array.isArray(r)&&Array.isArray(t)){for(var f=0;f<r.length;f++)"object"==typeof r[f]?e(r[f],t[f],a):o?o(r,f,t[f]):r[f]=t[f];for(;f<t.length;f++)o?o(r,f,t[f]):r[f]=t[f];r.splice(t.length)}else{for(var y=Object.keys(r),c=0;c<y.length;c++){var s=r[y[c]],i=t[y[c]],p=null===s?"null":typeof s,b=null===i?"null":typeof i;"object"===p&&"object"===b?e(s,i,a):void 0===i?n||delete r[y[c]]:o?o(r,y[c],i):r[y[c]]=i}for(var v=Object.keys(t),j=0;j<v.length;j++)void 0===r[v[j]]&&(o?(o(r,v[j],t[v[j]]),null==t[v[j]]||!Array.isArray(t[v[j]])&&"object"!=typeof t[v[j]]||e(r[v[j]],t[v[j]],a)):r[v[j]]=t[v[j]])}}(e,r,0)}module.exports=Nua;

},{}],119:[function(require,module,exports){
"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){for(var s in t=Object(arguments[a]))hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],120:[function(require,module,exports){
"use strict";var CreateDataProperty=require("es-abstract/2019/CreateDataProperty"),IsCallable=require("es-abstract/2019/IsCallable"),RequireObjectCoercible=require("es-abstract/2019/RequireObjectCoercible"),ToObject=require("es-abstract/2019/ToObject"),callBound=require("es-abstract/helpers/callBound"),$gOPD=Object.getOwnPropertyDescriptor,$getOwnNames=Object.getOwnPropertyNames,$getSymbols=Object.getOwnPropertySymbols,$concat=callBound("Array.prototype.concat"),$reduce=callBound("Array.prototype.reduce"),getAll=$getSymbols?function(e){return $concat($getOwnNames(e),$getSymbols(e))}:$getOwnNames,isES5=IsCallable($gOPD)&&IsCallable($getOwnNames);module.exports=function(e){if(RequireObjectCoercible(e),!isES5)throw new TypeError("getOwnPropertyDescriptors requires Object.getOwnPropertyDescriptor");var r=ToObject(e);return $reduce(getAll(r),function(e,t){var a=$gOPD(r,t);return void 0!==a&&CreateDataProperty(e,t,a),e},{})};

},{"es-abstract/2019/CreateDataProperty":57,"es-abstract/2019/IsCallable":60,"es-abstract/2019/RequireObjectCoercible":66,"es-abstract/2019/ToObject":69,"es-abstract/helpers/callBound":78}],121:[function(require,module,exports){
"use strict";var define=require("define-properties"),implementation=require("./implementation"),getPolyfill=require("./polyfill"),shim=require("./shim");define(implementation,{getPolyfill:getPolyfill,implementation:implementation,shim:shim}),module.exports=implementation;

},{"./implementation":120,"./polyfill":122,"./shim":123,"define-properties":52}],122:[function(require,module,exports){
"use strict";var implementation=require("./implementation");module.exports=function(){return"function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:implementation};

},{"./implementation":120}],123:[function(require,module,exports){
"use strict";var getPolyfill=require("./polyfill"),define=require("define-properties");module.exports=function(){var e=getPolyfill();return define(Object,{getOwnPropertyDescriptors:e},{getOwnPropertyDescriptors:function(){return Object.getOwnPropertyDescriptors!==e}}),e};

},{"./polyfill":122,"define-properties":52}],124:[function(require,module,exports){
"use strict";var Joi=require("@hapi/joi"),Hoek=require("@hapi/hoek");function make_optioner(r,e){var n=e||{};n.allow_unknown=null==n.allow_unknown||!!n.allow_unknown;var a={arrpaths:[]},o=prepare_spec(r,n,a),t=Joi.compile(o);function i(r,e){var n=Hoek.clone(r)||{};n=arr2obj(n,a);var o=t.validate(n);return o.error||(o.value=obj2arr(o.value,a)),null==e?o:e(o.error,o.value)}return i.check=function(r){var e=i(r);if(e.error)throw e.error;return e.value},i.joi=o,i}function prepare_spec(r,e,n){var a=Joi.object();return e.allow_unknown&&(a=a.unknown()),walk(a,r,"",e,n,function(r){if(r&&Joi.isSchema(r))return r;var n=typeof r;return e.must_match_literals?Joi.any().required().valid(r):void 0===r?Joi.any().optional():null==r?Joi.any().default(null):"number"===n&&Number.isInteger(r)?Joi.number().integer().default(r):"string"===n?Joi.string().empty("").default(()=>r):Joi[n]().default(()=>r)})}function walk(r,e,n,a,o,t){for(var i in Array.isArray(e)&&o.arrpaths.push(n),e){var u=e[i],l=typeof u,s={};if(null==u||Joi.isSchema(u)||"object"!==l)s[i]=t(u);else{var f=""===n?i:n+"."+i,p=Joi.object().default();a.allow_unknown&&(p=p.unknown()),s[i]=walk(p,u,f,a,o,t)}r=r.keys(s)}return r}function inject(r,e,n){var a=n;if(null==n)return n;for(var o=("string"==typeof r?r:"").split("."),t=0;t<o.length-1;++t){var i=n[o[t]];null==i&&(i=n[o[t]]=isNaN(parseInt(o[t+1],10))?{}:[]),n=i}return""===o[t]?a=e:n[o[t]]=e,a}function arr2obj(r,e){if(null==r)return r;for(var n=0;n<e.arrpaths.length;++n){var a=e.arrpaths[n],o=""===a?r:Hoek.reach(r,a);if(Array.isArray(o)){for(var t={},i=0;i<o.length;++i)t[i]=o[i];r=inject(a,t,r)}}return r}function obj2arr(r,e){if(null==r)return r;for(var n=0;n<e.arrpaths.length;++n){var a=e.arrpaths[n],o=""===a?r:Hoek.reach(r,a);if(!Array.isArray(o)){var t=[];for(var i in o){var u=parseInt(i,10);!isNaN(u)&&0<=u&&(t[u]=o[i])}r=inject(a,t,r)}}return r}module.exports=function(r,e){return make_optioner(r,e)},module.exports.Joi=Joi,module.exports.inject=inject,module.exports.arr2obj=arr2obj,module.exports.obj2arr=obj2arr;

},{"@hapi/hoek":17,"@hapi/joi":28}],125:[function(require,module,exports){
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,a){void 0===a&&(a=r),Object.defineProperty(t,a,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,a){void 0===a&&(a=r),t[a]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyOrdu=exports.Ordu=void 0;const events_1=require("events"),Hoek=__importStar(require("@hapi/hoek")),nua_1=__importDefault(require("nua"));let Task=(()=>{class t{constructor(e){this.runid=null==e.id?(""+Math.random()).substring(2):e.id,this.name=e.name||"task"+t.count++,this.before=e.before,this.after=e.after,this.exec=e.exec||(t=>{}),this.if=e.if||void 0,this.active=null==e.active||e.active,this.meta=Object.assign(e.meta||{},{when:Date.now(),from:e.from||{callpoint:make_callpoint(new Error)}})}}return t.count=0,t})();class TaskResult{constructor(t,e,r,a){this.op="not-defined",this.task=t,this.name=t.name,this.start=Date.now(),this.end=Number.MAX_SAFE_INTEGER,this.index=e,this.total=r,this.async=!1,this.runid=a}update(t){t=null==t?{}:t,this.out=null==t.out?{}:t.out,this.err=t instanceof Error?t:t.err,this.op=null!=this.err?"stop":"string"==typeof t.op?t.op:"next",this.why=t.why||""}}class Ordu extends events_1.EventEmitter{constructor(t){super(),this.task={},this._opts={debug:!1,...t},this._tasks=[],this._operator_map={next:()=>({stop:!1}),skip:()=>({stop:!1}),stop:(t,e,r)=>(nua_1.default(r,t.out,{preserve:!0}),{stop:!0,err:t.err}),merge:(t,e,r)=>(nua_1.default(r,t.out,{preserve:!0}),{stop:!1})}}operator(t,e){let r="string"==typeof t?t:t.name;this._operator_map[r]=e||t}operators(){return this._operator_map}add(t,e){if("function"==typeof t){let r=e=e||{};r.exec=t,r.name=t.name?t.name:r.name,this._add_task(r)}else if(Array.isArray(t))for(var r=0;r<t.length;r++){let e=t[r];"function"==typeof t[r]&&(e={name:t[r].name,exec:t[r]}),this._add_task(e)}else this._add_task(t);return this}_add_task(t){let e=new Task(t),r=0;for(;r<this._tasks.length&&(null==e.before||this._tasks[r].name!==e.before);r++)if(null!=e.after&&this._tasks[r].name===e.after){r++;break}this._tasks.splice(r,0,e),this.task[e.name]=e}async exec(t,e,r){let a=(r=null==r?{}:r).runid||(Math.random()+"").substring(2),n=Date.now(),s=[...this._tasks],i={ctx:t||{},data:e||{}},o={stop:!1,err:void 0,async:!1},u=[],c=0,l=0;for(;l<s.length;l++){let t=s[l],e=null,r=new TaskResult(t,l,s.length,a);if(t.active&&this._task_if(t,i.data))try{c++;let a=Object.assign({task:t},i);(e=t.exec(a))instanceof Promise&&(r.async=!0,e=await e)}catch(t){e=t}else e={op:"skip"};r.end=Date.now(),r.update(e),this.emit("task-result",r);try{(o=this._operate(r,i.ctx,i.data))instanceof Promise?(o=await o).async=!0:o.async=!1,o.err=o.err||void 0}catch(t){o={stop:!0,err:t,async:!1}}let n={name:t.name,op:r.op,task:t,result:r,operate:o,data:this._opts.debug?JSON.parse(JSON.stringify(i.data)):void 0};if(u.push(n),this.emit("task-end",n),o.stop)break}let d={tasklog:u,task:o.err?s[l]:void 0,task_count:c,task_total:s.length,start:n,end:Date.now(),err:o.err,data:i.data};return r.done&&r.done(d),d}tasks(){return[...this._tasks]}_operate(t,e,r){if(t.err)return{stop:!0,err:t.err,async:!1};let a=this._operator_map[t.op];return a?a(t,e,r):{stop:!0,err:new Error("Unknown operation: "+t.op),async:!1}}_task_if(t,e){if(t.if){let r=t.if;return Object.keys(r).reduce((t,a)=>{let n=Hoek.reach(e,a);return t&&Hoek.contain({$:n},{$:r[a]},{deep:!0})},!0)}return!0}}function make_callpoint(t){return null==t?[]:(t.stack||"").split(/\n/).slice(4).map(t=>t.substring(4))}function LegacyOrdu(t){var e={};(t=t||{}).name=t.name||"ordu0",e.add=function(a,n){(n=n||a).name||Object.defineProperty(n,"name",{value:t.name+"_task"+r.length});return n.tags=a.tags||[],r.push(n),e},e.process=function(){var t=arguments.length,e=0<t&&arguments[--t],a=0<t&&arguments[--t],n=0<t&&arguments[--t];e=e||{},a=a||{},(n=n||{}).tags=n.tags||[];for(var s=0;s<r.length;++s){var i=r[s];if(!(0<n.tags.length)||contains(i.tags,n.tags)){var o=s,u=i.name;a.index$=o,a.taskname$=u;var c=i(a,e);if(c)return c.index$=o,c.taskname$=u,c.ctxt$=a,c.data$=e,c}}return null},e.tasknames=function(){return r.map(function(t){return t.name})},e.taskdetails=function(){return r.map(function(t){return t.name+":{tags:"+t.tags+"}"})},e.toString=function(){return t.name+":["+e.tasknames()+"]"};var r=[];return e}function contains(t,e){for(var r=0;r<e.length;++r)if(-1===t.indexOf(e[r]))return!1;return!0}exports.Ordu=Ordu,exports.LegacyOrdu=LegacyOrdu;

},{"@hapi/hoek":17,"events":82,"nua":118}],126:[function(require,module,exports){
exports.endianness=function(){return"LE"},exports.hostname=function(){return"undefined"!=typeof location?location.hostname:""},exports.loadavg=function(){return[]},exports.uptime=function(){return 0},exports.freemem=function(){return Number.MAX_VALUE},exports.totalmem=function(){return Number.MAX_VALUE},exports.cpus=function(){return[]},exports.type=function(){return"Browser"},exports.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},exports.networkInterfaces=exports.getNetworkInterfaces=function(){return{}},exports.arch=function(){return"javascript"},exports.platform=function(){return"browser"},exports.tmpdir=exports.tmpDir=function(){return"/tmp"},exports.EOL="\n",exports.homedir=function(){return"/"};

},{}],127:[function(require,module,exports){
"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function _has(r,t){return Object.prototype.hasOwnProperty.call(r,t)}exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)_has(e,n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)r.set(t.subarray(e,e+n),a);else for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);

},{}],128:[function(require,module,exports){
"use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){o-=u=o>2e3?2e3:o;do{l=l+(d=d+r[t++]|0)|0}while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;

},{}],129:[function(require,module,exports){
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};

},{}],130:[function(require,module,exports){
"use strict";function makeTable(){for(var r,a=[],c=0;c<256;c++){r=c;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}var crcTable=makeTable();function crc32(r,a,c,e){var o=crcTable,t=e+c;r^=-1;for(var n=e;n<t;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}module.exports=crc32;

},{}],131:[function(require,module,exports){
"use strict";var configuration_table,utils=require("../utils/common"),trees=require("./trees"),adler32=require("./adler32"),crc32=require("./crc32"),msg=require("./messages"),Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(t,e){return t.msg=msg[e],e}function rank(t){return(t<<1)-(t>4?9:0)}function zero(t){for(var e=t.length;--e>=0;)t[e]=0}function flush_pending(t){var e=t.state,_=e.pending;_>t.avail_out&&(_=t.avail_out),0!==_&&(utils.arraySet(t.output,e.pending_buf,e.pending_out,_,t.next_out),t.next_out+=_,e.pending_out+=_,t.total_out+=_,t.avail_out-=_,e.pending-=_,0===e.pending&&(e.pending_out=0))}function flush_block_only(t,e){trees._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,flush_pending(t.strm)}function put_byte(t,e){t.pending_buf[t.pending++]=e}function putShortMSB(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function read_buf(t,e,_,a){var s=t.avail_in;return s>a&&(s=a),0===s?0:(t.avail_in-=s,utils.arraySet(e,t.input,t.next_in,s,_),1===t.state.wrap?t.adler=adler32(t.adler,e,s,_):2===t.state.wrap&&(t.adler=crc32(t.adler,e,s,_)),t.next_in+=s,t.total_in+=s,s)}function longest_match(t,e){var _,a,s=t.max_chain_length,i=t.strstart,n=t.prev_length,r=t.nice_match,l=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,h=t.window,o=t.w_mask,d=t.prev,u=t.strstart+MAX_MATCH,f=h[i+n-1],E=h[i+n];t.prev_length>=t.good_match&&(s>>=2),r>t.lookahead&&(r=t.lookahead);do{if(h[(_=e)+n]===E&&h[_+n-1]===f&&h[_]===h[i]&&h[++_]===h[i+1]){i+=2,_++;do{}while(h[++i]===h[++_]&&h[++i]===h[++_]&&h[++i]===h[++_]&&h[++i]===h[++_]&&h[++i]===h[++_]&&h[++i]===h[++_]&&h[++i]===h[++_]&&h[++i]===h[++_]&&i<u);if(a=MAX_MATCH-(u-i),i=u-MAX_MATCH,a>n){if(t.match_start=e,n=a,a>=r)break;f=h[i+n-1],E=h[i+n]}}}while((e=d[e&o])>l&&0!=--s);return n<=t.lookahead?n:t.lookahead}function fill_window(t){var e,_,a,s,i,n=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-MIN_LOOKAHEAD)){utils.arraySet(t.window,t.window,n,n,0),t.match_start-=n,t.strstart-=n,t.block_start-=n,e=_=t.hash_size;do{a=t.head[--e],t.head[e]=a>=n?a-n:0}while(--_);e=_=n;do{a=t.prev[--e],t.prev[e]=a>=n?a-n:0}while(--_);s+=n}if(0===t.strm.avail_in)break;if(_=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=_,t.lookahead+t.insert>=MIN_MATCH)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+MIN_MATCH-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&0!==t.strm.avail_in)}function deflate_stored(t,e){var _=65535;for(_>t.pending_buf_size-5&&(_=t.pending_buf_size-5);;){if(t.lookahead<=1){if(fill_window(t),0===t.lookahead&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+_;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE;if(t.strstart-t.block_start>=t.w_size-MIN_LOOKAHEAD&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):(t.strstart>t.block_start&&(flush_block_only(t,!1),t.strm.avail_out),BS_NEED_MORE)}function deflate_fast(t,e){for(var _,a;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==_&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_)),t.match_length>=MIN_MATCH)if(a=trees._tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(t,e){for(var _,a,s;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,0!==_&&t.prev_length<t.max_lazy_match&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-MIN_MATCH,a=trees._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}else if(t.match_available){if((a=trees._tr_tally(t,0,t.window[t.strstart-1]))&&flush_block_only(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=trees._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(t,e){for(var _,a,s,i,n=t.window;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(a=n[s=t.strstart-1])===n[++s]&&a===n[++s]&&a===n[++s]){i=t.strstart+MAX_MATCH;do{}while(a===n[++s]&&a===n[++s]&&a===n[++s]&&a===n[++s]&&a===n[++s]&&a===n[++s]&&a===n[++s]&&a===n[++s]&&s<i);t.match_length=MAX_MATCH-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(_=trees._tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(t,e){for(var _;;){if(0===t.lookahead&&(fill_window(t),0===t.lookahead)){if(e===Z_NO_FLUSH)return BS_NEED_MORE;break}if(t.match_length=0,_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(t,e,_,a,s){this.good_length=t,this.max_lazy=e,this.nice_length=_,this.max_chain=a,this.func=s}function lm_init(t){t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(2*HEAP_SIZE),this.dyn_dtree=new utils.Buf16(2*(2*D_CODES+1)),this.bl_tree=new utils.Buf16(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?INIT_STATE:BUSY_STATE,t.adler=2===e.wrap?0:1,e.last_flush=Z_NO_FLUSH,trees._tr_init(e),Z_OK):err(t,Z_STREAM_ERROR)}function deflateReset(t){var e=deflateResetKeep(t);return e===Z_OK&&lm_init(t.state),e}function deflateSetHeader(t,e){return t&&t.state?2!==t.state.wrap?Z_STREAM_ERROR:(t.state.gzhead=e,Z_OK):Z_STREAM_ERROR}function deflateInit2(t,e,_,a,s,i){if(!t)return Z_STREAM_ERROR;var n=1;if(e===Z_DEFAULT_COMPRESSION&&(e=6),a<0?(n=0,a=-a):a>15&&(n=2,a-=16),s<1||s>MAX_MEM_LEVEL||_!==Z_DEFLATED||a<8||a>15||e<0||e>9||i<0||i>Z_FIXED)return err(t,Z_STREAM_ERROR);8===a&&(a=9);var r=new DeflateState;return t.state=r,r.strm=t,r.wrap=n,r.gzhead=null,r.w_bits=a,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=s+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+MIN_MATCH-1)/MIN_MATCH),r.window=new utils.Buf8(2*r.w_size),r.head=new utils.Buf16(r.hash_size),r.prev=new utils.Buf16(r.w_size),r.lit_bufsize=1<<s+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new utils.Buf8(r.pending_buf_size),r.d_buf=1*r.lit_bufsize,r.l_buf=3*r.lit_bufsize,r.level=e,r.strategy=i,r.method=_,deflateReset(t)}function deflateInit(t,e){return deflateInit2(t,e,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(t,e){var _,a,s,i;if(!t||!t.state||e>Z_BLOCK||e<0)return t?err(t,Z_STREAM_ERROR):Z_STREAM_ERROR;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===FINISH_STATE&&e!==Z_FINISH)return err(t,0===t.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(a.strm=t,_=a.last_flush,a.last_flush=e,a.status===INIT_STATE)if(2===a.wrap)t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead?(put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,255&a.gzhead.time),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,255&a.gzhead.extra.length),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE):(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE);else{var n=Z_DEFLATED+(a.w_bits-8<<4)<<8;n|=(a.strategy>=Z_HUFFMAN_ONLY||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(n|=PRESET_DICT),n+=31-n%31,a.status=BUSY_STATE,putShortMSB(a,n),0!==a.strstart&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),t.adler=1}if(a.status===EXTRA_STATE)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending!==a.pending_buf_size));)put_byte(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=NAME_STATE)}else a.status=NAME_STATE;if(a.status===NAME_STATE)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){i=1;break}i=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,put_byte(a,i)}while(0!==i);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===i&&(a.gzindex=0,a.status=COMMENT_STATE)}else a.status=COMMENT_STATE;if(a.status===COMMENT_STATE)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){i=1;break}i=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,put_byte(a,i)}while(0!==i);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===i&&(a.status=HCRC_STATE)}else a.status=HCRC_STATE;if(a.status===HCRC_STATE&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&flush_pending(t),a.pending+2<=a.pending_buf_size&&(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),t.adler=0,a.status=BUSY_STATE)):a.status=BUSY_STATE),0!==a.pending){if(flush_pending(t),0===t.avail_out)return a.last_flush=-1,Z_OK}else if(0===t.avail_in&&rank(e)<=rank(_)&&e!==Z_FINISH)return err(t,Z_BUF_ERROR);if(a.status===FINISH_STATE&&0!==t.avail_in)return err(t,Z_BUF_ERROR);if(0!==t.avail_in||0!==a.lookahead||e!==Z_NO_FLUSH&&a.status!==FINISH_STATE){var r=a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,e):a.strategy===Z_RLE?deflate_rle(a,e):configuration_table[a.level].func(a,e);if(r!==BS_FINISH_STARTED&&r!==BS_FINISH_DONE||(a.status=FINISH_STATE),r===BS_NEED_MORE||r===BS_FINISH_STARTED)return 0===t.avail_out&&(a.last_flush=-1),Z_OK;if(r===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?trees._tr_align(a):e!==Z_BLOCK&&(trees._tr_stored_block(a,0,0,!1),e===Z_FULL_FLUSH&&(zero(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),0===t.avail_out))return a.last_flush=-1,Z_OK}return e!==Z_FINISH?Z_OK:a.wrap<=0?Z_STREAM_END:(2===a.wrap?(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,255&t.total_in),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?Z_OK:Z_STREAM_END)}function deflateEnd(t){var e;return t&&t.state?(e=t.state.status)!==INIT_STATE&&e!==EXTRA_STATE&&e!==NAME_STATE&&e!==COMMENT_STATE&&e!==HCRC_STATE&&e!==BUSY_STATE&&e!==FINISH_STATE?err(t,Z_STREAM_ERROR):(t.state=null,e===BUSY_STATE?err(t,Z_DATA_ERROR):Z_OK):Z_STREAM_ERROR}function deflateSetDictionary(t,e){var _,a,s,i,n,r,l,h,o=e.length;if(!t||!t.state)return Z_STREAM_ERROR;if(2===(i=(_=t.state).wrap)||1===i&&_.status!==INIT_STATE||_.lookahead)return Z_STREAM_ERROR;for(1===i&&(t.adler=adler32(t.adler,e,o,0)),_.wrap=0,o>=_.w_size&&(0===i&&(zero(_.head),_.strstart=0,_.block_start=0,_.insert=0),h=new utils.Buf8(_.w_size),utils.arraySet(h,e,o-_.w_size,_.w_size,0),e=h,o=_.w_size),n=t.avail_in,r=t.next_in,l=t.input,t.avail_in=o,t.next_in=0,t.input=e,fill_window(_);_.lookahead>=MIN_MATCH;){a=_.strstart,s=_.lookahead-(MIN_MATCH-1);do{_.ins_h=(_.ins_h<<_.hash_shift^_.window[a+MIN_MATCH-1])&_.hash_mask,_.prev[a&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=a,a++}while(--s);_.strstart=a,_.lookahead=MIN_MATCH-1,fill_window(_)}return _.strstart+=_.lookahead,_.block_start=_.strstart,_.insert=_.lookahead,_.lookahead=0,_.match_length=_.prev_length=MIN_MATCH-1,_.match_available=0,t.next_in=r,t.input=l,t.avail_in=n,_.wrap=i,Z_OK}configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=deflateInit,exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=deflateSetHeader,exports.deflate=deflate,exports.deflateEnd=deflateEnd,exports.deflateSetDictionary=deflateSetDictionary,exports.deflateInfo="pako deflate (from Nodeca project)";

},{"../utils/common":127,"./adler32":128,"./crc32":130,"./messages":135,"./trees":136}],132:[function(require,module,exports){
"use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(u>>>=x=_>>>24,v-=x,0===(x=_>>>16&255))E[d++]=65535&_;else{if(!(16&x)){if(0==(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,(x&=15)&&(v<x&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(u>>>=x=_>>>24,v-=x,!(16&(x=_>>>16&255))){if(0==(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,v<(x&=15)&&(u+=p[a++]<<v,(v+=8)<x&&(u+=p[a++]<<v,v+=8)),(A+=u&(1<<x)-1)>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,A>(x=d-n)){if((x=A-x)>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}else if(b<x){if(B+=f+b-x,(x-=b)<g){g-=x;do{E[d++]=c[B++]}while(--x);if(B=0,b<g){g-=x=b;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}}else if(B+=b-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do{E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3}while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(a<t&&d<l);a-=g=v>>3,u&=(1<<(v-=g<<3))-1,i.next_in=a,i.next_out=d,i.avail_in=a<t?t-a+5:5-(a-t),i.avail_out=d<l?l-d+257:257-(d-l),o.hold=u,o.bits=v};

},{}],133:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS;function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,(a=inflateReset2(e,t))!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}var lenfix,distfix,virgin=!0;function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((n=s.wsize-s.wnext)>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),(i-=n)?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,_,k,m,w,u,R,T,D,g,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;(a=e.state).mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,g=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(f-=4,D=8+(15&(d>>>=4)),0===a.wbits)a.wbits=D;else if(D>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<D,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&((E=a.length)>r&&(E=r),E&&(a.head&&(D=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,D)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.name+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.comment+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=zswap32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,f-=1,3&(d>>>=1)){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;f<14;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=257+(31&d),d>>>=5,f-=5,a.ndist=1+(31&d),d>>>=5,f-=5,a.ncode=4+(15&d),d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},g=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;m=(A=a.lencode[d&(1<<a.lenbits)-1])>>>16&255,w=65535&A,!((k=A>>>24)<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(w<16)d>>>=k,f-=k,a.lens[a.have++]=w;else{if(16===w){for(x=k+2;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=k,f-=k,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}D=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===w){for(x=k+3;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}f-=k,D=0,E=3+(7&(d>>>=k)),d>>>=3,f-=3}else{for(x=k+7;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}f-=k,D=0,E=11+(127&(d>>>=k)),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=D}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},g=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},g=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,g){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;m=(A=a.lencode[d&(1<<a.lenbits)-1])>>>16&255,w=65535&A,!((k=A>>>24)<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0==(240&m)){for(u=k,R=m,T=w;m=(A=a.lencode[T+((d&(1<<u+R)-1)>>u)])>>>16&255,w=65535&A,!(u+(k=A>>>24)<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,a.length=w,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;m=(A=a.distcode[d&(1<<a.distbits)-1])>>>16&255,w=65535&A,!((k=A>>>24)<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0==(240&m)){for(u=k,R=m,T=w;m=(A=a.distcode[T+((d&(1<<u+R)-1)>>u)])>>>16&255,w=65535&A,!(u+(k=A>>>24)<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=w,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if((E=a.offset-E)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),_=a.window}else _=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do{n[l++]=_[b++]}while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;f<32;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:zswap32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:g=Z_STREAM_END;break e;case BAD:g=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&g===Z_OK&&(g=Z_BUF_ERROR),g)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?0==(2&(a=e.state).wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var a,i=t.length;return e&&e.state?0!==(a=e.state).wrap&&a.mode!==DICT?Z_STREAM_ERROR:a.mode===DICT&&adler32(1,t,i,0)!==a.check?Z_DATA_ERROR:updatewindow(e,t,i,i)?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK):Z_STREAM_ERROR}exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)";

},{"../utils/common":127,"./adler32":128,"./crc32":130,"./inffast":132,"./inftrees":134}],134:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,b=0,a=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),w=null,C=0;for(b=0;b<=MAXBITS;b++)c[b]=0;for(a=0;a<f;a++)c[S[e+a]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;A<L&&0===c[A];A++);for(M<A&&(M=A),G=1,b=1;b<=MAXBITS;b++)if(G<<=1,(G-=c[b])<0)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,b=1;b<MAXBITS;b++)m[b+1]=m[b]+c[b];for(a=0;a<f;a++)0!==S[e+a]&&(u[m[S[e+a]]++]=a);if(r===CODES?(_=w=u,N=19):r===LENS?(_=lbase,x-=257,w=lext,C-=257,N=256):(_=dbase,w=dext,N=-1),U=0,a=0,b=A,I=i,X=M,d=0,s=-1,n=(H=1<<M)-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(;;){T=b-d,u[a]<N?(B=0,D=u[a]):u[a]>N?(B=w[C+u[a]],D=_[x+u[a]]):(B=96,D=0),E=1<<b-d,A=l=1<<X;do{t[I+(U>>d)+(l-=E)]=T<<24|B<<16|D|0}while(0!==l);for(E=1<<b-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,a++,0==--c[b]){if(b===L)break;b=S[e+u[a]]}if(b>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,G=1<<(X=b-d);X+d<L&&!((G-=c[X+d])<=0);)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;t[s=U&n]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=b-d<<24|64<<16|0),o.bits=M,0};

},{"../utils/common":127}],135:[function(require,module,exports){
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};

},{}],136:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero(e){for(var _=e.length;--_>=0;)e[_]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var static_l_desc,static_d_desc,static_bl_desc,base_dist=new Array(D_CODES);function StaticTreeDesc(e,_,t,r,i){this.static_tree=e,this.extra_bits=_,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function TreeDesc(e,_){this.dyn_tree=e,this.max_code=0,this.stat_desc=_}function d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,_){e.pending_buf[e.pending++]=255&_,e.pending_buf[e.pending++]=_>>>8&255}function send_bits(e,_,t){e.bi_valid>Buf_size-t?(e.bi_buf|=_<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=_>>Buf_size-e.bi_valid,e.bi_valid+=t-Buf_size):(e.bi_buf|=_<<e.bi_valid&65535,e.bi_valid+=t)}function send_code(e,_,t){send_bits(e,t[2*_],t[2*_+1])}function bi_reverse(e,_){var t=0;do{t|=1&e,e>>>=1,t<<=1}while(--_>0);return t>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,_){var t,r,i,n,s,d,a=_.dyn_tree,l=_.max_code,c=_.stat_desc.static_tree,o=_.stat_desc.has_stree,b=_.stat_desc.extra_bits,f=_.stat_desc.extra_base,u=_.stat_desc.max_length,p=0;for(n=0;n<=MAX_BITS;n++)e.bl_count[n]=0;for(a[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<HEAP_SIZE;t++)(n=a[2*a[2*(r=e.heap[t])+1]+1]+1)>u&&(n=u,p++),a[2*r+1]=n,r>l||(e.bl_count[n]++,s=0,r>=f&&(s=b[r-f]),d=a[2*r],e.opt_len+=d*(n+s),o&&(e.static_len+=d*(c[2*r+1]+s)));if(0!==p){do{for(n=u-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[u]--,p-=2}while(p>0);for(n=u;0!==n;n--)for(r=e.bl_count[n];0!==r;)(i=e.heap[--t])>l||(a[2*i+1]!==n&&(e.opt_len+=(n-a[2*i+1])*a[2*i],a[2*i+1]=n),r--)}}function gen_codes(e,_,t){var r,i,n=new Array(MAX_BITS+1),s=0;for(r=1;r<=MAX_BITS;r++)n[r]=s=s+t[r-1]<<1;for(i=0;i<=_;i++){var d=e[2*i+1];0!==d&&(e[2*i]=bi_reverse(n[d]++,d))}}function tr_static_init(){var e,_,t,r,i,n=new Array(MAX_BITS+1);for(t=0,r=0;r<LENGTH_CODES-1;r++)for(base_length[r]=t,e=0;e<1<<extra_lbits[r];e++)_length_code[t++]=r;for(_length_code[t-1]=r,i=0,r=0;r<16;r++)for(base_dist[r]=i,e=0;e<1<<extra_dbits[r];e++)_dist_code[i++]=r;for(i>>=7;r<D_CODES;r++)for(base_dist[r]=i<<7,e=0;e<1<<extra_dbits[r]-7;e++)_dist_code[256+i++]=r;for(_=0;_<=MAX_BITS;_++)n[_]=0;for(e=0;e<=143;)static_ltree[2*e+1]=8,e++,n[8]++;for(;e<=255;)static_ltree[2*e+1]=9,e++,n[9]++;for(;e<=279;)static_ltree[2*e+1]=7,e++,n[7]++;for(;e<=287;)static_ltree[2*e+1]=8,e++,n[8]++;for(gen_codes(static_ltree,L_CODES+1,n),e=0;e<D_CODES;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var _;for(_=0;_<L_CODES;_++)e.dyn_ltree[2*_]=0;for(_=0;_<D_CODES;_++)e.dyn_dtree[2*_]=0;for(_=0;_<BL_CODES;_++)e.bl_tree[2*_]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,_,t,r){bi_windup(e),r&&(put_short(e,t),put_short(e,~t)),utils.arraySet(e.pending_buf,e.window,_,t,e.pending),e.pending+=t}function smaller(e,_,t,r){var i=2*_,n=2*t;return e[i]<e[n]||e[i]===e[n]&&r[_]<=r[t]}function pqdownheap(e,_,t){for(var r=e.heap[t],i=t<<1;i<=e.heap_len&&(i<e.heap_len&&smaller(_,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(_,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r}function compress_block(e,_,t){var r,i,n,s,d=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],i=e.pending_buf[e.l_buf+d],d++,0===r?send_code(e,i,_):(send_code(e,(n=_length_code[i])+LITERALS+1,_),0!==(s=extra_lbits[n])&&send_bits(e,i-=base_length[n],s),send_code(e,n=d_code(--r),t),0!==(s=extra_dbits[n])&&send_bits(e,r-=base_dist[n],s))}while(d<e.last_lit);send_code(e,END_BLOCK,_)}function build_tree(e,_){var t,r,i,n=_.dyn_tree,s=_.stat_desc.static_tree,d=_.stat_desc.has_stree,a=_.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,t=0;t<a;t++)0!==n[2*t]?(e.heap[++e.heap_len]=l=t,e.depth[t]=0):n[2*t+1]=0;for(;e.heap_len<2;)n[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,d&&(e.static_len-=s[2*i+1]);for(_.max_code=l,t=e.heap_len>>1;t>=1;t--)pqdownheap(e,n,t);i=a;do{t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,n[2*i]=n[2*t]+n[2*r],e.depth[i]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,n[2*t+1]=n[2*r+1]=i,e.heap[1]=i++,pqdownheap(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,_),gen_codes(n,l,e.bl_count)}function scan_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),_[2*(t+1)+1]=65535,r=0;r<=t;r++)i=s,s=_[2*(r+1)+1],++d<a&&i===s||(d<l?e.bl_tree[2*i]+=d:0!==i?(i!==n&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):d<=10?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4))}function send_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),r=0;r<=t;r++)if(i=s,s=_[2*(r+1)+1],!(++d<a&&i===s)){if(d<l)do{send_code(e,i,e.bl_tree)}while(0!=--d);else 0!==i?(i!==n&&(send_code(e,i,e.bl_tree),d--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,d-3,2)):d<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,d-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,d-11,7));d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4)}}function build_bl_tree(e){var _;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),_=BL_CODES-1;_>=3&&0===e.bl_tree[2*bl_order[_]+1];_--);return e.opt_len+=3*(_+1)+5+5+4,_}function send_all_trees(e,_,t,r){var i;for(send_bits(e,_-257,5),send_bits(e,t-1,5),send_bits(e,r-4,4),i=0;i<r;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,_-1),send_tree(e,e.dyn_dtree,t-1)}function detect_data_type(e){var _,t=4093624447;for(_=0;_<=31;_++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*_])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(_=32;_<LITERALS;_++)if(0!==e.dyn_ltree[2*_])return Z_TEXT;return Z_BINARY}zero(base_dist);var static_init_done=!1;function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,_,t,r){send_bits(e,(STORED_BLOCK<<1)+(r?1:0),3),copy_block(e,_,t,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,_,t,r){var i,n,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),i=e.opt_len+3+7>>>3,(n=e.static_len+3+7>>>3)<=i&&(i=n)):i=n=t+5,t+4<=i&&-1!==_?_tr_stored_block(e,_,t,r):e.strategy===Z_FIXED||n===i?(send_bits(e,(STATIC_TREES<<1)+(r?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(r?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),r&&bi_windup(e)}function _tr_tally(e,_,t){return e.pending_buf[e.d_buf+2*e.last_lit]=_>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&_,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===_?e.dyn_ltree[2*t]++:(e.matches++,_--,e.dyn_ltree[2*(_length_code[t]+LITERALS+1)]++,e.dyn_dtree[2*d_code(_)]++),e.last_lit===e.lit_bufsize-1}exports._tr_init=_tr_init,exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=_tr_flush_block,exports._tr_tally=_tr_tally,exports._tr_align=_tr_align;

},{"../utils/common":127}],137:[function(require,module,exports){
"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;

},{}],138:[function(require,module,exports){
(function (process){
function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function basename(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return(t?"/":"")+(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return(r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"))||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var l=[];for(u=i;u<n.length;u++)l.push("..");return(l=l.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var e=basename(r);return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};

}).call(this,require('_process'))
},{"_process":144}],139:[function(require,module,exports){
(function(){"use strict";var n=this,t=n.patrun,r="undefined"!=typeof require,e=n.gex||r&&require("gex");if(!e)throw new Error("patrun requires gex, see https://github.com/rjrodger/gex");var u=n.patrun=function(r){r=r||{};var u={},o={};function i(n,t,r){if(r){var e=n.g=n.g||{},u=e[t]=e[t]||[];u.push(r),u.sort(function(n,t){return n.val$<t.val$})}}return u.top=function(){return o},u.noConflict=function(){return n.patrun=t,u},u.add=function(n,t){n={...n};var l="function"==typeof r?r.call(u,n,t):null,f=Object.keys(n),s=[],v=[];f.forEach(function(t){var e=n[t];null!=e&&(e=String(e),n[t]=e,(r.gex&&e.match(/[*?]/)?v:s).push(t))}),s=s.sort(),v=v.sort(),f=s.concat(v);for(var a,c=o,d=0;d<f.length;d++){var p=f[d],h=n[p],g=r.gex&&h.match(/[*?]/)?e(h):null;g&&(g.val$=h);var k=(g?"1":"0")+"~"+p;if((a=c.v)&&k==c.sk)i(c,p,g),c=a[h]||(a[h]={});else if(c.k)if(k<c.sk){var m=c.s,y=c.g;c.s={k:c.k,sk:c.sk,v:c.v},m&&(c.s.s=m),y&&(c.s.g=y),c.g&&(c.g={}),i(c,p,g),c.k=p,c.sk=k,c.v={},c=c.v[h]={}}else a=c.v,c=c.s||(c.s={}),d--;else i(c,p,g),c.k=p,c.sk=k,c.v={},c=c.v[h]={}}return void 0!==t&&c&&(c.d=t,l&&(c.f="function"==typeof l?l:l.find,c.r="function"==typeof l.remove?l.remove:void 0)),u},u.findexact=function(n){return u.find(n,!0)},u.find=function(n,t,e){if(null==n)return null;var i=o,l=void 0===o.d?null:o.d,f=o.f,s=null,v=[],a={},c=Object.keys(n).length,d=[];void 0!==o.d&&d.push(o.d);do{if(s=i.k,i.v){var p=n[s],h=i.v[p];if(!h&&r.gex&&i.g&&i.g[s])for(var g=i.g[s],k=0;k<g.length;k++)if(null!=g[k].on(p)){h=i.v[g[k].val$];break}h?(a[s]=!0,i.s&&v.push(i.s),l=void 0===h.d?t?null:l:h.d,e&&void 0!==h.d&&d.push(h.d),f=h.f,i=h):i=i.s}else i=null;null==i&&0<v.length&&(null==l||e&&!t)&&(i=v.pop())}while(i);return t?Object.keys(a).length!==c&&(l=null):null==l&&void 0!==o.d&&(l=o.d),f&&(l=f.call(u,n,l)),e?d:l},u.remove=function(n){var t,r=o,e=null,u=[];do{if(t=r.k,r.v){var i=r.v[n[t]];i?(u.push({km:r,v:n[t]}),e=i.d,r=i):r=r.s}else r=null}while(r);if(void 0!==e){var l=u[u.length-1];if(l&&l.km&&l.km.v){var f=l.km.v[l.v];f.r&&!f.r(n,f.d)||delete f.d}}},u.list=function(n,t){n=n||{};var r=[];return o.d&&r.push({match:{},data:o.d,find:o.f}),function r(u,o,i,l){if(u.v){var f,s=u.k,v=e(n?null==n[s]?t?null:"*":n[s]:"*"),a={...o},c={...i};for(var d in u.v)if(d===n[s]||!t&&null==n[s]||v.on(d)){var p={...a};p[s]=d;var h={...c};delete h[s],f=u.v[d],0===Object.keys(h).length&&f&&f.d&&l.push({match:p,data:f.d,find:f.f}),f&&null!=f.v&&r(f,{...p},{...h},l)}(f=u.s)&&r(f,{...a},{...c},l)}}(o,{},{...n},r),r},u.toString=function(n,t){var r=!0===n||!!t,e="function"==typeof n?n:function(n){return"function"==typeof n?"<"+n.name+">":"<"+n+">"};function u(n,t){for(var r=0;r<t;r++)n.push(" ")}var i=[];var l=[];return function n(t,r,o,l){var f;if(void 0!==t.d&&(r.push(" "+e(t.d)),i.push(l.join(", ")+" -> "+e(t.d))),t.k&&(r.push("\n"),u(r,o),r.push(t.k+":")),t.v){o++;var s=Object.keys(t.v),v=s.filter(function(n){return!n.match(/[*?]/)}),a=s.filter(function(n){return n.match(/[*?]/)});v.sort(),a.sort(),s=v.concat(a);for(var c=0;c<s.length;c++){var d=s[c];r.push("\n"),u(r,o),r.push(d+" ->"),(f=l.slice()).push(t.k+"="+d),n(t.v[d],r,o+1,f)}t.s&&(r.push("\n"),u(r,o),r.push("|"),f=l.slice(),n(t.s,r,o+1,f))}}(o,l,0,[]),r?l.join(""):i.join("\n")},u.inspect=u.toString,u.toJSON=function(n){return JSON.stringify(o,function(n,t){return"function"==typeof t?"[Function]":t},n)},u};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.patrun=u):n.patrun=u}).call(this);

},{"gex":87}],140:[function(require,module,exports){
module.exports=require("./lib/checks");

},{"./lib/checks":141}],141:[function(require,module,exports){
var util=require("util"),errors=module.exports=require("./errors");function failCheck(e,t,r,c){r=r||"";var o=new e(util.format.apply(this,[r].concat(c)));throw Error.captureStackTrace(o,t),o}function failArgumentCheck(e,t,r){failCheck(errors.IllegalArgumentError,e,t,r)}function failStateCheck(e,t,r){failCheck(errors.IllegalStateError,e,t,r)}function typeOf(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function typeCheck(e){return function(t,r){var c=typeOf(t);if(c==e)return t;failArgumentCheck(arguments.callee,r||'Expected "'+e+'" but got "'+c+'".',Array.prototype.slice.call(arguments,2))}}module.exports.checkArgument=function(e,t){e||failArgumentCheck(arguments.callee,t,Array.prototype.slice.call(arguments,2))},module.exports.checkState=function(e,t){e||failStateCheck(arguments.callee,t,Array.prototype.slice.call(arguments,2))},module.exports.checkIsDef=function(e,t){if(void 0!==e)return e;failArgumentCheck(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},module.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;failArgumentCheck(arguments.callee,t||'Expected value to be defined and not null but got "'+typeOf(e)+'".',Array.prototype.slice.call(arguments,2))},module.exports.checkIsString=typeCheck("string"),module.exports.checkIsArray=typeCheck("array"),module.exports.checkIsNumber=typeCheck("number"),module.exports.checkIsBoolean=typeCheck("boolean"),module.exports.checkIsFunction=typeCheck("function"),module.exports.checkIsObject=typeCheck("object");

},{"./errors":142,"util":228}],142:[function(require,module,exports){
var util=require("util");function IllegalArgumentError(r){Error.call(this,r),this.message=r}function IllegalStateError(r){Error.call(this,r),this.message=r}util.inherits(IllegalArgumentError,Error),IllegalArgumentError.prototype.name="IllegalArgumentError",util.inherits(IllegalStateError,Error),IllegalStateError.prototype.name="IllegalStateError",module.exports.IllegalStateError=IllegalStateError,module.exports.IllegalArgumentError=IllegalArgumentError;

},{"util":228}],143:[function(require,module,exports){
(function (process){
"use strict";function nextTick(e,n,c,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,t,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,n)});case 3:return process.nextTick(function(){e.call(null,n,c)});case 4:return process.nextTick(function(){e.call(null,n,c,r)});default:for(s=new Array(o-1),t=0;t<s.length;)s[t++]=arguments[t];return process.nextTick(function(){e.apply(null,s)})}}"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:nextTick}:module.exports=process;

}).call(this,require('_process'))
},{"_process":144}],144:[function(require,module,exports){
var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],145:[function(require,module,exports){
"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g,util=require("./utils"),Format={RFC1738:"RFC1738",RFC3986:"RFC3986"};module.exports=util.assign({default:Format.RFC3986,formatters:{RFC1738:function(e){return replace.call(e,percentTwenties,"+")},RFC3986:function(e){return String(e)}}},Format);

},{"./utils":149}],146:[function(require,module,exports){
"use strict";var stringify=require("./stringify"),parse=require("./parse"),formats=require("./formats");module.exports={formats:formats,parse:parse,stringify:stringify};

},{"./formats":145,"./parse":147,"./stringify":148}],147:[function(require,module,exports){
"use strict";var utils=require("./utils"),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},parseArrayValue=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(e,t){var r,i={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,s=a.split(t.delimiter,l),n=-1,o=t.charset;if(t.charsetSentinel)for(r=0;r<s.length;++r)0===s[r].indexOf("utf8=")&&(s[r]===charsetSentinel?o="utf-8":s[r]===isoSentinel&&(o="iso-8859-1"),n=r,r=s.length);for(r=0;r<s.length;++r)if(r!==n){var c,u,p=s[r],d=p.indexOf("]="),f=-1===d?p.indexOf("="):d+1;-1===f?(c=t.decoder(p,defaults.decoder,o,"key"),u=t.strictNullHandling?null:""):(c=t.decoder(p.slice(0,f),defaults.decoder,o,"key"),u=utils.maybeMap(parseArrayValue(p.slice(f+1),t),function(e){return t.decoder(e,defaults.decoder,o,"value")})),u&&t.interpretNumericEntities&&"iso-8859-1"===o&&(u=interpretNumericEntities(u)),p.indexOf("[]=")>-1&&(u=isArray(u)?[u]:u),has.call(i,c)?i[c]=utils.combine(i[c],u):i[c]=u}return i},parseObject=function(e,t,r,i){for(var a=i?t:parseArrayValue(t,r),l=e.length-1;l>=0;--l){var s,n=e[l];if("[]"===n&&r.parseArrays)s=[].concat(a);else{s=r.plainObjects?Object.create(null):{};var o="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,c=parseInt(o,10);r.parseArrays||""!==o?!isNaN(c)&&n!==o&&String(c)===o&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=a:s[o]=a:s={0:a}}a=s}return a},parseKeys=function(e,t,r,i){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,l=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(a),n=s?a.slice(0,s.index):a,o=[];if(n){if(!r.plainObjects&&has.call(Object.prototype,n)&&!r.allowPrototypes)return;o.push(n)}for(var c=0;r.depth>0&&null!==(s=l.exec(a))&&c<r.depth;){if(c+=1,!r.plainObjects&&has.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;o.push(s[1])}return s&&o.push("["+a.slice(s.index)+"]"),parseObject(o,t,r,i)}},normalizeParseOptions=function(e){if(!e)return defaults;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?defaults.charset:e.charset;return{allowDots:void 0===e.allowDots?defaults.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:defaults.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:defaults.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:defaults.comma,decoder:"function"==typeof e.decoder?e.decoder:defaults.decoder,delimiter:"string"==typeof e.delimiter||utils.isRegExp(e.delimiter)?e.delimiter:defaults.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:defaults.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:defaults.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:defaults.strictNullHandling}};module.exports=function(e,t){var r=normalizeParseOptions(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var i="string"==typeof e?parseValues(e,r):e,a=r.plainObjects?Object.create(null):{},l=Object.keys(i),s=0;s<l.length;++s){var n=l[s],o=parseKeys(n,i[n],r,"string"==typeof e);a=utils.merge(a,o,r)}return utils.compact(a)};

},{"./utils":149}],148:[function(require,module,exports){
"use strict";var utils=require("./utils"),formats=require("./formats"),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},isArray=Array.isArray,push=Array.prototype.push,pushToArray=function(e,r){push.apply(e,isArray(r)?r:[r])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},stringify=function e(r,t,o,i,a,n,l,s,f,u,d,c,y){var p=r;if("function"==typeof l?p=l(t,p):p instanceof Date?p=u(p):"comma"===o&&isArray(p)&&(p=utils.maybeMap(p,function(e){return e instanceof Date?u(e):e}).join(",")),null===p){if(i)return n&&!c?n(t,defaults.encoder,y,"key"):t;p=""}if(isNonNullishPrimitive(p)||utils.isBuffer(p))return n?[d(c?t:n(t,defaults.encoder,y,"key"))+"="+d(n(p,defaults.encoder,y,"value"))]:[d(t)+"="+d(String(p))];var m,h=[];if(void 0===p)return h;if(isArray(l))m=l;else{var v=Object.keys(p);m=s?v.sort(s):v}for(var b=0;b<m.length;++b){var g=m[b],N=p[g];if(!a||null!==N){var D=isArray(p)?"function"==typeof o?o(t,g):t:t+(f?"."+g:"["+g+"]");pushToArray(h,e(N,D,o,i,a,n,l,s,f,u,d,c,y))}}return h},normalizeStringifyOptions=function(e){if(!e)return defaults;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var r=e.charset||defaults.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=formats.default;if(void 0!==e.format){if(!has.call(formats.formatters,e.format))throw new TypeError("Unknown format option provided.");t=e.format}var o=formats.formatters[t],i=defaults.filter;return("function"==typeof e.filter||isArray(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===e.allowDots?defaults.allowDots:!!e.allowDots,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===e.delimiter?defaults.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:defaults.encode,encoder:"function"==typeof e.encoder?e.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:defaults.encodeValuesOnly,filter:i,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:defaults.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:defaults.strictNullHandling}};module.exports=function(e,r){var t,o=e,i=normalizeStringifyOptions(r);"function"==typeof i.filter?o=(0,i.filter)("",o):isArray(i.filter)&&(t=i.filter);var a,n=[];if("object"!=typeof o||null===o)return"";a=r&&r.arrayFormat in arrayPrefixGenerators?r.arrayFormat:r&&"indices"in r?r.indices?"indices":"repeat":"indices";var l=arrayPrefixGenerators[a];t||(t=Object.keys(o)),i.sort&&t.sort(i.sort);for(var s=0;s<t.length;++s){var f=t[s];i.skipNulls&&null===o[f]||pushToArray(n,stringify(o[f],f,l,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var u=n.join(i.delimiter),d=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""};

},{"./formats":145,"./utils":149}],149:[function(require,module,exports){
"use strict";var has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),compactQueue=function(e){for(;e.length>1;){var r=e.pop(),t=r.obj[r.prop];if(isArray(t)){for(var o=[],n=0;n<t.length;++n)void 0!==t[n]&&o.push(t[n]);r.obj[r.prop]=o}}},arrayToObject=function(e,r){for(var t=r&&r.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(t[o]=e[o]);return t},merge=function e(r,t,o){if(!t)return r;if("object"!=typeof t){if(isArray(r))r.push(t);else{if(!r||"object"!=typeof r)return[r,t];(o&&(o.plainObjects||o.allowPrototypes)||!has.call(Object.prototype,t))&&(r[t]=!0)}return r}if(!r||"object"!=typeof r)return[r].concat(t);var n=r;return isArray(r)&&!isArray(t)&&(n=arrayToObject(r,o)),isArray(r)&&isArray(t)?(t.forEach(function(t,n){if(has.call(r,n)){var a=r[n];a&&"object"==typeof a&&t&&"object"==typeof t?r[n]=e(a,t,o):r.push(t)}else r[n]=t}),r):Object.keys(t).reduce(function(r,n){var a=t[n];return has.call(r,n)?r[n]=e(r[n],a,o):r[n]=a,r},n)},assign=function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},decode=function(e,r,t){var o=e.replace(/\+/g," ");if("iso-8859-1"===t)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(e){return o}},encode=function(e,r,t){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===t)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var n="",a=0;a<o.length;++a){var c=o.charCodeAt(a);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?n+=o.charAt(a):c<128?n+=hexTable[c]:c<2048?n+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?n+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(a+=1,c=65536+((1023&c)<<10|1023&o.charCodeAt(a)),n+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return n},compact=function(e){for(var r=[{obj:{o:e},prop:"o"}],t=[],o=0;o<r.length;++o)for(var n=r[o],a=n.obj[n.prop],c=Object.keys(a),i=0;i<c.length;++i){var u=c[i],p=a[u];"object"==typeof p&&null!==p&&-1===t.indexOf(p)&&(r.push({obj:a,prop:u}),t.push(p))}return compactQueue(r),e},isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},isBuffer=function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},combine=function(e,r){return[].concat(e,r)},maybeMap=function(e,r){if(isArray(e)){for(var t=[],o=0;o<e.length;o+=1)t.push(r(e[o]));return t}return r(e)};module.exports={arrayToObject:arrayToObject,assign:assign,combine:combine,compact:compact,decode:decode,encode:encode,isBuffer:isBuffer,isRegExp:isRegExp,maybeMap:maybeMap,merge:merge};

},{}],150:[function(require,module,exports){
"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;y<p;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};

},{}],151:[function(require,module,exports){
"use strict";var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};

},{}],152:[function(require,module,exports){
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");

},{"./decode":150,"./encode":151}],153:[function(require,module,exports){
module.exports=require("./lib/_stream_duplex.js");

},{"./lib/_stream_duplex.js":154}],154:[function(require,module,exports){
"use strict";var pna=require("process-nextick-args"),objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var util=Object.create(require("core-util-is"));util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Duplex.prototype._destroy=function(e,t){this.push(null),this.end(),pna.nextTick(t,e)};

},{"./_stream_readable":156,"./_stream_writable":158,"core-util-is":51,"inherits":93,"process-nextick-args":143}],155:[function(require,module,exports){
"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform"),util=Object.create(require("core-util-is"));function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,t){t(null,r)};

},{"./_stream_transform":157,"core-util-is":51,"inherits":93}],156:[function(require,module,exports){
(function (process,global){
"use strict";var pna=require("process-nextick-args");module.exports=Readable;var Duplex,isArray=require("isarray");Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var util=Object.create(require("core-util-is"));util.inherits=require("inherits");var debugUtil=require("util"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=require("./internal/streams/BufferList"),destroyImpl=require("./internal/streams/destroy");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t){e=e||{};var r=t instanceof(Duplex=Duplex||require("./_stream_duplex"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(a||0===a)?a:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(this instanceof Readable))return new Readable(e);this._readableState=new ReadableState(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Stream.call(this)}function readableAddChunk(e,t,r,n,a){var i,d=e._readableState;null===t?(d.reading=!1,onEofChunk(e,d)):(a||(i=chunkInvalid(d,t)),i?e.emit("error",i):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===Buffer.prototype||(t=_uint8ArrayToBuffer(t)),n?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):addChunk(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!r?(t=d.decoder.write(t),d.objectMode||0!==t.length?addChunk(e,d,t,!1):maybeReadMore(e,d)):addChunk(e,d,t,!1))):n||(d.reading=!1));return needMoreData(d)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(e,t){this.push(null),t(e)},Readable.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,emitReadable(e)}}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?pna.nextTick(emitReadable_,e):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,pna.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,pna.nextTick(resume_,e,t))}function resume_(e,t){t.reading||(debug("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=fromListPartial(e,t.buffer,t.decoder),r);var r}function fromListPartial(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?copyFromBufferString(e,t):copyFromBuffer(e,t),n}function copyFromBufferString(e,t){var r=t.head,n=1,a=r.data;for(e-=a.length;r=r.next;){var i=r.data,d=e>i.length?i.length:e;if(d===i.length?a+=i:a+=i.slice(0,e),0===(e-=d)){d===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(d));break}++n}return t.length-=n,a}function copyFromBuffer(e,t){var r=Buffer.allocUnsafe(e),n=t.head,a=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,d=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,d),0===(e-=d)){d===i.length?(++a,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(d));break}++a}return t.length-=a,r}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,pna.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,a=t.needReadable;return debug("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",a=!0),t.ended||t.reading?debug("reading or ended",a=!1):a&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug("pipe count=%d opts=%j",n.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?d:b;function i(t,a){debug("onunpipe"),t===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,debug("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",o),e.removeListener("error",h),e.removeListener("unpipe",i),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",s),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||o())}function d(){debug("onend"),e.end()}n.endEmitted?pna.nextTick(a):r.once("end",a),e.on("unpipe",i);var o=pipeOnDrain(r);e.on("drain",o);var u=!1;var l=!1;function s(t){debug("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!u&&(debug("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function h(t){debug("onerror",t),b(),e.removeListener("error",h),0===EElistenerCount(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",p),b()}function p(){debug("onfinish"),e.removeListener("close",f),b()}function b(){debug("unpipe"),r.unpipe(e)}return r.on("data",s),prependListener(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",r),n.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)n[i].emit("unpipe",this,r);return this}var d=indexOf(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable.prototype.on=function(e,t){var r=Stream.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var a in e.on("end",function(){if(debug("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){(debug("wrapped data"),r.decoder&&(a=r.decoder.write(a)),r.objectMode&&null==a)||(r.objectMode||a&&a.length)&&(t.push(a)||(n=!0,e.pause()))}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<kProxyEvents.length;i++)e.on(kProxyEvents[i],this.emit.bind(this,kProxyEvents[i]));return this._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList;

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./_stream_duplex":154,"./internal/streams/BufferList":159,"./internal/streams/destroy":160,"./internal/streams/stream":161,"_process":144,"core-util-is":51,"events":82,"inherits":93,"isarray":97,"process-nextick-args":143,"safe-buffer":162,"string_decoder/":163,"util":44}],157:[function(require,module,exports){
"use strict";module.exports=Transform;var Duplex=require("./_stream_duplex"),util=Object.create(require("core-util-is"));function afterTransform(r,t){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=t&&this.push(t),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",prefinish)}function prefinish(){var r=this;"function"==typeof this._flush?this._flush(function(t,e){done(r,t,e)}):done(this,null,null)}function done(r,t,e){if(t)return r.emit("error",t);if(null!=e&&r.push(e),r._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(r._transformState.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,e){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(r,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=r,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Transform.prototype._destroy=function(r,t){var e=this;Duplex.prototype._destroy.call(this,r,function(r){t(r),e.emit("close")})};

},{"./_stream_duplex":154,"core-util-is":51,"inherits":93}],158:[function(require,module,exports){
(function (process,global,setImmediate){
"use strict";var pna=require("process-nextick-args");function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(require("core-util-is"));util.inherits=require("inherits");var internalUtil={deprecate:require("util-deprecate")},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var realHasInstance,destroyImpl=require("./internal/streams/destroy");function nop(){}function WritableState(e,t){Duplex=Duplex||require("./_stream_duplex"),e=e||{};var r=t instanceof Duplex;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(n||0===n)?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(e);this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Stream.call(this)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),pna.nextTick(t,r)}function validChunk(e,t,r,i){var n=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),pna.nextTick(i,o),n=!1),n}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,o){if(!r){var a=decodeChunk(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,i,n,o);return f}function doWrite(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?(pna.nextTick(n,i),pna.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var o=needFinish(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?asyncWrite(afterWrite,e,r,o,n):afterWrite(e,r,o,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,s=!0;r;)n[a]=r,r.isBuf||(s=!1),r=r.next,a+=1;n.allBuffers=s,doWrite(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var f=r.chunk,u=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:f.length,f,u,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,pna.nextTick(callFinal,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function finishMaybe(e,t){var r=needFinish(t);return r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?pna.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable&&(e&&e._writableState instanceof WritableState)}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=!i.objectMode&&_isUint8Array(e);return o&&!Buffer.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):(o||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,o,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(e,t){this.end(),t(e)};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("timers").setImmediate)
},{"./_stream_duplex":154,"./internal/streams/destroy":160,"./internal/streams/stream":161,"_process":144,"core-util-is":51,"inherits":93,"process-nextick-args":143,"safe-buffer":162,"timers":218,"util-deprecate":222}],159:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Buffer=require("safe-buffer").Buffer,util=require("util");function copyBuffer(t,e,i){t.copy(e,i)}module.exports=function(){function t(){_classCallCheck(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var e=Buffer.allocUnsafe(t>>>0),i=this.head,n=0;i;)copyBuffer(i.data,e,n),n+=i.data.length,i=i.next;return e},t}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var t=util.inspect({length:this.length});return this.constructor.name+" "+t});

},{"safe-buffer":162,"util":44}],160:[function(require,module,exports){
"use strict";var pna=require("process-nextick-args");function destroy(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(pna.nextTick(emitErrorNT,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}module.exports={destroy:destroy,undestroy:undestroy};

},{"process-nextick-args":143}],161:[function(require,module,exports){
module.exports=require("events").EventEmitter;

},{"events":82}],162:[function(require,module,exports){
var buffer=require("buffer"),Buffer=buffer.Buffer;function copyProps(f,r){for(var e in f)r[e]=f[e]}function SafeBuffer(f,r,e){return Buffer(f,r,e)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,r,e){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,r,e)},SafeBuffer.alloc=function(f,r,e){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==r?"string"==typeof e?u.fill(r,e):u.fill(r):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)};

},{"buffer":49}],163:[function(require,module,exports){
"use strict";var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if("string"!=typeof e&&(Buffer.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}function StringDecoder(t){var e;switch(this.encoding=normalizeEncoding(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(e)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8CheckIncomplete(t,e,s){var i=e.length-1;if(i<s)return 0;var n=utf8CheckByte(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(t.lastNeed=n-2),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}function utf8CheckExtraBytes(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function utf8Text(t,e){var s=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function utf16Text(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function base64Text(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};

},{"safe-buffer":162}],164:[function(require,module,exports){
module.exports=require("./readable").PassThrough;

},{"./readable":165}],165:[function(require,module,exports){
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");

},{"./lib/_stream_duplex.js":154,"./lib/_stream_passthrough.js":155,"./lib/_stream_readable.js":156,"./lib/_stream_transform.js":157,"./lib/_stream_writable.js":158}],166:[function(require,module,exports){
module.exports=require("./readable").Transform;

},{"./readable":165}],167:[function(require,module,exports){
module.exports=require("./lib/_stream_writable.js");

},{"./lib/_stream_writable.js":158}],168:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,backoff=require("backoff");module.exports=function(e){return function(n,t){t="function"==typeof n?n:t,n="object"==typeof n?n:{initialDelay:1e3,maxDelay:3e4},t||(t=n.onConnect);var c=new EventEmitter;c.connected=!1,c.reconnect=!0,t&&c.on("connection",t);var o,r,i=n.strategy||n.type;function f(i,f){if(!c.connected&&c.reconnect){c.emit("reconnect",i,f);var a=e.apply(c,r);c._connection=a,a.on("error",function e(n){a.removeListener("error",e),c.emit("error",n),s(n)}).on("close",s).on("end",s),n.immediate||"Request"==a.constructor.name?(c.connected=!0,c.emit("connect",a),c.emit("connection",a),a.once("data",function(){o.reset()})):a.once("connect",function(){o.reset(),c.connected=!0,t&&a.removeListener("connect",t),c.emit("connect",a),c.emit("connection",a)})}function s(e){if(c.connected=!1,a.removeListener("close",s),a.removeListener("end",s),"Request"==a.constructor.name&&a.on("error",function(){}),c.emit("disconnect",e),c.reconnect)try{o.backoff()}catch(e){}}}return o="string"==typeof i?backoff[i](n):i||backoff.fibonacci(n),n.failAfter&&o.failAfter(n.failAfter),o.on("backoff",function(e,n,t){c.emit("backoff",e,n,t)}),o.on("fail",function(e){c.disconnect(),c.emit("fail",e)}),c.connect=c.listen=function(){if(this.reconnect=!0,!c.connected){if(o.reset(),o.on("ready",f),!r){var e=arguments.length;r=new Array(e);for(var n=0;n<e;n++)r[n]=arguments[n]}return f(0,0),c}},c.disconnect=function(){return this.reconnect=!1,c._connection&&c._connection.end(),c},c.reset=function(){o.reset(),f(0,0)},c}};

},{"backoff":37,"events":82}],169:[function(require,module,exports){
"use strict";function Stats(t,a,n){t=t||1111,a=a||6e4;var r=(n=n||Date.now)(),e=new Array(t),i=new Array(t),o=-1,l=0,u=0,s=void 0,v=void 0,c=0,d=0,m=void 0,f=void 0;return this.point=function(a){if(null!=a){var r=n();o=(o+1)%t,l===t&&(u-=e[o],l--),e[o]=a,i[o]=r,l++,u+=a,c++,d+=a,s=void 0===s?a:a<s?a:s,v=void 0===v?a:v<a?a:v}},this.calculate=function(){var h,S=n(),w=S-a;if(0<l){var p=(t+o-l+1)%t;for(h=0;h++<l&&i[p]<=w;)u-=e[p],l--,p=(p+1)%t}var x,N,y,A=0<l?u/l:0,M=0;for(h=0;h<l;h++)x=e[(t+o-h)%t],M+=Math.pow(x-A,2),N=void 0===N?x:x<N?x:N,y=void 0===y?x:y<x?x:y;var q=1e3*l/a;return m=void 0===m?q:q<m?q:m,f=void 0===f?q:f<q?q:f,{now:S,from:w,start:r,count:l,sum:u,mean:A,min:N,max:y,stddev:1<l?Math.sqrt(M/(l-1)):0,rate:q,minrate:m,maxrate:f,allmin:s,allmax:v,allcount:c,allsum:d,allmean:0<c?d/c:0,allrate:1e3*c/(S-r)}},this}function NamedStats(t,a,n){var r=new Stats(1,1).calculate(),e={};return this.point=function(r,i){null!=r&&null!=i&&(e[i]=e[i]||new Stats(t,a,n)).point(r)},this.calculate=function(n){if(null==n){var i={};for(var o in e)i[o]=e[o].calculate();return i}var l=e[n]=e[n]||new Stats(t,a);return null==l?r:l.calculate()},this.names=function(){var t=[];for(var a in e)t.push(a);return t},this}module.exports=function(t,a,n){return new Stats(t,a,n)},module.exports.Stats=Stats,module.exports.NamedStats=NamedStats;

},{}],170:[function(require,module,exports){
var buffer=require("buffer"),Buffer=buffer.Buffer;function copyProps(f,e){for(var r in f)e[r]=f[r]}function SafeBuffer(f,e,r){return Buffer(f,e,r)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(Buffer.prototype),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(f,e,r){if("number"==typeof f)throw new TypeError("Argument must not be a number");return Buffer(f,e,r)},SafeBuffer.alloc=function(f,e,r){if("number"!=typeof f)throw new TypeError("Argument must be a number");var u=Buffer(f);return void 0!==e?"string"==typeof r?u.fill(e,r):u.fill(e):u.fill(0),u},SafeBuffer.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return Buffer(f)},SafeBuffer.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(f)};

},{"buffer":49}],171:[function(require,module,exports){
(function (setImmediate){
"use strict";var Util=require("util");function promisify_entity(t,i){return null==t||t.__promisify$$||i&&!1===i.ent?t:(t.__promisify$$=!0,t.__make$$=t.make$,t.__load$$=Util.promisify(t.load$),t.__save$$=Util.promisify(t.save$),t.__list$$=Util.promisify(t.list$),t.__remove$$=Util.promisify(t.remove$),t.__close$$=Util.promisify(t.close$),t.make$=function(){return promisify_entity(t.__make$$.apply(t,arguments))},t.load$=async function(){return promisify_entity(await t.__load$$.apply(t,arguments))},t.save$=async function(){return promisify_entity(await t.__save$$.apply(t,arguments))},t.list$=async function(){for(var i=await t.__list$$.apply(t,arguments),n=0;n<i.length;n++)i[n]=promisify_entity(i[n]);return i},t.remove$=async function(){return promisify_entity(await t.__remove$$.apply(t,arguments))},t.close$=async function(){return promisify_entity(await t.__close$$.apply(t,arguments))},t.native$=Util.promisify(t.native$),t)}function promisify(t){}module.exports=promisify,module.exports.preload=function(t){var i=t.options;this.root.send=function(t){return this.act(t),this},this.root.post=Util.promisify(this.act),this.root.message=function(t,i){var n=null==i?null:function(t,n,o){i.call(this,t,o).then(n).catch(n)};if(null!=i&&null!=n){for(var o in""!=i.name&&Object.defineProperty(n,"name",{value:i.name}),i)n[o]=i[o];setImmediate(function(){for(var t in i)n[t]=i[t]})}return this.add(t,n),this},null==this.root.entity&&(this.root.entity=function(){var t=this.make.apply(this,arguments);return t=promisify_entity(t,i)}),this.root.prepare=function(t){var i=function(i){t.call(this).then(i).catch(i)};return""!=t.name&&Object.defineProperty(i,"name",{value:t.name}),this.init(i),this};const n=this.root.prior,o=Util.promisify(this.root.prior);this.root.prior=async function(){return 1<arguments.length&&"function"==typeof arguments[arguments.length-1]?n.apply(this,arguments):await o.apply(this,arguments)};const r=this.root.ready,e=Util.promisify(this.root.ready);this.root.ready=async function(){return 0<arguments.length&&"function"==typeof arguments[arguments.length-1]?r.apply(this,arguments):(await e.apply(this,arguments),this)},this.root.__promisify$$=!0};

}).call(this,require("timers").setImmediate)
},{"timers":218,"util":228}],172:[function(require,module,exports){
"use strict";var Buffer=require("buffer"),Http=require("http"),Https=require("https"),Qs=require("qs"),Url=require("url"),Jsonic=require("jsonic"),Wreck=require("@hapi/wreck"),Omit=require("lodash.omit"),internals={};exports.listen=function(e,t){return function(n,r){var s,i=this.root.delegate(),a=i.util.deepextend(e[n.type],n),o="https"===a.protocol?Https.createServer(a.serverOptions):Http.createServer(),c=0,l=i.util.deep(n);function u(){s=o.listen(l.port=t.resolveDynamicValue(a.port,a),l.host=t.resolveDynamicValue(a.host,a))}o.on("request",function(e,n){internals.timeout(a,e,n),e.query=Qs.parse(Url.parse(e.url).query),internals.setBody(i,t,e,n,function(r){if(r)return n.end();internals.trackHeaders(a,i,t,e,n)})}),o.on("error",function(e){if("EADDRINUSE"===e.code&&c<a.max_listen_attempts)return c++,i.log.warn("listen","attempt",c,e.code,a),void setTimeout(u,100+Math.floor(Math.random()*a.attempt_delay));r(e)}),o.on("listening",function(){l.port=o.address().port,i.log.debug("listen",l),r(null,l)}),t.close(i,function(e){s&&s._handle&&s.close(),e()}),u()}},exports.client=function(e,t){return function(n,r){var s=this.root.delegate(),i=s.util.deepextend(e[n.type],n),a=null;e[n.type].headers&&(a=Omit(e[n.type].headers,["Accept","Content-Type","Content-Length","Cache-Control","seneca-id","seneca-kind","seneca-origin","seneca-track","seneca-time-client-sent","seneca-accept","seneca-time-listen-recv","seneca-time-listen-sent"]));t.make_client(s,function(e,n,r){var o=t.resolveDynamicValue(i.host,i),c=t.resolveDynamicValue(i.port,i),l=t.resolveDynamicValue(i.path,i);o="0.0.0.0"===o?"127.0.0.1":o;var u=i.protocol+"://"+o+":"+c+l;s.log.debug("client","web","send",e,n,i,u),r(null,function(e,n,r){var o=t.prepare_request(this,e,n,r),c={Accept:"application/json","Content-Type":"application/json","seneca-id":o.id,"seneca-kind":"req","seneca-origin":s.id,"seneca-track":t.stringifyJSON(s,"send-track",o.track||[]),"seneca-time-client-sent":o.time.client_sent};a&&(c=Object.assign(c,a));var l={json:!0,headers:c,timeout:i.timeout,payload:JSON.stringify(o.act)};function d(n,a,c){var l={kind:"res",res:c&&"object"==typeof c?c:null,error:n,sync:(e.meta$||r).sync};a?(l.id=a.headers["seneca-id"],l.origin=a.headers["seneca-origin"],l.accept=a.headers["seneca-accept"],l.time={client_sent:a.headers["seneca-time-client-sent"],listen_recv:a.headers["seneca-time-listen-recv"],listen_sent:a.headers["seneca-time-listen-sent"]},200!==a.statusCode&&(l.error=c)):(l.id=o.id,l.origin=s.id),t.handle_response(s,l,i)}Wreck.post(u,l).then(function(e){d(null,e.res,e.payload)}).catch(function(e){d(e)})}),t.close(s,function(e){e()})},i,r)}},internals.setBody=function(e,t,n,r,s){var i=[];n.setEncoding("utf8"),n.on("data",function(e){i.push(e)}),n.on("end",function(){try{var a=i.join(""),o=a.length?t.parseJSON(e,"req-body",a):{};if(o instanceof Error){var c=t.prepareResponse(e,{});return c.input=a,c.error=t.error("invalid_json",{input:a}),void internals.sendResponse(e,t,r,c,{})}n.body=Object.assign({},o,n.query&&n.query.args$?Jsonic(n.query.args$):{},n.query&&n.query.msg$?Jsonic(n.query.msg$):{},n.query||{}),s()}catch(e){r.write(e.message+": "+a),r.statusCode=400,s(e)}})},internals.trackHeaders=function(e,t,n,r,s){if(Url.parse(r.url).pathname!==e.path)return s.statusCode=404,s.end();var i;r.headers["seneca-id"]&&(i={id:r.headers["seneca-id"],kind:"act",origin:r.headers["seneca-origin"],track:n.parseJSON(t,"track-receive",r.headers["seneca-track"])||[],time:{client_sent:r.headers["seneca-time-client-sent"]},act:r.body}),r.headers["seneca-id"]||(i={id:t.idgen(),kind:"act",origin:r.headers["user-agent"]||"UNKNOWN",track:[],time:{client_sent:Date.now()},act:r.body}),n.handle_request(t,i,e,function(e){internals.sendResponse(t,n,s,e,i)})},internals.sendResponse=function(e,t,n,r,s){var i="null",a=200;r&&r.res?(a=r.res.statusCode||a,i=t.stringifyJSON(e,"listen-web",r.res)):r&&r.error&&(a=r.error.statusCode||500,i=t.stringifyJSON(e,"listen-web",r.error));var o={"Content-Type":"application/json","Cache-Control":"private, max-age=0, no-cache, no-store","Content-Length":Buffer.Buffer.byteLength(i)};o["seneca-id"]=r&&r.id?r.id:e.id,o["seneca-kind"]="res",o["seneca-origin"]=r&&r.origin?r.origin:"UNKNOWN",o["seneca-accept"]=e.id,o["seneca-track"]=""+(s.track?s.track:[]),o["seneca-time-client-sent"]=r&&r.item?r.time.client_sent:"0",o["seneca-time-listen-recv"]=r&&r.item?r.time.listen_recv:"0",o["seneca-time-listen-sent"]=r&&r.item?r.time.listen_sent:"0",n.writeHead(a,o),n.end(i)},internals.timeout=function(e,t,n){var r=setTimeout(function(){n.statusCode=503,n.statusMessage="Response timeout",n.end('{ "code": "ETIMEDOUT" }')},e.timeout||5e3),s=function(){clearTimeout(r)};t.once("close",s),t.once("error",s),n.once("error",s),n.socket.once("data",s)};

},{"@hapi/wreck":29,"buffer":49,"http":197,"https":91,"jsonic":99,"lodash.omit":108,"qs":146,"url":219}],173:[function(require,module,exports){
"use strict";var Net=require("net"),Stream=require("stream"),Ndjson=require("ndjson"),Reconnect=require("reconnect-core"),internals={};exports.listen=function(n,e){return function(t,o){var r=this.root.delegate(),i=r.util.deepextend(n[t.type],t),c=[],s=0,l=Net.createServer(function(t){r.log.debug("listen","connection",i,"remote",t.remoteAddress,t.remotePort);var o=Ndjson.parse(),s=Ndjson.stringify();o.on("error",function(n){console.error(n),t.end()}),o.on("data",function(t){if(t instanceof Error){var o=e.prepareResponse(r,{});return o.input=t.input,o.error=e.error("invalid_json",{input:t.input}),void s.write(o)}e.handle_request(r,t,n,function(n){null!==n&&n.sync&&s.write(n)})}),t.pipe(o),s.pipe(t),t.on("error",function(n){r.log.error("listen","pipe-error",i,n&&n.stack)}),c.push(t)});function u(){i.path?l.listen(i.path):l.listen(i.port,i.host)}l.once("listening",function(){return i.port=l.address().port,r.log.debug("listen","open",i),o(null,i)}),l.on("error",function(n){if(r.log.error("listen","net-error",i,n&&n.stack),"EADDRINUSE"===n.code&&s<i.max_listen_attempts)return s++,r.log.warn("listen","attempt",s,n.code,i),void setTimeout(u,100+Math.floor(Math.random()*i.attempt_delay))}),l.on("close",function(){r.log.debug("listen","close",i)}),u(),e.close(r,function(n){l._handle&&l.close(),internals.closeConnections(c,r),n()})}},exports.client=function(n,e){return function(t,o){var r,i,c,s=this.root.delegate(),l=!1,u=t.type;t.host&&(t.host="0.0.0.0"===t.host?"127.0.0.1":t.host);var a=s.util.deepextend(n[t.type],t);a.host=t.host||"0.0.0.0"!==a.host?a.host:"127.0.0.1";var p=function(){s.log.debug("client",u,"send-init","","",a);var n=internals.reconnect(function(t){r=t;var o=internals.clientMessager(s,a,e),i=Ndjson.parse();c=Ndjson.stringify(),t.pipe(i).pipe(o).pipe(c).pipe(t),l||n.emit("s_connected",c),l=!0});return n.on("connect",function(n){s.log.debug("client",u,"connect","","",a)}),n.on("reconnect",function(){s.log.debug("client",u,"reconnect","","",a)}),n.on("disconnect",function(n){s.log.debug("client",u,"disconnect","","",a,n&&n.stack||n),l=!1}),n.on("error",function(n){s.log.debug("client",u,"error","","",a,n.stack)}),n.connect({port:a.port,host:a.host}),e.close(s,function(e){n.disconnect(),internals.closeConnections([r],s),e()}),n};e.make_client(s,function(n,t,o){o(null,function(n,t,o){var r,s=this;r=function(r){var i=e.prepare_request(s,n,t,o);i.replied||r.write(i)},i||(i=p()),l?r(c):i.once("s_connected",r)})},a,o)}},internals.clientMessager=function(n,e,t){var o=new Stream.Duplex({objectMode:!0});return o._read=function(){},o._write=function(o,r,i){return t.handle_response(n,o,e),i()},o},internals.closeConnections=function(n,e){for(var t=0,o=n.length;t<o;++t)internals.destroyConnection(n[t],e)},internals.destroyConnection=function(n,e){try{n.destroy()}catch(n){e.log.error(n)}},internals.reconnect=Reconnect(function(){var n=[].slice.call(arguments);return Net.connect.apply(null,n)});

},{"ndjson":114,"net":47,"reconnect-core":168,"stream":196}],174:[function(require,module,exports){
"use strict";var Util=require("util"),Nid=require("nid"),Patrun=require("patrun"),Jsonic=require("jsonic"),Eraro=require("eraro"),Each=require("lodash.foreach"),internals={error:Eraro({package:"seneca",msgmap:{no_data:"The message has no data.",invalid_kind_act:'Inbound messages should have kind "act", kind was: <%=kind%>.',no_message_id:"The message has no identifier.",invalid_origin:"The message response is not for this instance, origin was <%=origin%>.",unknown_message_id:"The message has an unknown identifier",own_message:"Inbound message rejected as originated from this server.",message_loop:"Inbound message rejected as looping back to this server.",data_error:"Inbound message included an error description.",invalid_json:"Invalid JSON: <%=input%>.",unexcepted_async_error:"Unexcepted error response to asynchronous message."},override:!0})};module.exports=internals.Utils=function(n){this._msgprefix=n.options.msgprefix?n.options.msgprefix:"",this._context=n},internals.Utils.prototype.error=internals.error,internals.Utils.prototype.handle_response=function(n,t,e){if(t.time=t.time||{},t.time.client_recv=Date.now(),t.sync=void 0===t.sync||t.sync,"res"!==t.kind)return this._context.options.warn.invalid_kind&&n.log.warn("client","invalid_kind_res",e,t),!1;if(null===t.id)return this._context.options.warn.no_message_id&&n.log.warn("client","no_message_id",e,t),!1;if(n.id!==t.origin)return this._context.options.warn.invalid_origin&&n.log.warn("client","invalid_origin",e,t),!1;var r=null,i=null;if(t.error){if(r=new Error(t.error.message),Each(t.error,function(n,t){r[t]=n}),!t.sync)return n.log.warn("client","unexcepted_async_error",e,t,r),!0}else i=this.handle_entity(n,t.res);if(!t.sync)return!0;var s=this._context.callmap.get(t.id);if(!s)return this._context.options.warn.unknown_message_id&&n.log.warn("client","unknown_message_id",e,t),!1;this._context.callmap.del(t.id);var o={id:t.id,accept:t.accept,track:t.track,time:t.time};return this.callmeta({callmeta:s,err:r,result:i,actinfo:o,seneca:n,client_options:e,data:t}),!0},internals.Utils.prototype.callmeta=function(n){try{n.callmeta.done(n.err,n.result,n.actinfo)}catch(t){n.seneca.log.error("client","callback_error",n.client_options,n.data,t.stack||t)}},internals.Utils.prototype.prepare_request=function(n,t,e,r){var i=t.meta$||r||{};i.sync=void 0===i.sync||i.sync;var s={args:t,done:e.bind(n),when:Date.now()};i.sync?this._context.callmap.set(i.id,s):this.callmeta({callmeta:s,err:null,result:null,actinfo:null,seneca:n,client_options:null,data:null});var o=[];t.transport$&&(o=n.util.deep(t.transport$.track||[])),o.push(n.id);var a={id:i.id,kind:"act",origin:n.id,track:o,time:{client_sent:Date.now()},act:n.util.clean(t),sync:i.sync};return r&&r.custom&&(a.act.custom$=r&&r.custom||void 0),a.msg$={vin:1,sid:n.id,out:!0,mid:i.mi,cid:i.tx,snc:i.sync,pat:i.pattern},a},internals.Utils.prototype.handle_request=function(n,t,e,r){if(!t)return r({input:t,error:internals.error("no_data")});var i=t.id&&t.id.split("/"),s=i&&i[1];if(n.fixedargs.tx$=s||n.fixedargs.tx$,"act"!==t.kind)return this._context.options.warn.invalid_kind&&n.log.warn("listen","invalid_kind_act",e,t),r({input:t,error:internals.error("invalid_kind_act",{kind:t.kind})});if(null===t.id)return this._context.options.warn.no_message_id&&n.log.warn("listen","no_message_id",e,t),r({input:t,error:internals.error("no_message_id")});if(this._context.options.check.own_message&&this._context.callmap.has(t.id))return this._context.options.warn.own_message&&n.log.warn("listen","own_message",e,t),r({input:t,error:internals.error("own_message")});if(this._context.options.check.message_loop&&Array.isArray(t.track))for(var o=0;o<t.track.length;o++)if(n.id===t.track[o])return this._context.options.warn.message_loop&&n.log.warn("listen","message_loop",e,t),r({input:t,error:internals.error("message_loop")});if(t.error)return n.log.error("listen","data_error",e,t),r({input:t,error:internals.error("data_error")});var a=this.prepareResponse(n,t),c=this.handle_entity(n,t.act);c.transport$={track:t.track||[],origin:t.origin,time:t.time},c.id$=t.id,this.requestAct(n,c,a,r)},internals.Utils.prototype.requestAct=function(n,t,e,r){var i=this;try{n.act(t,function(n,s){i.update_output(t,e,n,s),r(e)})}catch(s){i.catch_act_error(n,s,t,{},e),r(e)}},internals.Utils.prototype.make_client=function(n,t,e,r){var i=this._context.seneca;n.seneca?i=n:(r=e,e=t,t=n);var s=this.resolve_pins(e);i.log.debug("client",e,s||"any");var o=function(n,t){if(n)return r(n);r(null,t)};if(s){var a=this.make_argspatrun(s),c=this.make_resolvesend(e,{},t);return this.make_pinclient(e,c,a,o)}this.make_anyclient(e,t,o)},internals.Utils.prototype.make_anyclient=function(n,t,e){var r=this;t({},this._msgprefix+"any",function(t,i){if(t)return e(t);if("function"!=typeof i)return e(r._context.seneca.fail("null-client",{opts:n}));var s={id:n.id||Nid(),toString:function(){return"any-"+this.id},send:function(n,t,e){i.call(this,n,t,e)}};e(null,s)})},internals.Utils.prototype.make_pinclient=function(n,t,e,r){var i={id:n.id||Nid(),toString:function(){return"pin-"+e.mark+"-"+this.id},send:function(n,r,i){var s=this,o=e.find(n);t(o,n,function(t,e){if(t)return r(t);e.call(s,n,r,i)})}};r(null,i)},internals.Utils.prototype.resolve_pins=function(n){var t=n.pin||n.pins;return t&&(t=Array.isArray(t)?t:[t]),t&&(t=t.map(function(n){return"string"==typeof n?Jsonic(n):n})),t},internals.Utils.prototype.make_argspatrun=function(n){var t=Patrun({gex:!0});return Each(n,function(n){var e={pin:n};t.add(n,e)}),t.mark=Util.inspect(n).replace(/\s+/g,"").replace(/\n/g,""),t},internals.Utils.prototype.make_resolvesend=function(n,t,e){var r=this;return function(i,s,o){var a=r.resolve_topic(n,i,s),c=t[a];if(c)return o(null,c);e(i,a,function(n,e){if(n)return o(n);t[a]=e,o(null,e)})}},internals.Utils.prototype.resolve_topic=function(n,t,e){var r=this;if(!t.pin)return function(){return r._msgprefix+"any"};var i=Object.assign({},t.pin),s={};Each(i,function(n,t){s[t]=e[t]});var o=[];return Each(Object.keys(s).sort(),function(n){o.push(n),o.push("="),o.push(s[n]),o.push(",")}),this._msgprefix+o.join("").replace(/[^\w\d]+/g,"_")},internals.Utils.prototype.listen_topics=function(n,t,e,r){var i=this,s=[],o=this.resolve_pins(t);return o?Each(this._context.seneca.findpins(o),function(n){var t=[];Each(Object.keys(n).sort(),function(e){t.push(e),t.push("="),t.push(n[e]),t.push(",")});var e=i._msgprefix+t.join("").replace(/[^\w\d]+/g,"_");s.push(e)}):s.push(this._msgprefix+"any"),"function"==typeof r&&s.forEach(function(n){r(n)}),s},internals.Utils.prototype.update_output=function(n,t,e,r){if(t.res=r,e){var i=Object.assign({},e);i.message=e.message,i.name=e.name||"Error",t.error=i,t.input=n}t.time.listen_sent=Date.now()},internals.Utils.prototype.catch_act_error=function(n,t,e,r,i){n.log.error("listen","act-error",e,t.stack||t),i.error=t,i.input=r},internals.Utils.prototype.resolvetopic=internals.Utils.prototype.resolve_topic,internals.Utils.prototype.prepareResponse=function(n,t){return{id:t.id,kind:"res",origin:t.origin,accept:n.id,track:t.track,time:{client_sent:t.time&&t.time.client_sent||0,listen_recv:Date.now()},sync:t.sync}},internals.Utils.prototype.handle_entity=function(n,t){return t?(t="object"==typeof t&&null!=t?t:{}).entity$?n.make$(t):(Each(t,function(e,r){"object"==typeof e&&null!=e&&e.entity$&&(t[r]=n.make$(e))}),t):t},internals.Utils.prototype.close=function(n,t){n.add("role:seneca,cmd:close",function(n,e){var r=this;t.call(r,function(t){t&&r.log.error(t),r.prior(n,e)})})},internals.Utils.prototype.stringifyJSON=function(n,t,e){if(e)try{return JSON.stringify(e)}catch(r){n.log.warn("json-stringify",t,e,r.message)}},internals.Utils.prototype.parseJSON=function(n,t,e){if(e)try{return JSON.parse(e)}catch(r){return n.log.warn("json-parse",t,e.replace(/[\r\n\t]+/g,""),r.message),r.input=e,r}},internals.Utils.prototype.resolveDynamicValue=function(n,t){return"function"==typeof n?n(t):n};

},{"eraro":56,"jsonic":99,"lodash.foreach":103,"nid":115,"patrun":175,"util":228}],175:[function(require,module,exports){
(function(){"use strict";var n=this,t=n.patrun,r="undefined"!=typeof require,e=n.gex||r&&require("gex");if(!e)throw new Error("patrun requires gex, see https://github.com/rjrodger/gex");var u=n.patrun=function(r){r=r||{};var u={},i={};function o(n,t,r){if(r){var e=n.g=n.g||{},u=e[t]=e[t]||[];u.push(r),u.sort(function(n,t){return n.val$<t.val$})}}return u.top=function(){return i},u.noConflict=function(){return n.patrun=t,u},u.add=function(n,t){n={...n};var f="function"==typeof r?r.call(u,n,t):null,l=Object.keys(n),s=[],v=[];l.forEach(function(t){var e=n[t];null!=e&&(e=String(e),n[t]=e,(r.gex&&e.match(/[*?]/)?v:s).push(t))}),s=s.sort(),v=v.sort(),l=s.concat(v);for(var a,c=i,d=0;d<l.length;d++){var p=l[d],h=n[p],g=r.gex&&h.match(/[*?]/)?e(h):null;g&&(g.val$=h);var k=(g?"1":"0")+"~"+p;if((a=c.v)&&k==c.sk)o(c,p,g),c=a[h]||(a[h]={});else if(c.k)if(k<c.sk){var m=c.s,y=c.g;c.s={k:c.k,sk:c.sk,v:c.v},m&&(c.s.s=m),y&&(c.s.g=y),c.g&&(c.g={}),o(c,p,g),c.k=p,c.sk=k,c.v={},c=c.v[h]={}}else a=c.v,c=c.s||(c.s={}),d--;else o(c,p,g),c.k=p,c.sk=k,c.v={},c=c.v[h]={}}return void 0!==t&&c&&(c.d=t,f&&(c.f="function"==typeof f?f:f.find,c.r="function"==typeof f.remove?f.remove:void 0)),u},u.findexact=function(n){return u.find(n,!0)},u.find=function(n,t,e){if(null==n)return null;var o=i,f=void 0===i.d?null:i.d,l=i.f,s=null,v=[],a={},c=Object.keys(n).length,d=[];void 0!==i.d&&d.push(i.d);do{if(s=o.k,o.v){var p=n[s],h=o.v[p];if(!h&&r.gex&&o.g&&o.g[s])for(var g=o.g[s],k=0;k<g.length;k++)if(null!=g[k].on(p)){h=o.v[g[k].val$];break}if(h){if(a[s]=!0,e&&!t){var m=Object.keys(n).filter(n=>!a[n]),y={};m.forEach(t=>y[t]=n[t]);var x=u.find(y,!1,!0);d=d.concat(void 0!==i.d?x.slice(1):x)}o.s&&v.push(o.s),f=void 0===h.d?t?null:f:h.d,e&&void 0!==h.d&&d.push(h.d),l=h.f,o=h}else o=o.s}else o=null;null==o&&null==f&&0<v.length&&(o=v.pop())}while(o);return t?Object.keys(a).length!==c&&(f=null):null==f&&void 0!==i.d&&(f=i.d),l&&(f=l.call(u,n,f)),e?d:f},u.remove=function(n){var t,r=i,e=null,u=[];do{if(t=r.k,r.v){var o=r.v[n[t]];o?(u.push({km:r,v:n[t]}),e=o.d,r=o):r=r.s}else r=null}while(r);if(void 0!==e){var f=u[u.length-1];if(f&&f.km&&f.km.v){var l=f.km.v[f.v];l.r&&!l.r(n,l.d)||delete l.d}}},u.list=function(n,t){n=n||{};var r=[];return i.d&&r.push({match:{},data:i.d,find:i.f}),function r(u,i,o,f){if(u.v){var l,s=u.k,v=e(n?null==n[s]?t?null:"*":n[s]:"*"),a={...i},c={...o};for(var d in u.v)if(d===n[s]||!t&&null==n[s]||v.on(d)){var p={...a};p[s]=d;var h={...c};delete h[s],l=u.v[d],0===Object.keys(h).length&&l&&l.d&&f.push({match:p,data:l.d,find:l.f}),l&&null!=l.v&&r(l,{...p},{...h},f)}(l=u.s)&&r(l,{...a},{...c},f)}}(i,{},{...n},r),r},u.toString=function(n,t){var r=!0===n||!!t,e="function"==typeof n?n:function(n){return"function"==typeof n?"<"+n.name+">":"<"+n+">"};function u(n,t){for(var r=0;r<t;r++)n.push(" ")}var o=[];var f=[];return function n(t,r,i,f){var l;if(void 0!==t.d&&(r.push(" "+e(t.d)),o.push(f.join(", ")+" -> "+e(t.d))),t.k&&(r.push("\n"),u(r,i),r.push(t.k+":")),t.v){i++;var s=Object.keys(t.v),v=s.filter(function(n){return!n.match(/[*?]/)}),a=s.filter(function(n){return n.match(/[*?]/)});v.sort(),a.sort(),s=v.concat(a);for(var c=0;c<s.length;c++){var d=s[c];r.push("\n"),u(r,i),r.push(d+" ->"),(l=f.slice()).push(t.k+"="+d),n(t.v[d],r,i+1,l)}t.s&&(r.push("\n"),u(r,i),r.push("|"),l=f.slice(),n(t.s,r,i+1,l))}}(i,f,0,[]),r?f.join(""):o.join("\n")},u.inspect=u.toString,u.toJSON=function(n){return JSON.stringify(i,function(n,t){return"function"==typeof t?"[Function]":t},n)},u};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.patrun=u):n.patrun=u}).call(this);

},{"gex":87}],176:[function(require,module,exports){
"use strict";var LruCache=require("lru-cache"),Tcp=require("./lib/tcp"),TransportUtil=require("./lib/transport-utils.js"),Http=require("./lib/http"),internals={defaults:{msgprefix:"seneca_",callmax:111111,msgidlen:12,warn:{unknown_message_id:!0,invalid_kind:!0,invalid_origin:!0,no_message_id:!0,message_loop:!0,own_message:!0},check:{message_loop:!0,own_message:!0},web:{type:"web",port:10101,host:"0.0.0.0",path:"/act",protocol:"http",timeout:5555,max_listen_attempts:11,attempt_delay:222,serverOptions:{}},tcp:{type:"tcp",host:"0.0.0.0",port:10201,timeout:5555}},plugin:"transport"};module.exports=function(t){var e=this.util.deepextend(internals.defaults,t),n=new LruCache(e.callmax),i=new TransportUtil({callmap:n,seneca:this,options:e});return this.add({role:internals.plugin,cmd:"inflight"},internals.inflight(n)),this.add({role:internals.plugin,cmd:"listen"},internals.listen),this.add({role:internals.plugin,cmd:"client"},internals.client),this.add({role:internals.plugin,hook:"listen",type:"tcp"},Tcp.listen(e,i)),this.add({role:internals.plugin,hook:"client",type:"tcp"},Tcp.client(e,i)),this.add({role:internals.plugin,hook:"listen",type:"web"},Http.listen(e,i)),this.add({role:internals.plugin,hook:"client",type:"web"},Http.client(e,i)),this.add({role:internals.plugin,hook:"listen",type:"http"},Http.listen(e,i)),this.add({role:internals.plugin,hook:"client",type:"http"},Http.client(e,i)),this.add({role:internals.plugin,hook:"listen",type:"direct"},Http.listen(e,i)),this.add({role:internals.plugin,hook:"client",type:"direct"},Http.client(e,i)),{name:internals.plugin,exportmap:{utils:i},options:e}},module.exports.preload=function(){var t=this,e={name:internals.plugin,exportmap:{utils:function(){var n=t.export(internals.plugin).utils;n!==e.exportmap.utils&&n.apply(this,arguments)}}};return e},internals.inflight=function(t){return function(e,n){var i={};t.forEach(function(t,e){i[e]=t}),n(null,i)}},internals.listen=function(t,e){var n=Object.assign({},t.config,{role:internals.plugin,hook:"listen"}),i=this.util.clean(n);delete n.cmd;var l=internals.legacyError(this,i.type);if(l)return e(l);this.act(i,e)},internals.client=function(t,e){var n=Object.assign({},t.config,{role:internals.plugin,hook:"client"}),i=this.util.clean(n);delete n.cmd;var l=internals.legacyError(this,i.type);if(l)return e(l);this.act(i,e)},internals.legacyError=function(t,e){return"pubsub"===e?t.fail("plugin-needed",{name:"seneca-redis-transport"}):"queue"===e?t.fail("plugin-needed",{name:"seneca-beanstalkd-transport"}):void 0};

},{"./lib/http":172,"./lib/tcp":173,"./lib/transport-utils.js":174,"lru-cache":112}],177:[function(require,module,exports){
"use strict";const Util=require("util"),Common=require("./common");exports.api_act=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=this.options(),n=Common.build_message(this,e,"reply:f?",this.fixedargs),a=n.msg,i=n.reply;return(r.debug.act_caller||r.test)&&(a.caller$="\n    Action call arguments and location: "+(new Error(Util.inspect(a).replace(/\n/g,"")).stack+"\n").replace(/Error: /,"").replace(/.*\/gate-executor\.js:.*\n/g,"").replace(/.*\/seneca\.js:.*\n/g,"").replace(/.*\/seneca\/lib\/.*\.js:.*\n/g,"")),intern.do_act(this,r,a,i),this};const intern=module.exports.intern={do_act:function(e,t,r,n){var a=!1,i=intern.make_actmsg(r),l=new intern.Meta(e,t,r,n);l.gate&&((e=e.delegate()).private$.ge=e.private$.ge.gate());var o={seneca:e,origmsg:r,reply:n||Common.noop,options:e.options(),callpoint:e.private$.callpoint()},s={};s.dn=l.id,s.fn=function(r){try{intern.execute_action(s,e,t,o,i,l,function(e,t,n){a||intern.handle_reply(l,o,i,e,t,n),r()})}catch(e){var n=Util.isError(e)?e:new Error(Util.inspect(e));intern.handle_reply(l,o,i,n),r()}},s.ontm=function(e,t,r){a=!0;var n=Common.error("action_timeout",{timeout:e,start:t,end:r,message:i,pattern:s.ctxt.pattern,legacy_string:o.options.legacy.timeout_string?"[TIMEOUT] ":""});intern.handle_reply(l,o,i,n)},s.tm=l.timeout,e.private$.ge.add(s)},make_actmsg:function(e){var t=Object.assign({},e);return t.id$&&delete t.id$,t.caller$&&delete t.caller$,t.meta$&&delete t.meta$,t.prior$&&delete t.prior$,t.parents$&&delete t.parents$,e.transport$&&(t.transport$=e.transport$),t},Meta:function(e,t,r,n){var a=intern.resolve_msg_id_tx(e,r),i=r.meta$,l=e.fixedmeta||{};this.start=Date.now(),this.end=null,this.pattern=null,this.action=null,this.mi=a[0],this.tx=a[1],this.id=a[0]+"/"+a[1],this.instance=e.id,this.tag=e.tag,this.seneca=e.version,this.version="0.1.0",this.gate=!!r.gate$||l.gate,this.fatal=!!r.fatal$||l.fatal,this.local=!!r.local$||l.local,this.closing=!!r.closing$||i&&i.closing,this.timeout=Math.max(0,"number"==typeof r.timeout$?r.timeout$:t.timeout),this.dflt=r.default$||i&&i.dflt,this.custom=r.custom$||i&&i.custom||null,this.plugin=r.plugin$,this.prior=r.prior$,this.caller=r.caller$,this.parents=r.parents$,this.remote=!!r.remote$,this.sync=null!=r.sync$?!!r.sync$:i&&null!=i.sync?!!i.sync:"function"==typeof n,this.trace=null,this.sub=null,this.data=null,this.err=null,this.err_trace=null,this.error=null,this.empty=null},resolve_msg_id_tx:function(e,t){var r=(t.id$||t.actid$||e.idgen()).split("/");return r[1]=r[1]||t.tx$||e.fixedargs.tx$||e.idgen(),r[0]=r[0]||e.idgen(),r},handle_reply:function(e,t,r,n,a,i){e.end=Date.now();var l=t.seneca,o=t.reply,s={meta:e,msg:r,res:n||a,reply_meta:i,has_callback:!0,err:n||null,out:a||null};if(t.duration=e.end-e.start,t.actlog=intern.actlog,t.errlog=intern.errlog,t.error=Common.error,e.error=Util.isError(s.res),e.error||s.res!==s.err||(s.err=null),e.explain&&i&&i.explain&&e.explain.length<i.explain.length)for(var c=e.explain.length;c<i.explain.length;c++)e.explain.push(i.explain[c]);if(intern.process_outward(t,s,l),s.has_callback)try{o.call(l,s.err,s.res,s.meta)}catch(e){intern.callback_error(l,e,t,s)}},errlog:Common.make_standard_err_log_entry,actlog:Common.make_standard_act_log_entry,process_outward:function(e,t){var r=e.seneca.private$.outward.process(e,t);if(r)if("result"===r.kind)t.res=r.result;else{if("sub_outward_action_failed"===r.code){var n={pattern:e.actdef.pattern,msg:t.msg,...r.info||{}};t.err=Common.error(r.error,r.code,n)}else t.err=r.error||Common.error(r.code||"invalid-process-outward-code",r.info||{});t.meta=t.meta||{},t.meta.error=!0}},execute_action:function(e,t,r,n,a,i,l){var o=t.private$,s=i.prior?o.actdef[i.prior]:t.find(a),c=intern.make_act_delegate(t,r,i,s);n.seneca=c,n.actdef=s,e.ctxt.pattern=s?s.pattern:null;var d={meta:i,msg:a,reply:l},m=o.inward.process(n,d);intern.handle_inward_break(m,t,d,s,n.origmsg)||(s.sub||c.log.debug(intern.actlog(s,a,i,n.origmsg,{kind:"act",case:"IN",did:c.did})),d.id=d.meta.id,d.result=[],d.timelimit=Date.now()+d.meta.timeout,r.history.active&&o.history.add(d),r.legacy.meta&&(d.msg.meta$=i),s.func.call(c,d.msg,d.reply,d.meta))},make_act_delegate:function(e,t,r,n){r=r||{};var a={plugin$:{full:(n=n||{}).plugin_fullname,name:n.plugin_name,tag:n.plugin_tag}},i=e.delegate(a),l=e.private$.act||r.parent;return i.private$.act={parent:l&&l.meta,meta:r,def:n},r.tx&&(i.fixedargs.tx$=r.tx),i},handle_inward_break:function(e,t,r,n,a){if(!e)return!1;var i=r.msg,l=r.reply,o=r.meta;if("error"===e.kind){var s=e.error;if("sub_inward_action_failed"===e.code){var c={pattern:n.pattern,msg:r.msg,...e.info||{}};s=Common.error(s,e.code,c)}else s=s||Common.error(e.code,e.info);return o.error=!0,e.log&&e.log.level&&t.log[e.log.level](intern.errlog(s,intern.errlog(n||{},o.prior,i,a,e.log.data))),l.call(t,s),!0}return"result"===e.kind?(e.log&&e.log.level&&t.log[e.log.level](intern.actlog(n||{},i,o,a,e.log.data)),l.call(t,null,e.result),!0):void 0},callback_error:function(e,t,r,n){var a=r.duration,i=r.callpoint,l=r.actdef||{},o=r.origmsg,s=r.reply,c=n.meta,d=n.msg,m=Util.isError(t)?t:new Error(Util.inspect(t)),g=e.options();m.seneca||(m=Common.error(m,"act_callback",Common.deepextend({},m.details,{message:m.message,pattern:l.pattern,fn:l.func,callback:s,instance:e.toString(),callpoint:i}))),e.log.error(intern.actlog(l,d,c,o,{kind:"act",case:"ERR",info:m.message,code:m.code,err:m,duration:a,did:e.did})),e.emit("act-err",d,m,n.res),g.errhandler&&g.errhandler.call(e,m,m.meta$)}};

},{"./common":181,"util":228}],178:[function(require,module,exports){
"use strict";var Common=require("./common");function cmd_ping(t,a){a(this.ping())}function action_seneca_fatal(t,a){a()}function action_seneca_close(t,a){this.emit("close"),a()}function make_action_seneca_stats(t){return function(a,e){var n;(a=a||{},t.stats.actmap[a.pattern])?(n=t.stats.actmap[a.pattern]).time=t.timestats.calculate(a.pattern):((n=Object.assign({},t.stats)).now=new Date,n.uptime=n.now-n.start,n.now=new Date(n.now).toISOString(),n.start=new Date(n.start).toISOString(),null==a.summary||Common.boolify(a.summary)?n.actmap=void 0:Object.keys(t.stats.actmap).forEach(a=>{t.stats.actmap[a].time=t.timestats.calculate(a)}));return e&&e(n),n}}function action_options_get(t,a){var e=this.options(),n=t.base||null,s=n?e[n]||{}:e,o=t.key?s[t.key]:s;a(Common.copydata(o))}module.exports=function(t){t.stats=make_action_seneca_stats(t.private$),t.add({role:"seneca",cmd:"ping"},cmd_ping),t.add({role:"seneca",cmd:"stats"},t.stats),t.add({role:"seneca",cmd:"close"},action_seneca_close),t.add({role:"seneca",info:"fatal"},action_seneca_fatal),t.add({role:"seneca",get:"options"},action_options_get),t.add({role:"seneca",stats:!0,deprecate$:!0},t.stats),t.add({role:"options",cmd:"get",deprecate$:!0},action_options_get)};

},{"./common":181}],179:[function(require,module,exports){
(function (setImmediate){
"use strict";const Common=require("./common");exports.api_add=function(){var t=this.private$,n=this.options(),e=Common.parsePattern(this,arguments,"action:f? actdef:o?"),i=e.pattern,a=this.util.clean(i),l=e.action||function(t,n,e){n.call(this,null,e.dflt||null)},o=this.util.deepextend(e.actdef)||{};o.raw=Common.deepextend({},i),o.plugin_name=o.plugin_name||"root$",o.plugin_fullname=o.plugin_fullname||o.plugin_name+(("-"===o.plugin_tag?void 0:o.plugin_tag)?"$"+o.plugin_tag:""),o.plugin={name:o.plugin_name,tag:o.plugin_tag,fullname:o.plugin_fullname};var c=t.callpoint();c&&(o.callpoint=c),o.sub=!!i.sub$,o.client=!!i.client$,o.deprecate=i.deprecate$,o.fixed=this.util.Jsonic(i.fixed$||{}),o.custom=this.util.Jsonic(i.custom$||{});var r=i.strict$&&null!==i.strict$.add?!!i.strict$.add:!!n.strict.add,p=!0;n.legacy.actdef&&(o.args=Common.deepextend(a));var d=null==l.name||""===l.name?"action":l.name;o.id=d+"_"+t.next_action_id(),o.name=d,o.func=l,o.pattern=Common.pattern(a),o.msgcanon=this.util.Jsonic(o.pattern);var u=this.find(a);u&&r&&u.pattern!==o.pattern&&(u=null),u?("function"==typeof u.handle&&(u.client&&o.client||!u.client&&!o.client)?(u.handle(o),p=!1):o.priordef=u,o.priorpath=u.id+";"+u.priorpath):o.priorpath="","function"==typeof l.handle&&(o.handle=l.handle),t.stats.actmap[o.pattern]=t.stats.actmap[o.pattern]||intern.make_action_stats(o);var s={};return Common.each(i,function(t,n){t&&"object"==typeof t&&!~n.indexOf("$")&&(s[n]=t,delete a[n])}),o.rules=s,p&&(this.log.debug({kind:"add",case:o.sub?"SUB":"ADD",action:o.id,pattern:o.pattern,callpoint:t.callpoint(!0)}),t.actrouter.add(a,o)),t.actdef[o.id]=o,intern.deferred_modify_action(this,o),this};const intern=module.exports.intern={make_action_stats:function(t){return{id:t.id,plugin:{full:t.plugin_fullname,name:t.plugin_name,tag:t.plugin_tag},prior:t.priorpath,calls:0,done:0,fails:0,time:{}}},deferred_modify_action:function(t,n){setImmediate(function(){Common.each(t.private$.action_modifiers,function(e){e.call(t,n)})})}};

}).call(this,require("timers").setImmediate)
},{"./common":181,"timers":218}],180:[function(require,module,exports){
(function (process){
"use strict";const Assert=require("assert");var Jsonic=require("jsonic"),Norma=require("norma"),Common=require("./common"),errlog=Common.make_standard_err_log_entry,intern={};exports.wrap=function(t,e,r){var i=this;return r="function"==typeof e?e:r,e="function"==typeof e?{}:e,t=Array.isArray(t)?t:[t],Common.each(t,function(t){Common.each(i.list(t),function(t){i.add(t,r,e)})}),this},exports.fix=function(t,e,r){var i=this;t=Jsonic(t||{});var n=i.delegate(t);return n.add=function(){return i.add.apply(this,intern.fix_args(arguments,t,e,r))},n.sub=function(){return i.sub.apply(this,intern.fix_args(arguments,t,e,r))},n},exports.options=function(t,e){var r=this.private$;if(null==t)return r.optioner.get();this.log&&this.log.debug({kind:"options",case:"SET",data:t});var i=r.exports.options=r.optioner.set(t);if("string"==typeof t.tag){var n=this.root.tag;this.root.tag=t.tag,this.root.id=this.root.id.substring(0,this.root.id.indexOf("/"+n))+"/"+t.tag}if(t.log){var o=r.logging.build_log(this);i=r.exports.options=r.optioner.set({log:o})}if(i.legacy.logging&&t&&t.log&&Array.isArray(t.log.map))for(var s=0;s<t.log.map.length;++s)this.logroute(t.log.map[s]);return e?this:i},exports.close=function(t){return function(e){return!1!==e&&null==e?Common.promiser(intern.close.bind(this,t)):intern.close.call(this,t,e)}},exports.toString=function(){return this.fullname},exports.seneca=function(){return this},exports.explain=function(t){if(!0===t)return this.private$.explain=[];if(!1===t){var e=this.private$.explain;return delete this.private$.explain,e}},exports.error=function(t){if("function"==typeof t)return this.options({errhandler:t}),this;if(null==t)throw this.util.error("no_error_code");var e=this.fixedargs&&this.fixedargs.plugin$&&this.fixedargs.plugin$.full,r=null!=e?this.private$.plugins[e]:this.context.plugin;return r&&r.eraro&&r.eraro.has(t)?r.eraro.apply(this,arguments):Common.eraro.apply(this,arguments)},exports.fail=function(...t){if(2===t.length)return e(this,!0,...t);if(3===t.length)return e(this,...t);throw this.util.error("fail_wrong_number_of_args",{num_args:t.length});function e(t,e,r,i){if("boolean"!=typeof e)throw t.util.error("fail_cond_must_be_bool");if(!e)return;const n=t.error(r,i);if(i&&!1===i.throw$)return n;throw n}},exports.inward=function(){var t=Norma("inward:f",arguments);return this.private$.inward.add(t.inward),this},exports.outward=function(){var t=Norma("outward:f",arguments);return this.private$.outward.add(t.outward),this},exports.prior=function(){if(null==this.private$.act)throw this.util.error("no_prior_action",{args:arguments});var t=this.private$.act.def.priordef,e=Common.build_message(this,arguments,"reply:f?",this.fixedargs),r=e.msg,i=e.reply;if(!t){var n=r.meta$||{},o=r.default$||n.dflt||null;return o=null==o?o:Object.assign({},o),i.call(this,null,o,n)}r.prior$=t.id,this.act(r,i)},exports.delegate=function(t,e){var r=this,i=this.root,n=this.options();t=t||{},e=e||{};var o,s=Object.create(r);function a(){return i.log.apply(s,arguments)}s.private$=Object.create(r.private$),s.did=(s.did?s.did+"/":"")+r.private$.didnid(),Object.assign(a,i.log),a.self=(()=>s);var l=n.strict.fixedargs?Object.assign({},t,r.fixedargs):Object.assign({},r.fixedargs,t),p=n.strict.fixedmeta?Object.assign({},e,r.fixedmeta):Object.assign({},r.fixedmeta,e);var u=Object.assign({},r.context);return Object.defineProperties(s,{log:{value:a,writable:!0},toString:{value:function(){if(o)return o;var e={};return Object.keys(t).forEach(r=>{var i=t[r];~r.indexOf("$")||(e[r]=i)}),o=r.toString()+(Object.keys(e).length?"/"+Jsonic.stringify(e):"")},writable:!0},fixedargs:{value:l,writable:!0},fixedmeta:{value:p,writable:!0},delegate:{value:function(t,e){var i=Object.assign({},s.fixedargs,t||{}),n=Object.assign({},s.fixedmeta,e||{});return r.delegate.call(this,i,n)},writable:!0},context:{value:u,writable:!0}}),s},exports.depends=function(){for(var t=this.private$,e=this.util.error,r=Norma("{pluginname:s deps:a? moredeps:s*}",arguments),i=r.deps||r.moredeps||[],n=0;n<i.length;n++){var o=i[n];if(!t.plugin_order.byname.includes(o)&&!t.plugin_order.byname.includes("seneca-"+o)){this.die(e("plugin_required",{name:r.pluginname,dependency:o}));break}}},exports.export=function(t){var e=this.private$,r=this.util.error,i=this.options();"util"===t&&(t="basic");var n=e.exports[t];return!n&&i.strict.exports?this.die(r("export_not_found",{key:t})):n},exports.quiet=function(t){t=t||{};return this.options({test:!1,quiet:!0,log:"none",reload$:!0}).test&&"test"!==t.from?this.test():(this.private$.logging.build_log(this),this)},exports.test=function(t,e){var r=this.options();"-"!=r.tag&&(this.root.id=null==r.id$?this.private$.actnid().substring(0,4)+"/"+r.tag:""+r.id$),"function"!=typeof t&&null!==t&&(e=t,t=null);var i={errhandler:null==t?null:t,test:!0,quiet:!1,reload$:!0,log:(e=!0===e||"true"===e?"test":e)||"test"};return this.options(i).quiet?this.quiet({from:"test"}):(this.private$.logging.build_log(this),this.private$.logger.from_options$||(this.root.private$.logger=this.private$.logging.test_logger),this)},exports.ping=function(){var t=Date.now();return{now:t,uptime:t-this.private$.stats.start,id:this.id,cpu:process.cpuUsage(),mem:process.memoryUsage(),act:this.private$.stats.act,tr:this.private$.transport.register.map(function(t){return Object.assign({when:t.when,err:t.err},t.config)})}},exports.translate=function(t,e,r){var i="string"==typeof t?Jsonic(t):t,n="string"==typeof e?Jsonic(e):e,o={};return"string"==typeof r&&(r=r.split(/\s*,\s*/)),Array.isArray(r)?r.forEach(function(t){t.startsWith("-")?o[t.substring(1)]=!1:o[t]=!0}):o=r&&"object"==typeof r?Object.assign({},r):null,this.add(i,function(t,e){var r;o?(r={},Object.keys(o).forEach(function(e){o[e]&&(r[e]=t[e])})):r=this.util.clean(t);var i=Object.assign(r,n);this.act(i,e)}),this},exports.gate=function(){return this.delegate({gate$:!0})},exports.ungate=function(){return this.fixedargs.gate$=!1,this},exports.list_plugins=function(){return Object.assign({},this.private$.plugins)},exports.find_plugin=function(t,e){var r=Common.make_plugin_key(t,e);return this.private$.plugins[r]},exports.has_plugin=function(t,e){var r=Common.make_plugin_key(t,e);return!!this.private$.plugins[r]},exports.ignore_plugin=function(t,e,r){"boolean"==typeof e&&(r=e,e=null);var i=Common.make_plugin_key(t,e),n=this.private$.ignore_plugins[i]=null==r||!!r;return this.log.info({kind:"plugin",case:"ignore",full:i,ignore:n}),this},exports.find=function(t,e){var r="string"==typeof t?Jsonic(t):t;r=(r=this.util.clean(r))||{};var i=this.private$.actrouter.find(r,e&&e.exact);return i||(i=this.private$.actrouter.find({})),i},exports.has=function(t){return!!this.find(t,{exact:!0})},exports.list=function(t){return this.private$.actrouter.list(null==t?{}:Jsonic(t)).map(t=>t.match)},exports.status=function(t){t=t||{};var e=this.private$.history.stats();return e.log=this.private$.history.list(),{stats:this.stats(t.stats),history:e,transport:this.private$.transport}},exports.reply=function(t){var e=null;return t&&t.meta&&(e=this.private$.history.get(t.meta.id))&&e.reply(t.err,t.out,t.meta),!!e},exports.listen=function(t){return function(...e){var r=this.private$,i=this,n=e[e.length-1];"function"==typeof n?e.pop():n=(()=>{}),i.log.info({kind:"listen",case:"INIT",data:e,callpoint:t(!0)});var o=i.options().transport||{},s=intern.resolve_config(intern.parse_config(e),o);return i.act("role:transport,cmd:listen",{config:s,gate$:!0},function(t,e){if(t)return i.die(r.error(t,"transport_listen",s));n(null,e),n=(()=>{})}),i}},exports.client=function(t){return function(){var e=this.private$,r=Array.prototype.slice.call(arguments);this.log.info({kind:"client",case:"INIT",data:r,callpoint:t(!0)});var i=this.options().legacy||{},n=this.options().transport||{},o=intern.parse_config(r);o.pg=Common.pincanon(o.pin||o.pins);var s=intern.resolve_config(o,n);s.id=s.id||Common.pattern(o);var a=s.pins||(Array.isArray(s.pin)?s.pin:[s.pin||""]);a=a.map(t=>"string"==typeof t?Jsonic(t):t);var l,p=this.order.plugin.task.delegate.exec({ctx:{seneca:this},data:{plugin:{name:"seneca_internal_client",tag:void 0}}}).out.delegate,u=function(t,e,r){i.meta&&(r=r||t.meta$),r.local?this.prior(t,e):l&&l.send?(i.meta&&(t.meta$=r),l.send.call(this,t,e,r)):this.log.error("no-transport-client",{config:s,msg:t})};return u.id=s.id,s.makehandle&&(u.handle=s.makehandle(s)),a.forEach(t=>{t=Object.assign({},t),s.override&&p.wrap(p.util.clean(t),{client_pattern:p.util.pattern(t)},u),t.client$=!0,t.strict$={add:!0},p.add(t,u)}),p.act("role:transport,cmd:client",{config:s,gate$:!0},function(t,r){return t?p.die(e.error(t,"transport_client",s)):null==r?p.die(e.error("transport_client_null",Common.clean(s))):void(l=r)}),this}},exports.decorate=function(){var t=Norma("property:s value:.",arguments),e=t.property;Assert("_"!==e[0],"property cannot start with _"),Assert(void 0===this.private$.decorations[e],"seneca is already decorated with the property: "+e),Assert(void 0===this.root[e],"cannot override a core seneca property: "+e),this.root[e]=this.private$.decorations[e]=t.value},intern.parse_config=function(t){var e={},r=t.filter(t=>null!=t),i=r.length;return 1===i?r[0]&&"object"==typeof r[0]?e=Object.assign({},r[0]):e.port=parseInt(r[0],10):2===i?(e.port=parseInt(r[0],10),e.host=r[1]):3===i&&(e.port=parseInt(r[0],10),e.host=r[1],e.path=r[2]),e},intern.resolve_config=function(t,e){var r=Object.assign({},t);Object.keys(e).forEach(t=>{var i=e[t];i&&"object"==typeof i||(r[t]=void 0===r[t]?i:r[t])}),r.type=r.type||"web","direct"!==r.type&&"http"!==r.type||(r.type="web");var i=e[r.type]||{};return"web"!==(r=Object.assign({},i,r)).type&&"tcp"!==r.type||(r.port=null==r.port?i.port:r.port,r.host=null==r.host?i.host:r.host,r.path=null==r.path?i.path:r.path),r},intern.close=function(t,e){var r=this,i=r.options(),n=!1,o=function(t){if(!n&&"function"==typeof e)return n=!0,e.call(r,t)};if(r.flags.closed)return o();r.ready(a);var s=setTimeout(a,i.close_delay);function a(){if(clearTimeout(s),r.flags.closed)return o();r.closed=!0,r.flags.closed=!0,Common.each(i.system.close_signals,function(t,e){t&&process.removeListener(e,r.private$.exit_close)}),r.log.debug({kind:"close",notice:"start",callpoint:t(!0)}),r.act("role:seneca,cmd:close,closing$:true",function(t){return r.log.debug(errlog(t,{kind:"close",notice:"end"})),r.removeAllListeners("act-in"),r.removeAllListeners("act-out"),r.removeAllListeners("act-err"),r.removeAllListeners("pin"),r.removeAllListeners("after-pin"),r.removeAllListeners("ready"),r.private$.history.close(),r.private$.status_interval&&clearInterval(r.private$.status_interval),o(t)})}return r},intern.fix_args=function(t,e,r,i){var n=Common.parsePattern(this,t,"rest:.*",e);return[n.pattern].concat({fixed$:Object.assign({},r,n.pattern.fixed$),custom$:Object.assign({},i,n.pattern.custom$)}).concat(n.rest)};

}).call(this,require('_process'))
},{"./common":181,"_process":144,"assert":33,"jsonic":99,"norma":117}],181:[function(require,module,exports){
(function (process){
"use strict";const Util=require("util"),Assert=require("assert"),Stringify=require("fast-safe-stringify"),Eraro=require("eraro"),Jsonic=require("jsonic"),Nid=require("nid"),Norma=require("norma"),DefaultsDeep=require("lodash.defaultsdeep"),Errors=require("./errors"),Print=require("./print"),error=exports.error=exports.eraro=Eraro({package:"seneca",msgmap:Errors,override:!0});exports.promiser=function(t,r){return r="function"==typeof t&&null==r?t:r.bind(t),new Promise((t,e)=>{r(r=>r?e(r):t())})},exports.stringify=function(){return Stringify(...arguments)},exports.wrap_error=function(t){throw t.seneca?t:error.call(null,...arguments)},exports.make_plugin_key=function(t,r){if(null==t)throw error("missing_plugin_name");var e=null==t.name?t:t.name,n=null==t.tag?null==r?"":r:t.tag;if("number"==typeof e&&(e=""+e),"number"==typeof n&&(n=""+n),""==e||"string"!=typeof e)throw error("bad_plugin_name",{name:e});var i=e.match(/^([a-zA-Z@][a-zA-Z0-9.~_\-/]*)\$([a-zA-Z0-9.~_-]+)$/);if(i&&(e=i[1],n=i[2]),!e.match(/^(\.|\/|\\|\w:)/)&&(!e.match(/^[a-zA-Z@][a-zA-Z0-9.~_\-/]*$/)||1024<e.length))throw error("bad_plugin_name",{name:e});if(""!=n&&(!n.match(/^[a-zA-Z0-9.~_-]+$/)||1024<n.length))throw error("bad_plugin_tag",{tag:n});return e+(n?"$"+n:"")},exports.boolify=function(t){try{return!!JSON.parse(t)}catch(t){return!1}},exports.tagnid=Nid({length:3,alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var parse_jsonic=exports.parse_jsonic=function(t,r){r=r||"bad_jsonic";try{return null==t?null:Jsonic(t)}catch(n){var e=1===n.line?n.column-1:n.column;throw error(r,{argstr:t,syntax:n.message,line:n.line,col:e})}};exports.parsePattern=function(t,r,e,n){var i=Norma("{strargs:s? objargs:o? moreobjargs:o? "+(e||"")+"}",r);return i.pattern=Object.assign({},i.moreobjargs?i.moreobjargs:null,i.objargs?i.objargs:null,parse_jsonic(i.strargs,"add_string_pattern_syntax"),n),i},exports.build_message=function(t,r,e,n){var i=Norma("{strargs:s? objargs:o? moreobjargs:o? "+(e||"")+"}",r);return i.msg=Object.assign({},i.moreobjargs,i.objargs,parse_jsonic(i.strargs,"msg_jsonic_syntax"),n),i};var copydata=exports.copydata=function(t){var r;if(null===t||"object"!=typeof t)return t;if(Util.isError(t))return r={},Object.getOwnPropertyNames(t).forEach(function(e){r[e]=t[e]}),r;if(t.constructor&&"Date"===t.constructor.name)return(r=new Date).setTime(t.getTime()),r;if(Array.isArray(t)){r=[];for(var e=0,n=t.length;e<n;++e)r[e]=copydata(t[e]);return r}for(var i in r={},t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=copydata(t[i]));return r},pattern=exports.pattern=function(t){if("string"==typeof t)return t;t=t||{};var r=[];return Object.keys(t).forEach(e=>{var n=t[e];~e.indexOf("$")||"function"==typeof n||"object"==typeof n||r.push(e+":"+n)}),r.sort(),r.join(",")};function clean(t,r){if(null==t)return t;for(var e=Array.isArray(t)?[]:{},n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];"$"!=o[o.length-1]&&(e[o]=t[o])}return r&&r.proto,e}function deepextend(...t){return(t=t.reverse()).unshift({}),DefaultsDeep.apply(null,t)}function History(t){var r=this;t=t||{},this._total=0,this._list=[],this._map={},t.prune&&(this._prune_interval=setInterval(function(){r.prune(Date.now())},t.interval||100),this._prune_interval.unref&&this._prune_interval.unref())}exports.pincanon=function t(r){if("string"==typeof r)return pattern(Jsonic(r));if(Array.isArray(r)){var e=r.map(t);return e.sort(),e.join(";")}return pattern(r)},exports.noop=function(){},exports.nil=function(){for(var t=0;t<arguments.length;t++)if("function"==typeof arguments[t])return arguments[t]()},exports.clean=clean,exports.deepextend=deepextend,exports.deep=deepextend,exports.recurse=function(t,r,e){var n=this;t="number"==typeof t?Array.from({length:t},(t,r)=>r):[...t],function i(o,s){if(o)return e(o,s);var a=t.shift();void 0!==a?r.call(n,a,i):e.call(n,o,s)}.call(n)},exports.print=Print.print,exports.each=function(t,r){return null==t||null==r?null:(Assert("function"==typeof r),Array.isArray(t)?t.forEach(r):void Object.keys(t).forEach(e=>r(t[e],e)))},exports.makedie=function(t,r){r=Object.assign(r,t.die?t.die.context:{});var e=0,n=function(n){var i=t.options(),o=i.test,s=i.debug&&i.debug.undead||n&&n.undead,a=i.debug&&i.debug.print&&"full"===i.debug.print.fatal||!1,l=i.debug&&i.debug.print.env||!1;if(0<e){if(!s)throw error(n,"[DEATH LOOP] die count: "+e)}else{e++;try{n?Util.isError(n)||(n=new Error("string"==typeof n?n:Util.inspect(n))):n=new Error("unknown"),n.fatal$=!0;var c={kind:r.txt||"fatal",level:r.level||"fatal",plugin:r.plugin,tag:r.tag,id:r.id,code:n.code||"fatal",notice:n.message,err:n,callpoint:r.callpoint&&r.callpoint()};t.log.fatal(c);var p=n.stack||"";p=p.substring(p.indexOf("\n")+5).replace(/\n\s+/g,"\n               ");var u="pid="+process.pid+", arch="+process.arch+", platform="+process.platform+(a?", path="+process.execPath:"")+", argv="+Util.inspect(process.argv).replace(/\n/g,"")+(a&&l?", env="+Util.inspect(process.env).replace(/\n/g,""):""),f=new Date,g=null,d="\n\n=== SENECA FATAL ERROR ===\nMESSAGE   :::  "+n.message+"\nCODE      :::  "+n.code+"\nINSTANCE  :::  "+t.toString()+"\nDETAILS   :::  "+Util.inspect(a?n.details:(g=clean(n.details)||{},delete g.instance,g),{depth:null}).replace(/\n/g,"\n               ")+"\nSTACK     :::  "+p+"\nWHEN      :::  "+f.toISOString()+", "+f.getTime()+"\nLOG       :::  "+Jsonic.stringify(c)+"\nNODE      :::  "+process.version+", "+process.title+(a?", "+Util.inspect(process.versions).replace(/\s+/g," ")+", "+Util.inspect(process.features).replace(/\s+/g," ")+", "+Util.inspect(process.moduleLoadList).replace(/\s+/g," "):"")+"\nPROCESS   :::  "+u+"\nFOLDER    :::  "+process.env.PWD;if(i.errhandler&&i.errhandler.call(t,n),t.flags.closed)return;if(s||(t.act("role:seneca,info:fatal,closing$:true",{err:n}),t.close(function(r){s||process.nextTick(function(){r&&t.log.fatal({kind:"close",err:Util.inspect(r)}),o&&(r&&Print.internal_err(r),Print.internal_err(d),Print.internal_err("\nSENECA TERMINATED at "+(new Date).toISOString()+". See above for error report.\n")),i.system.exit(1)})})),!s){var _=setTimeout(function(){t.log.fatal({kind:"close",timeout:!0}),i.test&&(Print.internal_err(d),Print.internal_err("\n\nSENECA TERMINATED (on timeout) at "+(new Date).toISOString()+".\n\n")),i.system.exit(2)},i.death_delay);_.unref&&_.unref()}}catch(t){if(this.log.fatal({kind:"panic",panic:Util.inspect(t),orig:arguments[0]}),i.test){var h="\n\nSeneca Panic\n============\n\n"+t.stack+"\n\nOriginal Error:\n"+(arguments[0]&&arguments[0].stack?arguments[0].stack:arguments[0]);Print.internal_err(h)}}}};return n.context=r,n},exports.make_standard_act_log_entry=function(t,r,e,n,i){var o=n.transport$||{},s=e||r.meta$||{},a=s.prior||{};return t=t||{},Object.assign({actid:s.id,msg:r,meta:e,entry:a.entry,prior:a.chain,gate:n.gate$,caller:n.caller$,actdef:t,client:t.client,listen:!!o.origin,transport:o},i)},exports.make_standard_err_log_entry=function(t,r){return t?(t.details&&r&&r.caller&&(t.details.caller=r.caller),Object.assign({notice:t.message,code:t.code,err:t},r)):r},exports.resolve_option=function(t,r){return"function"==typeof t?t(r):t},exports.flatten=function(t,r){for(var e=[];null!=t&&0<t.length;){var n=exports.deep(t[0]);delete n.prop,e.push(n),t=t[0][r]}return e},exports.autoincr=function(){var t=0;return function(){return t++}},exports.make_trace_desc=function(t){return[t.pattern,t.id,t.instance,t.tag,t.version,t.start,t.end,t.sync,t.action]},exports.TRACE_PATTERN=0,exports.TRACE_ID=1,exports.TRACE_INSTANCE=2,exports.TRACE_TAG=3,exports.TRACE_VERSION=4,exports.TRACE_START=5,exports.TRACE_END=6,exports.TRACE_SYNC=7,exports.TRACE_ACTION=8,exports.history=function(t){return new History(t)},History.prototype.stats=function(){return{total:this._total}},History.prototype.add=function(t){this._map[t.id]=t;var r=this._list.length-1;r<0||this._list[r].timelimit<=t.timelimit?this._list.push(t):(r=this.place(t.timelimit),this._list.splice(r,0,t))},History.prototype.place=function(t){var r=this._list.length,e=0,n=r;if(0===this._list.length)return 0;do{if(r=Math.floor((e+n)/2),t>this._list[r].timelimit)r=e=r+1;else{if(!(t<this._list[r].timelimit)){r++;break}n=r}}while(e<n);return r},History.prototype.prune=function(t){var r=this.place(t);if(0<=r&&r<=this._list.length){for(var e=0;e<r;e++)delete this._map[this._list[e].id];this._list=this._list.slice(r)}},History.prototype.get=function(t){return this._map[t]||null},History.prototype.list=function(){return this._list},History.prototype.close=function(){this._prune_interval&&clearInterval(this._prune_interval)},History.prototype.toString=function(){return Util.inspect({total:this._total,map:this._map,list:this._list})},History.prototype[Util.inspect.custom]=History.prototype.toString;

}).call(this,require('_process'))
},{"./errors":182,"./print":189,"_process":144,"assert":33,"eraro":56,"fast-safe-stringify":83,"jsonic":99,"lodash.defaultsdeep":101,"nid":115,"norma":117,"util":228}],182:[function(require,module,exports){
"use strict";module.exports={test_msg:"Test message.",test_args:"Test args <%=arg0%> <%=arg1%>.",test_prop:"TESTING: exists: <%=exists%>, notfound:<%=notfound%>, str=<%=str%>, obj=<%=obj%>, arr=<%=arr%>, bool=<%=bool%>, null=<%=null$%>, delete=<%=delete$%>, undefined=<%=undefined$%>, void=<%=void$%>, NaN=<%=NaN$%>",add_string_pattern_syntax:'Could not add action due to syntax error in pattern string: "<%=argstr%>": Line:<%=line%>, Column:<%=col%>; <%=syntax%>',act_string_args_syntax:'Could execute action due to syntax error in argument string: "<%=argstr%>": Line:<%=line%>, Column:<%=col%>; <%=syntax%>',add_pattern_object_expected_after_string_pattern:'Could not add action; unexpected argument; a pattern object or function should follow the pattern string; arguments were: "<%=args%>".',add_pattern_object_expected:'Could not add action; unexpected argument; a pattern object or string should be the first argument; arguments were: "<%=args%>".',add_action_function_expected:'Could not add action: the action function should appear after the pattern; arguments were: "<%=args%>".',add_action_metadata_not_an_object:"Could not add action: the argument after the action function should be a metadata object: <%=actdef%>.",add_empty_pattern:'Could not add action, as the action pattern is empty: "<%=args%>"',act_if_expects_boolean:'The method act_if expects a boolean value as its first argument, was: "<%=first%>".',act_not_found:"No matching action pattern found for <%=args%>, and no default result provided (using a default$ property).",act_default_bad:"No matching action pattern found for <%=args%>, and default result is not a plain object or an array: <%=xdefault%>.",act_no_args:'No action pattern defined in "<%=args%>"; the first argument should be a string or object pattern.',act_invalid_msg:"Action <%=pattern%> received an invalid message; <%=message%>; message content was: <%=msg%>.",act_execute:"Action <%=pattern%> failed: <%=message%>.",act_callback:"Action <%=pattern%> callback threw: <%=message%>.",act_loop:"Action <%=pattern%> loops back on itself. Action details: <%=actdef%>, history: <%=history%>",result_not_objarr:"Action <%=pattern%> responded with result that was not an object or array: <%=result%>; Use option strict:{result:false} to allow; arguments were: <%=args%>",no_client:'Transport client was not created; arguments were: "<%=args%>".',invalid_options:"Invalid options; <%=message%>",plugin_required:"The <%=name%> plugin depends on the <%=dependency%> plugin, which is not loaded yet.",plugin_init:"The <%=name%> plugin failed to initialize: <%=plugin_error%>.",plugin_init_timeout:'The <%=name%> plugin failed to initialize within <%=timeout%> milliseconds (The init:<%=name%> action did not call the "done" callback in time).',export_not_found:"The export <%=key%> has not been defined by a plugin.",store_cmd_missing:'Entity data store implementation is missing a command; "<%=cmd%>": "<%=store%>".',sub_function_catch:"Pattern subscription function threw: <%=message%> on message: <%=msg%>, result: <%=result%>.",sub_inward_action_failed:"Subscription action on inward pattern <%=pattern%> threw: <%=errmsg%> at <%=errline%> on message data: <%=msg%>. To start debugging, find the `seneca.sub` method call that defines the subscription action, and review the code of the action function.",sub_outward_action_failed:"Subscription action on outward pattern <%=pattern%> threw: <%=errmsg%> at <%=errline%> on message data: <%=msg%>. To start debugging, find the `seneca.sub` method call that defines the subscription action, and review the code of the action function.",ready_failed:"Ready function failed: <%=message%>",unknown_message_reply:"Reply for message <%=id%> failed as message is unknown: <%=args%>",maxparents:"Message has too many parent messages (<%=maxparents%>). There may be an infinite loop. Parents: <%=parents%>, Message: <%=args%>",plugin_define_failed:"The definition action for the plugin <%=fullname%> has failed: <%=message%>. This error is considered fatal as all plugins have to initialize correctly. You should test the plugin by itself to verify that it is working correctly. Also ensure that the configuration options passed to the plugin are correct. These are shown below under in the DETAILS section. There could also be a bug in the plugin. If you think that is the case, please create a github issue on the plugin's repository<%=repo%>, and include this error report.",no_transport_client:"The transport client defined by <%=config%> does not exist for message: <%=msg%>",invalid_plugin_option:"Plugin <%=name%>: option value is not valid: <%=err_msg%> in options <%=options%>",no_prior_action:"The `prior` method must be called inside an action function. Arguments were: <%=args%>",missing_plugin_name:"The plugin name string was missing or empty.",bad_plugin_name:"The plugin name string cannot be empty and must be alphanumeric (matching /^[a-zA-Z][a-zA-Z0-9_]*$/), and cannot be longer than 1024 characters. Name was '<%=name.substring(0,1032)%>'.",bad_plugin_tag:"The plugin tag string, if defined, must be alphanumeric (matching /^[a-zA-Z0-9_]+$/), and cannot be longer than 1024 characters. Name was '<%=name.substring(0,1032)%>', and tag was '<%=tag.substring(0,1032)%>'.",bad_jsonic:"Data string provided in Jsonic format (https://github.com/rjrodger/jsonic) has a syntax error: <%=syntax%> (line:<%=line%>, col:<%=col%>); original: <%=argstr%>",no_error_code:"The Seneca.error or Seneca.fail method was called without an error code string as first argument.",fail_wrong_number_of_args:"The Seneca.fail method was called with the wrong number of arguments: <%=num_args%>",fail_cond_must_be_bool:"The Seneca.fail method expected the `cond` param to be a boolean.",action_timeout:"<%=legacy_string%>Action <%=pattern%> timed out. Timeout was: <%=timeout%> (start: <%=start%>, end: <%=end%>. Message was: <%=message%>.",use_no_args:"The seneca.use method needs at least one argument to define a plugin.",act_invalid_args:"Action <%=pattern%> has invalid arguments; <%=message%>; arguments were: <%=msg%>."},module.exports.deprecation={seneca_parent:"Seneca.parent has been renamed to Seneca.prior. Seneca.parent will be removed in Seneca 4.x.",seneca_next_act:"Seneca.next_act will be removed in Seneca 3.x"};

},{}],183:[function(require,module,exports){
"use strict";const Util=require("util"),Common=require("./common"),intern={};function inward_msg_modify(e,a){var n=a.meta;if(e.actdef){var t=e.actdef.fixed,r=e.actdef.custom;t&&Object.assign(a.msg,t),r&&(n.custom=n.custom||{},Object.assign(n.custom,r))}}function inward_limit_msg(e,a){var n=e.options,t=a.meta;if(t.parents&&n.limits.maxparents<t.parents.length)return{kind:"error",code:"maxparents",info:{maxparents:n.limits.maxparents,numparents:t.parents.length,parents:t.parents.map(e=>e[Common.TRACE_PATTERN]+" "+e[Common.TRACE_ACTION]),args:Util.inspect(Common.clean(a.msg)).replace(/\n/g,"")}}}function inward_announce(e,a){e.actdef&&("function"==typeof e.seneca.on_act_in&&e.seneca.on_act_in(e.actdef,a.msg,a.meta),e.seneca.emit("act-in",a.msg,null,a.meta))}function inward_closed(e,a){if(e.seneca.flags.closed&&!a.meta.closing)return{kind:"error",code:"closed",info:{args:Util.inspect(Common.clean(a.msg)).replace(/\n/g,"")}}}function inward_act_stats(e){if(e.actdef){var a=e.seneca.private$;++a.stats.act.calls;var n=e.actdef.pattern;++(a.stats.actmap[n]=a.stats.actmap[n]||{}).calls}}function inward_act_default(e,a){var n=e.options,t=a.msg,r=a.meta;if(!e.actdef){var i=r.dflt||(n.strict.find?r.dflt:{});if(null!=i&&("object"==typeof i||Array.isArray(i)))return{kind:"result",result:i,log:{level:"debug",data:{kind:"act",case:"DEFAULT"}}};if(null!=i)return{kind:"error",code:"act_default_bad",info:{args:Util.inspect(Common.clean(t)).replace(/\n/g,""),xdefault:Util.inspect(i)}}}}function inward_act_not_found(e,a){var n=e.options,t=a.msg;if(!e.actdef)return{kind:"error",code:"act_not_found",info:{args:Util.inspect(Common.clean(t)).replace(/\n/g,"")},log:{level:n.trace.unknown?"warn":"debug",data:{kind:"act",case:"UNKNOWN"}}}}function inward_validate_msg(e,a){var n=e.options,t=a.msg;if("function"==typeof e.actdef.validate){var r=null;return e.actdef.validate(t,function(e){r=e}),r?{kind:"error",code:n.legacy.error_codes?"act_invalid_args":"act_invalid_msg",info:{pattern:e.actdef.pattern,message:r.message,msg:Common.clean(t),error:r},log:{level:n.trace.invalid?"warn":null,data:{kind:"act",case:"INVALID"}}}:void 0}}function inward_act_cache(e,a){var n=e.options,t=a.meta.id,r=e.seneca.private$;if(null!=t&&n.history.active){var i=r.history.get(t);if(i){r.stats.act.cache++;var c=i.result[i.result.length-1]||{},s={kind:c.err?"error":"result",result:c.res||null,error:c.err||null,log:{level:"debug",data:{kind:"act",case:"CACHE",cachetime:c.when}}};return e.cached$=!0,s}}}function inward_warnings(e,a){var n=e.options,t=a.msg;n.debug.deprecation&&e.actdef.deprecate&&e.seneca.log.warn({kind:"act",case:"DEPRECATED",msg:t,pattern:e.actdef.pattern,notice:e.actdef.deprecate,callpoint:e.callpoint})}function inward_msg_meta(e,a){var n=a.meta;n.pattern=e.actdef.pattern,n.client_pattern=e.actdef.client_pattern,n.action=e.actdef.id,n.plugin=Object.assign({},n.plugin,e.actdef.plugin),n.start=null==n.start?e.start:n.start,n.parents=n.parents||[],n.trace=n.trace||[];var t=e.seneca.private$.act&&e.seneca.private$.act.parent,r=t&&t.custom||n.custom||{};t&&(n.parents=n.parents.concat(t.parents||[]),n.parents.unshift(Common.make_trace_desc(t))),n.custom=Object.assign(r,n.custom,e.seneca.fixedmeta&&e.seneca.fixedmeta.custom),a.msg.explain$&&Array.isArray(a.msg.explain$)?n.explain=a.msg.explain$:t&&t.explain&&(n.explain=t.explain),e.seneca.private$.explain&&(n.explain=n.explain||[],e.seneca.private$.explain.push(n.explain))}function inward_prepare_delegate(e,a){var n=a.meta;e.seneca.fixedargs.tx$=a.meta.tx,a.reply=a.reply.bind(e.seneca),a.reply.seneca=e.seneca;var t=a.reply;e.seneca.good=function(a){e.seneca.log.warn("seneca.good is deprecated and will be removed in 4.0.0"),t(null,a)},e.seneca.bad=function(a){e.seneca.log.warn("seneca.bad is deprecated and will be removed in 4.0.0"),t(a)},e.seneca.reply=function e(a,n){e(a,n)},e.seneca.explain=intern.explain.bind(e.seneca,n),n.explain&&e.seneca.explain({explain$:!0,msg$:Common.clean(a.msg)})}function inward_sub(e,a){var n=a.meta,t=e.seneca.private$;if(!n.prior){var r=e.seneca.util.clean(a.msg),i=t.subrouter.inward.find(r,!1,!0);r.in$=!0;for(var c=0;c<i.length;c++)for(var s=i[c],l=0;l<s.length;l++){var o=s[l];try{o.call(e.seneca,r,null,a.meta)}catch(e){return{kind:"error",code:"sub_inward_action_failed",error:e}}}}}module.exports={msg_modify:inward_msg_modify,closed:inward_closed,act_cache:inward_act_cache,act_default:inward_act_default,act_not_found:inward_act_not_found,validate_msg:inward_validate_msg,warnings:inward_warnings,msg_meta:inward_msg_meta,limit_msg:inward_limit_msg,act_stats:inward_act_stats,prepare_delegate:inward_prepare_delegate,announce:inward_announce,sub:inward_sub,intern:intern},intern.explain=function(e,a){var n=this.explain,t=e.explain;return!0===a||!1===a?n.call(this,a):(t&&null!=a&&(a.explain$&&(a.explain$={start:e.start,pattern:e.pattern,action:e.action,id:e.id,instance:e.instance,tag:e.tag,seneca:e.seneca,version:e.version,gate:e.gate,fatal:e.fatal,local:e.local,closing:e.closing,timeout:e.timeout,dflt:e.dflt,custom:e.custom,plugin:e.plugin,prior:e.prior,caller:e.caller,parents:e.parents,remote:e.remote,sync:e.sync,trace:e.trace,sub:e.sub,data:e.data,err:e.err,err_trace:e.err_trace,error:e.error,empty:e.empty}),t.push(a&&"object"==typeof a?a:{content:a})),t&&this.explain)};

},{"./common":181,"util":228}],184:[function(require,module,exports){
"use strict";var Flatten=require("lodash.flatten"),Eraro=require("eraro"),Norma=require("norma"),Jsonic=require("jsonic"),Common=require("./common"),Errors=require("./errors"),internals={error:Eraro({package:"seneca",msgmap:Errors,override:!0})};exports.argprops=function(r,e,t,n){n=Array.isArray(n)?n:n&&"object"==typeof n?Object.keys(n):"string"==typeof n?n.split(/\s*,\s*/):""+n;var a=Common.clean(Object.assign({},e));return a=Common.deepextend(r,a,t),n.forEach(r=>delete a[r]),a},exports.next_act=function(){for(var r=new Array(arguments.length),e=0;e<r.length;++e)r[e]=arguments[e];var t=this;return t.log.warn({kind:"notice",case:"DEPRECATION",notice:Errors.deprecation.seneca_next_act}),function(e){r.push(e),t.act.apply(t,r)}},exports.findpins=function(){for(var r=this,e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n=[];return Flatten(e).forEach(function(e){e="string"==typeof e?Jsonic(e):e,n=n.concat(r.private$.actrouter.list(e).map(function(r){return r.match}))}),n},exports.act_if=function(){var r=Norma("{execute:b actargs:.*}",arguments);return r.execute?this.act.apply(this,r.actargs):this},exports.hasact=function(r){return!!this.find(r,{exact:!1})},exports.make_legacy_fail=function(r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n="function"==typeof e[e.length-1]?e[e.length-1]:null;if(n&&e.pop(),e[0]&&"object"==typeof e[0]){var a=e[0].code;"string"==typeof a&&e.unshift(a)}var o=internals.error.apply(null,e);return o.callpoint=(new Error).stack.match(/^.*\n.*\n\s*(.*)/)[1],o.seneca={code:o.code,valmap:o.details},this.log.error(Common.make_standard_err_log_entry(o)),r.errhandler&&r.errhandler.call(this,o),n&&n.call(this,o),o}};

},{"./common":181,"./errors":182,"eraro":56,"jsonic":99,"lodash.flatten":102,"norma":117}],185:[function(require,module,exports){
"use strict";const Util=require("util"),Common=require("./common"),default_logspec={level:"info",default_level:"debug",level_text:{100:"all",200:"debug",300:"info",400:"warn",500:"error",600:"fatal",999:"none"},logger:json_logger},level_abbrev={quiet:"none",silent:"none",any:"all",all:"all",print:"debug",standard:"info",test:"warn"},internal_loggers={flat_logger:flat_logger,test_logger:test_logger,json_logger:json_logger};function make_logging(){return{default_logspec:Common.deep(default_logspec),level_abbrev:Common.deep(level_abbrev),load_logger:load_logger,build_log_spec:build_log_spec,build_log:build_log,flat_logger:flat_logger,test_logger:test_logger,json_logger:json_logger}}function flat_logger(e){var t=(e.level_name+"").toUpperCase();t.length<5&&(t+="_".repeat(5-t.length)),t=t.substring(0,5);for(var l=null!=e.err?[e.err.message,e.err.callpoint,e.err.plugin||"",e.err.plugin_callpoint||""]:null!=e.res?[e.res]:null!=e.msg?[e.msg]:Array.isArray(e.data)?e.data:null!=e.data?[e.data]:[],n=new Array(l.length),r=0;r<l.length;r++)n[r]=l[r]&&"object"==typeof l[r]?Common.clean(l[r]):l[r],n[r]=Util.inspect(n[r],{compact:!0,depth:e.depth$||3,breakLength:1/0});var a=n.join(" "),i=null==e.plugin_name?"":e.plugin_name+(null==e.plugin_tag||"-"==e.plugin_tag?"":"$"+e.plugin_tag),o=[e.isot,"string"==typeof e.seneca_id?e.seneca_id.substring(0,5):"-----",t,null==e.kind?"log":e.kind,null==e.case?"LOG":e.case,i,null==e.pattern?"":e.pattern,null==e.action?"":e.action,null==e.idpath?"":e.idpath,a,e.callpoint?Util.inspect(e.callpoint):""];this.private$.print.log(o.join("\t").substring(0,e.maxlen$||11111))}function json_logger(e){var t=Common.stringify(e);this.private$.print.log(t)}function test_logger(e){try{var t=build_test_log(this,e);this.private$.print.log(t)}catch(t){this.private$.print.log(t,e)}}function load_logger(e,t){var l=t=t||json_logger;if("string"==typeof l&&(l=internal_loggers[l+"_logger"]),t.preload&&((l=t.preload.call(e).extend.logger).from_options$=t.from_options$),2==l.length){var n=function(e){return l(this,e)};return n.from_options$=l.from_options$,n}return l}function build_log_spec(e){var t=e.options(),l=t.log,n=Common.deep({text_level:{}},l&&"object"==typeof l?l:default_logspec);Object.keys(n.level_text).forEach(e=>{n.text_level[n.level_text[e]]=parseInt(e,10)});var r=n.text_level,a=n.level_text,i=t.internal&&t.internal.logger||t.logger||n.logger;if("string"==typeof l){let e=null,t=null;if(r[l])n.level=l;else if(level_abbrev[l])n.level=level_abbrev[l];else if(isNaN(e=parseInt(l,10))){if("function"!=typeof(t=internal_loggers[l+"_logger"]))throw Common.error("bad_logspec_string",{logspec:l});i=t}else n.level=e}else if("number"==typeof l)n.level=parseInt(l,10);else if("function"==typeof l)i=l;else if(l&&"object"!=typeof l&&null!=l)throw Common.error("bad_logspec",{logspec:l});n.level=a[n.level]||""+n.level;var o=r[n.level]||parseInt(n.level,10);return o=o<100?100:999<o?999:o,n.live_level=o,i&&(n.logger=i),n}function build_log(e){var t=build_log_spec(e);e.private$.logspec=t;var l=load_logger(e,t.logger);return e.private$.logger=l,e.log=function(e){var t=this;t.entity$?(t=t.private$.get_instance(),e={data:Array.prototype.slice.call(arguments)}):"string"==typeof e&&(e={data:Array.prototype.slice.call(arguments)});var l=t.private$.logspec;e.level=e.level||l.default_level,"number"!=typeof e.level&&(e.level=l.text_level[e.level]||l.text_level[l.default_level]);var n=new Date;return e.isot=e.isot||n.toISOString(),e.when=e.when||n.getTime(),e.level_name=e.level_name||l.level_text[e.level],e.seneca_id=e.seneca_id||t.id,t.did&&(e.seneca_did=e.seneca_did||t.did),t.fixedargs.plugin$&&(e.plugin_name=e.plugin_name||t.fixedargs.plugin$.name,e.plugin_tag=e.plugin_tag||t.fixedargs.plugin$.tag),t.private$.act&&intern.build_act_entry(t.private$.act,e),t.emit("log",e),l.live_level<=e.level&&t.private$.logger.call(this,e),this},e.log.self=(()=>e),Object.keys(t.text_level).forEach(l=>{e.log[l]=make_log_level(l,t)}),t}function make_log_level(e,t){var l=t.text_level[e],n=function(e){var t=this.self();return e&&"object"!=typeof e&&(e={data:Array.prototype.slice.call(arguments)}),e.level=l,t.log(e)};return Object.defineProperty(n,"name",{value:"log_"+e}),n}function build_test_log(e,t){var l=t.when-e.start_time,n=e.private$.exports,r=n&&n.options&&n.options.debug,a=r&&r.datalen||111,i=[l+"/"+e.id.substring(0,2)+"/"+e.tag+" "+(t.level_name+"").toUpperCase(),(t.kind||"data")+(t.case?"/"+t.case:"")+(t.meta?t.meta.sync?"/s":"/a":"")];if("act"===t.kind)t.meta&&(i.push(t.meta.id.split("/").map(function(e){return e.substring(0,2)}).join("/")),i.push(t.meta.pattern)),(t.res||t.result||t.msg)&&i.push(Util.inspect(e.util.clean(t.res||t.result||t.msg)).replace(/\s+/g,"").substring(0,a)),t.actdef&&i.push(t.actdef.id),t.notice&&i.push(t.notice),t.data&&i.push(t.data),"ERR"===t.case&&i.push((t.err.code?"\n\n"+t.err.code:"")+"\n\n"+t.err.stack+"\n"+t.caller+"\n");else if("add"===t.kind)i.push(t.pattern),i.push(t.name);else if("ready"===t.kind)i.push(t.name);else if("plugin"===t.kind)i.push(t.plugin_name+(t.plugin_tag?"$"+t.plugin_tag:""));else if("options"===t.kind);else if("notice"===t.kind)i.push(t.notice);else if("fatal"===t.kind)i.push(t.notice),i.push(t.err&&t.err.stack);else if("listen"===t.kind||"client"===t.kind){var o=(t.options?t.options[0]:t.data?t.data[0]:{})||{};i.push([o.type,o.pin,o.host,"function"==typeof o.port?"":o.port].join(";"))}else i.push(Util.inspect(t).replace(/\n/g," ").substring(0,a));return t.did&&i.push(t.did),i.join("\t")}module.exports=make_logging;var intern=module.exports.intern={build_act_entry:function(e,t){if(t.kind=t.kind||"act",t.actid=t.actid||e.meta.id,t.pattern=t.pattern||e.meta.pattern,t.action=t.action||e.def.id,t.idpath=(""+e.meta.tx).substring(0,5),e.meta.parents)for(var l=0;l<e.meta.parents.length;l++)t.idpath+=("."+((e.meta.parents[l]||[])[1]||"-").split("/")[0]).substring(0,6);t.idpath+=("."+e.meta.mi).substring(0,6)}};

},{"./common":181,"util":228}],186:[function(require,module,exports){
(function (process){
"use strict";var Fs=require("fs"),Path=require("path"),Error=require("eraro"),Jsonic=require("jsonic"),Minimist=require("minimist"),Common=require("./common"),error=Error({package:"seneca",msgmap:ERRMSGMAP()});function boolify(e){return Object.keys(e).forEach(function(r){e[r]="true"===e[r]||"false"!==e[r]&&(e[r]&&"object"==typeof e[r]?boolify(e[r]):e[r])}),e}function ERRMSGMAP(){return{inverted_file_name:"Please use seneca.options.js as the default options file name. The alternate name options.seneca.js is not supported.",require_default_options:"Call to require failed for <%=from%>: <%=errmsg%>."}}module.exports=function(e,r,o){var n,t={argv:{},env:{},default_file:{},loaded:{}},a={};function i(e,r,o){var n=o.from;"string"==typeof o&&(n=o,o={}),"string"==typeof n&&(t.loaded=s(n));var i=Minimist((o&&o.debug&&o.debug.argv||process.argv).slice(2)),c=o&&o.debug&&o.debug.env||process.env;if(Fs.existsSync&&Fs.existsSync("./options.seneca.js"))throw error("inverted_file_name",{from:"./options.seneca.js",module:e});try{t.default_file=e.require&&e.require("./seneca.options.js")}catch(r){if("MODULE_NOT_FOUND"!==r.code){var l={errmsg:r.message,from:"./seneca.options.js",module:e};throw error(r,"require_default_options",l)}}c.SENECA_OPTIONS&&(t.env=Common.deepextend({},t.env,Jsonic(c.SENECA_OPTIONS))),c.SENECA_TEST&&(t.env.test=c.SENECA_TEST),c.SENECA_QUIET&&(t.env.quiet=c.SENECA_QUIET),i.seneca&&(i.seneca.options&&"object"==typeof i.seneca.options?t.argv=i.seneca.options:"string"==typeof i.seneca.options&&("print"===i.seneca.options?t.argv={debug:{print:{options:!0}}}:t.argv=Jsonic(i.seneca.options)),"string"==typeof t.argv.from&&(t.argv=Common.deepextend(s(t.argv.from),t.argv)),boolify(t.argv),null!=i.seneca.tag&&(t.argv.tag=""+i.seneca.tag),i.seneca.log&&(t.argv.log=t.argv.log||{},function(e,r){var o=Array.isArray(e)?e[0]:e;if("string"==typeof o)try{r.log=Jsonic(o)}catch(e){r.log=o}else if(o&&"object"==typeof o){r.log={};var n=Object.keys(o.level||o);n.length>0&&(r.log={level:n[0]})}}(i.seneca.log,t.argv)),i.seneca.test&&(t.argv.test=i.seneca.test),i.seneca.quiet&&(t.argv.quiet=i.seneca.quiet));var g={};!1===o.legacy&&(g.legacy={transport:!1,meta:!1,actdef:!1,logging:!1,error_codes:!1,error:!1,fail:!1});var u=Common.deepextend({},r,t.default_file,a,t.loaded,o,g,t.env,t.argv);return u.log=u.log||u.logger||u.logging||{},u.legacy.logging=Common.boolify(u.legacy.logging),u}function s(e){var r={},o=Path.basename(e)!==e?e:Path.join(process.cwd(),e);if(o.match(/\.json$/i)){var t=Fs.readFileSync&&Fs.readFileSync(o).toString()||"";r=Jsonic(t)}else if(o.match(/\.js$/i))try{r=n.require(o)}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw error(e,"require_options",{from:o,module:n})}return r}return n=o.module&&o.module.require?o.module:e.parent&&e.parent.require?e.parent:e,delete(a=i(n,r,o)).module,{set:function(e){if(null==e)throw error("no_options");return a="string"==typeof e?i(n,r,e):e.reload$?i(n,r,e):Common.deepextend(a,e)},get:function(){return a}}};

}).call(this,require('_process'))
},{"./common":181,"_process":144,"eraro":56,"fs":47,"jsonic":99,"minimist":113,"path":138}],187:[function(require,module,exports){
"use strict";var Util=require("util"),Assert=require("assert"),Common=require("./common"),intern={};function outward_make_error(e,r){if(!e.options.legacy.error&&r.res&&!r.meta.error&&r.res.meta$&&r.res.meta$.err){var t=new Error(r.res.message);for(var a in r.res)t[a]=r.res[a];r.res=t}}function outward_act_cache(e,r){Assert(e.options);var t=e.options,a=r.res,o=r.meta.id,c=e.seneca.private$;if(null!=o&&t.history.active){var s=c.history.get(o);s&&s.result.push({when:Date.now(),res:a})}}function outward_act_stats(e,r){if(e.actdef&&!e.cached$){var t=e.seneca.private$,a=t.stats.act,o=r.meta;++a.done,o&&null==o.prior&&t.timestats.point(e.duration,e.actdef.pattern);var c=e.actdef.pattern,s=t.stats.actmap[c]=t.stats.actmap[c]||{};o&&o.error?(++a.fails,++s.fails):++s.done}}function outward_res_object(e,r){Assert(e.options);var t=e.options,a=r.msg,o=r.res;void 0===r.res&&(r.res=null);var c=null!=o&&!(o&&"object"==typeof o||o instanceof Error||o.meta$||o.entity$||o.force$);r.out instanceof Error&&(c=!0);var s=!("generate_id"===a.cmd||!0===a.note||"native"===a.cmd||"quickcode"===a.cmd);t.strict.result&&s&&c&&(r.res=e.seneca.private$.error("result_not_objarr",{pattern:e.actdef.pattern,args:Util.inspect(Common.clean(a)).replace(/\n/g,""),result:o}),r.meta.error=!0)}function outward_announce(e,r){r.meta.error||("function"==typeof e.seneca.on_act_out&&e.seneca.on_act_out(e.actdef,r.res,r.meta),e.seneca.emit("act-out",r.msg,r.res,r.meta),e.seneca.log.debug(e.actlog(e.actdef,r.msg,r.meta,e.origmsg,{kind:"act",case:"OUT",duration:e.duration,res:r.res,did:e.seneca.did})))}function outward_trace(e,r){var t=e.seneca.private$,a=r.meta,o=r.reply_meta;a&&o&&(a.trace=a.trace||[],a.trace.push({desc:Common.make_trace_desc(o),trace:o.trace||[]}));var c=t.act&&t.act.parent;c&&(c.trace=c.trace||[],c.trace.push({desc:Common.make_trace_desc(a),trace:a.trace||[]}))}function outward_msg_meta(e,r){var t=r.meta,a=r.reply_meta;t&&a&&(t.custom=Object.assign(t.custom,a.custom))}function outward_act_error(e,r){var t=e.seneca,a=e.actdef,o=r.meta;if(o.error){if(r.error_desc=intern.act_error(t,e,r),o.fatal)return t.die(r.error_desc.err);r.has_callback=r.error_desc.call_cb,t&&"function"==typeof t.on_act_err&&t.on_act_err(a,r.res,o),r.err=r.error_desc.err,delete r.err.meta$,r.res=null,r.meta=r.error_desc.err.meta$||r.meta}else r.err=null}function outward_res_entity(e,r){var t=e.seneca;r.res&&r.res.entity$&&t.make$&&(r.res=t.make$(r.res))}function outward_sub(e,r){var t=r.meta,a=e.seneca.private$;if(!t.prior){var o=e.seneca.util.clean(r.msg),c=a.subrouter.outward.find(o,!1,!0);o.out$=!0;for(var s=r.res||r.err||null,n=0;n<c.length;n++)for(var i=c[n],u=0;u<i.length;u++){var m=i[u];try{m.call(e.seneca,o,s,r.meta)}catch(e){return{kind:"error",code:"sub_outward_action_failed",error:e}}}}}module.exports={test$:{intern:intern},act_cache:outward_act_cache,res_object:outward_res_object,act_stats:outward_act_stats,make_error:outward_make_error,announce:outward_announce,trace:outward_trace,act_error:outward_act_error,res_entity:outward_res_entity,msg_meta:outward_msg_meta,sub:outward_sub},intern.act_error=function(e,r,t){var a=r.duration,o=r.callpoint,c=r.actdef||{},s=r.origmsg,n=r.reply,i=t.meta,u=t.msg,m=e.options(),d=!0,l=t.res||t.err;if(l.seneca)l.orig&&"string"==typeof l.orig.code&&0===l.orig.code.indexOf("perm/")&&(l=l.orig);else{var _=Object.assign({},l.details,{message:l.eraro&&l.orig?l.orig.message:l.message,pattern:c.pattern,fn:c.func,callback:n,instance:e.toString(),callpoint:o});if(m.legacy.error)l=r.error(l,"act_execute",_);else{var f=r.error("act_execute",{pattern:c.pattern,message:l.message,callpoint:o});if(delete f.stack,l.meta$=l.meta$||i||{},l.meta$.data=e.util.clean(s),l.meta$.err){var g=Object.assign({},i);g.err=f,l.meta$.err_trace=l.meta$.err_trace||[],l.meta$.err_trace.push(g)}else l.meta$.err=f}}m.legacy.error&&(l.details=l.details||{},l.details.plugin=l.details.plugin||{});var p=r.actlog(c,u,i,s,{kind:"act",case:"ERR",duration:a});return p=r.errlog(l,p),e.log.error(p),e.emit("act-err",u,l),"function"!=typeof m.errhandler||u&&i.fatal||(d=!m.errhandler.call(e,l,l.meta$||i)),{call_cb:d,err:l}};

},{"./common":181,"assert":33,"util":228}],188:[function(require,module,exports){
"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const Uniq=require("lodash.uniq"),Eraro=require("eraro"),nua_1=__importDefault(require("nua")),ordu_1=require("ordu"),Common=require("./common"),Print=require("./print");exports.api_use=api_use;const intern=exports.intern=make_intern();function api_use(e,n){const t=make_tasks(),a=new ordu_1.Ordu({debug:n.debug});return a.operator("seneca_plugin",intern.op.seneca_plugin),a.operator("seneca_export",intern.op.seneca_export),a.operator("seneca_options",intern.op.seneca_options),a.operator("seneca_complete",intern.op.seneca_complete),a.add([t.args,t.load,t.normalize,t.preload,{name:"pre_meta",exec:t.meta},{name:"pre_legacy_extend",exec:t.legacy_extend},t.delegate,t.call_define,t.options,t.define,{name:"post_meta",exec:t.meta},{name:"post_legacy_extend",exec:t.legacy_extend},t.call_prepare,t.complete]),{use:make_use(a,e),ordu:a,tasks:t}}function make_use(e,n){let t={index:0};return function(){let a=this,i=[...arguments];if(0===i.length)throw a.error("use_no_args");let r={seq:t,args:i,seneca:this,callpoint:n(!0)},l={seq:-1,args:[],plugin:null,meta:null,delegate:null,plugin_done:null,exports:{},prepare:{}};return async function(){await e.exec(r,l,{done:function(e){if(e.err){var n=e.err.seneca?e.err:a.private$.error(e.err,e.err.code);n.plugin=n.plugin||(l.plugin?l.plugin.fullname||l.plugin.name:i.join(" ")),n.plugin_callpoint=n.plugin_callpoint||r.callpoint,a.die(n)}}})}(),a}}function make_tasks(){return{args:e=>{let n=[...e.ctx.args];return"options"===n[0]?(e.ctx.seneca.options(n[1]),{op:"stop",why:"legacy-options"}):(null!=n[0]&&"object"==typeof n[0]&&(n[0].init=n[0].define||n[0].init),{op:"merge",out:{plugin:{args:n}}})},load:e=>{let n=e.data.plugin.args,t=e.ctx.seneca,a=t.private$,i=a.use.build_plugin_desc(...n);if(a.ignore_plugins[i.full])return t.log.info({kind:"plugin",case:"ignore",plugin_full:i.full,plugin_name:i.name,plugin_tag:i.tag}),{op:"stop",why:"ignore"};return{op:"merge",out:{plugin:a.use.use_plugin_desc(i)}}},normalize:e=>{let n=e.data.plugin,t={};return t.define=n.define||n.init,t.fullname=Common.make_plugin_key(n),t.loading=!0,{op:"merge",out:{plugin:t}}},preload:e=>{let n=e.ctx.seneca,t=e.data.plugin;if(n.options().system.plugin.load_once&&n.has_plugin(t))return{op:"stop",why:"already-loaded",out:{plugin:{loading:!1}}};let a={};"function"==typeof t.define.preload&&(a=t.define.preload.call(n,t)||{});let i=a.name||t.name;return{op:"seneca_plugin",out:{merge:{meta:a,plugin:{name:i,fullname:Common.make_plugin_key(i,t.tag)}},plugin:t}}},meta:e=>{let n=e.ctx.seneca,t=e.data.plugin,a=e.data.meta,i={};i[t.name]=a.export||t,i[t.fullname]=a.export||t;let r=a.exportmap||a.exports||{};if(Object.keys(r).forEach(e=>{let n=r[e];if(void 0!==n){let a=t.fullname+"/"+e;i[a]=n}}),a.order&&a.order.plugin){let e=Array.isArray(a.order.plugin)?a.order.plugin:[a.order.plugin];n.order.plugin.add(e),delete a.order.plugin}return{op:"seneca_export",out:{exports:i}}},legacy_extend:e=>{let n=e.ctx.seneca,t=e.data.meta;t.extend&&"object"==typeof t.extend&&("function"==typeof t.extend.action_modifier&&n.private$.action_modifiers.push(t.extend.action_modifier),"function"==typeof t.extend.logger&&(t.extend.logger.replace||"function"!=typeof n.private$.logger.add?n.private$.logger=t.extend.logger:n.private$.logger.add(t.extend.logger)))},delegate:e=>{let n=e.ctx.seneca,t=e.data.plugin,a=n.delegate({plugin$:{name:t.name,tag:t.tag},fatal$:!0});a.private$=Object.create(n.private$),a.private$.ge=a.private$.ge.gate(),a.die=Common.makedie(a,{type:"plugin",plugin:t.name});let i=[];return a.add=function(){let e=[...arguments],r=e[e.length-1]||{};return"function"==typeof r&&(r={},e.push(r)),r.plugin_name=t.name||"-",r.plugin_tag=t.tag||"-",r.plugin_fullname=t.fullname,r.log=a.log,i.push(r),n.add.apply(a,e),a},a.__update_plugin__=function(e){a.context.name=e.name||"-",a.context.tag=e.tag||"-",a.context.full=e.fullname||"-",i.forEach(function(n){n.plugin_name=e.name||n.plugin_name||"-",n.plugin_tag=e.tag||n.plugin_tag||"-",n.plugin_fullname=e.fullname||n.plugin_fullname||"-"})},a.init=function(e){let n={role:"seneca",plugin:"init",init:t.name};null!=t.tag&&"-"!=t.tag&&(n.tag=t.tag),a.add(n,function(n,t){e.call(this,t)})},a.context.plugin=t,a.context.plugin.mark=Math.random(),{op:"merge",out:{delegate:a}}},call_define:e=>{let n=e.data.plugin,t=e.data.delegate,a=e.ctx.seq.index++,i={role:"seneca",plugin:"define",name:n.name,seq:a};return null!==n.tag&&(i.tag=n.tag),new Promise(e=>{t.add(i,(n,t)=>{e({op:"merge",out:{seq:a,plugin_done:t}})}),t.act({role:"seneca",plugin:"define",name:n.name,tag:n.tag,seq:a,default$:{},fatal$:!0,local$:!0})})},options:e=>{let n=e.data.plugin,t=e.data.delegate,a=t.options(),i=n.fullname,r=n.defaults||{},l=Object.assign({},a[i],a.plugin[i],a[i+"$"+n.tag],a.plugin[i+"$"+n.tag]),o=i!==n.name?n.name:null;o||0!==i.indexOf("seneca-")||(o=i.substring("seneca-".length));let p=Object.assign({},a[o],a.plugin[o],a[o+"$"+n.tag],a.plugin[o+"$"+n.tag]),u={},g=n.errors||n.define&&n.define.errors;g&&(u.errors=g);let s=Object.assign(u,p,l,n.options||{}),d={},c=t.util.Joi,m="function"==typeof r?r({Joi:c}):r,f=intern.prepare_spec(c,m,{allow_unknown:!0},{}),_=f.validate(s),x=void 0;return _.error?x=t.error("invalid_plugin_option",{name:i,err_msg:_.error.message,options:s}):d=_.value,{op:"seneca_options",err:x,out:{plugin:{options:d,options_schema:f}}}},define:e=>{let n=e.ctx.seneca,t=e.data.plugin,a=e.data.delegate,i=e.data.plugin.options;a.log.debug({kind:"plugin",case:"DEFINE",name:t.name,tag:t.tag,options:i,callpoint:e.ctx.callpoint});let r=intern.define_plugin(a,t,n.util.clean(i));return t.meta=r,"function"==typeof r&&(r={service:r}),t.name=r.name||t.name,t.tag=r.tag||t.tag||t.options&&t.options.tag$,t.fullname=Common.make_plugin_key(t),t.service=r.service||t.service,a.__update_plugin__(t),n.private$.plugins[t.fullname]=t,n.private$.plugin_order.byname.push(t.name),n.private$.plugin_order.byname=Uniq(n.private$.plugin_order.byname),n.private$.plugin_order.byref.push(t.fullname),"amqp-transport"===t.name&&n.options({legacy:{meta:!0}}),"function"==typeof i.defined$&&i.defined$(t),{op:"merge",out:{meta:r}}},call_prepare:e=>{let n=e.data.plugin,t=e.data.plugin.options,a=e.data.delegate;if(!1===t.init$)return;let i=e.data.exports;return a.log.debug({kind:"plugin",case:"INIT",name:n.name,tag:n.tag,exports:i}),new Promise(t=>{a.act({role:"seneca",plugin:"init",seq:e.data.seq,init:n.name,tag:n.tag,default$:{},fatal$:!0,local$:!0},function(e,n){t({op:"merge",out:{prepare:{err:e,res:n}}})})})},complete:e=>{let n=e.data.prepare,t=e.data.plugin,a=e.data.plugin_done,i=e.data.plugin.options,r=e.data.delegate,l=r.options();if(n){if(n.err){let e={err_code:"plugin_init"};return e.plugin_error=n.err.message,"action-timeout"===n.err.code&&(e.err_code="plugin_init_timeout",e.timeout=l.timeout),{op:"seneca_complete",out:{plugin:e}}}let e=t.name+(t.tag?"$"+t.tag:"");l.debug.print&&l.debug.print.options&&Print.plugin_options(r,e,i),r.log.info({kind:"plugin",case:"READY",name:t.name,tag:t.tag}),"function"==typeof i.inited$&&i.inited$(t)}return a(),{op:"seneca_complete",out:{plugin:{loading:!1}}}}}}function make_intern(){return{op:{seneca_plugin:(e,n,t)=>(nua_1.default(t,e.out.merge,{preserve:!0}),n.seneca.private$.plugins[t.plugin.fullname]=e.out.plugin,{stop:!1}),seneca_export:(e,n,t)=>(Object.assign(t.exports,e.out.exports),Object.assign(n.seneca.private$.exports,e.out.exports),{stop:!1}),seneca_options:(e,n,t)=>{nua_1.default(t.plugin,e.out.plugin,{preserve:!0});let a=t.plugin.fullname,i=t.plugin.options,r={plugin:{}};return r.plugin[a]=i,n.seneca.options(r),{stop:!1}},seneca_complete:(e,n,t)=>(nua_1.default(t.plugin,e.out.plugin,{preserve:!0}),t.prepare.err&&t.delegate.die(t.delegate.error(t.prepare.err,t.plugin.err_code,t.plugin)),{stop:!0})},define_plugin:function(e,n,t){if(n.define.length>1){let t=n.define.toString();throw n.init_func_sig=(t.match(/^(.*)\r*\n/)||[])[1],e.error("unsupported_legacy_plugin",n)}let a;t.errors&&(n.eraro=Eraro({package:"seneca",msgmap:t.errors,override:!0}));try{a=n.define.call(e,t)||{}}catch(e){Common.wrap_error(e,"plugin_define_failed",{fullname:n.fullname,message:(e.message+(" ("+e.stack.match(/\n.*?\n/)).replace(/\n.*\//g,"")).replace(/\n/g,""),options:t,repo:n.repo?" "+n.repo+"/issues":""})}(a="string"==typeof a?{name:a}:a).options=a.options||t;let i={};return i[n.fullname]=a.options,e.options(i),a},prepare_spec:function(e,n,t,a){if(e.isSchema(n,{legacy:!0}))return n;let i=e.object();return t.allow_unknown&&(i=i.unknown()),intern.walk(e,i,n,"",t,a,function(n){if(n&&e.isSchema(n,{legacy:!0}))return n;{let a=typeof n;return t.must_match_literals?e.any().required().valid(n):void 0===n?e.any().optional():null==n?e.any().default(null):"number"===a&&Number.isInteger(n)?e.number().integer().default(n):"string"===a?e.string().empty("").default(()=>n):e[a]().default(()=>n)}})},walk:function(e,n,t,a,i,r,l){let o=n;if(Array.isArray(t))return e.array().default(t);for(let n in t){let p=t[n],u=typeof p,g={};if(null==p||e.isSchema(p,{legacy:!0})||"object"!==u)g[n]=l(p);else{let t=""===a?n:a+"."+n,o=e.object().default();i.allow_unknown&&(o=o.unknown()),g[n]=intern.walk(e,o,p,t,i,r,l)}o=o.keys(g)}return o}}}

},{"./common":181,"./print":189,"eraro":56,"lodash.uniq":111,"nua":118,"ordu":125}],189:[function(require,module,exports){
"use strict";var Util=require("util"),Minimist=require("minimist");module.exports=function(n,i){var t=Minimist(i.slice(2)),e=t.seneca;n.root.argv=e,t.seneca&&e.print&&e.print.options&&n.options({debug:{print:{options:!0}}})},module.exports.print_options=function(n,i){i.debug.print.options&&(n.private$.print.log("\nSeneca Options ("+n.id+"): before plugins\n===\n"),n.private$.print.log(Util.inspect(i,{depth:null})),n.private$.print.log(""))},module.exports.print=function(n,i){n?module.exports.internal_err("ERROR: "+n.message):module.exports.internal_log(Util.inspect(i,{depth:null}))},module.exports.internal_log=function(){var n=console.log;n.apply(n,arguments)},module.exports.internal_err=function(){console.error.apply(console.error,arguments)},module.exports.plugin_options=function(n,i,t){n.private$.print.log("\nSeneca Options ("+n.id+"): plugin: "+i+"\n===\n"),n.private$.print.log(Util.inspect(t,{depth:null})),n.private$.print.log("")};

},{"minimist":113,"util":228}],190:[function(require,module,exports){
"use strict";const Common=require("./common");function api_ready(e){var r=this;return setTimeout(function(){if("function"==typeof e){var a=r.root.private$,t=function(){e.call(r)},i=(null==e.name||""===e.name||"ready"===e.name?"ready_":e.name+"_ready_")+a.next_ready_id();Object.defineProperty(t,"name",{value:i}),a.ge.isclear()?execute_ready(r,t):a.ready_list.push(t)}},r.private$.ge.options.interval),r}function clear_ready(){const e=this;var r=e.private$;if(e.emit("ready"),execute_ready(e,r.ready_list.shift()),r.ge.isclear())for(;0<r.ready_list.length;)execute_ready(e,r.ready_list.shift())}function execute_ready(e,r){if(null!=r){var a=e.options();try{e.log.debug({kind:"ready",case:"call",name:r.name}),r()}catch(r){var t=e.error(r,"ready_failed",{message:r.message});a.errhandler?a.errhandler.call(e,t):e.die(t)}}}module.exports=function(e){var r=e.private$;return r.next_ready_id=Common.autoincr(),r.ready_list=[],{api_ready:api_ready,clear_ready:clear_ready.bind(e),execute_ready:execute_ready}};

},{"./common":181}],191:[function(require,module,exports){
"use strict";const Common=require("./common");exports.api_sub=function(){var t=Common.parsePattern(this,arguments,"action:f"),r=t.pattern,n=t.action,a=!!r.in$,i=!!r.out$;i||(a=!0);var o=this.util.clean(r);return[a?this.private$.subrouter.inward:null,i?this.private$.subrouter.outward:null].filter(t=>t).forEach(t=>{var r=t.find(o,!0);r||(t.add(o,r=[]),r.pattern=Common.pattern(o)),r.push(n)}),this};

},{"./common":181}],192:[function(require,module,exports){
(function (Buffer){
"use strict";var Util=require("util"),Http=require("http"),Https=require("https"),Qs=require("qs"),Url=require("url"),Jsonic=require("jsonic"),Wreck=require("@hapi/wreck"),Common=require("./common");function externalize_msg(e,t,r){if(t)return t instanceof Error&&(t=Common.copydata(t)),t.meta$=r,t}function externalize_reply(e,t,r,n){var o=t||r;return o||(o={},n.empty=!0),o.meta$=n,Util.isError(o)&&((o=Common.copydata(o)).meta$.error=!0),o}function internalize_msg(e,t){if(t){var r=(t=handle_entity(e,t)).meta$||{};return delete t.meta$,delete t.fatal$,t.id$=r.id,t.sync$=r.sync,t.custom$=r.custom,t.explain$=r.explain,t.parents$=r.parents||[],t.parents$.unshift(Common.make_trace_desc(r)),t.remote$=!0,t}}function internalize_reply(e,t){var r={},n=null,o=null;return t&&(r=t.meta$)&&(delete t.meta$,r.remote=!0,r.error?(n=new Error(t.message),Object.assign(n,t)):r.empty||(o=handle_entity(e,t))),{err:n,out:o,meta:r}}function stringifyJSON(e){if(e)return Common.stringify(e)}function parseJSON(e){if(e){var t=e.toString();try{return JSON.parse(t)}catch(e){return e.input=t,e}}}function handle_entity(e,t){return e.make$&&(t.entity$&&(t=e.make$(t)),Object.keys(t).forEach(function(r){var n=t[r];n&&"object"==typeof n&&n.entity$&&(t[r]=e.make$(n))})),t}function register(e,t){return function(r,n){this.private$.transport.register.push({when:Date.now(),config:e,err:r,res:n}),t(r,n)}}function close(e,t){e.add("role:seneca,cmd:close",function(e,r){var n=this;t.call(n,function(t){t&&n.log.error(t),n.prior(e,r)})})}function action_listen(e,t){var r=Object.assign({},e.config,{role:"transport",hook:"listen"});delete r.cmd;var n=this.util.clean(r);this.act(n,register(n,t))}function action_client(e,t){var r=Object.assign({},e.config,{role:"transport",hook:"client"});delete r.cmd;var n=this.util.clean(r);this.act(n,register(n,t))}function hook_listen_web(e,t){var r=this.root.delegate(),n=r.options().transport,o=r.util.deepextend(e);o.port=null==o.port?n.port:o.port,o.modify_response=o.modify_response||web_modify_response;var i="https"===o.protocol?Https.createServer(o.custom||o.serverOptions):Http.createServer();i.on("request",function(e,t){e.setEncoding("utf8"),e.query=Qs.parse(Url.parse(e.url).query);var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){var i,a,s=n.join(""),c=parseJSON(s),l=!(i=Util.isError(c)?{json:s,role:"seneca",make:"error",code:"parseJSON",err:c}:Object.assign(c,e.query&&e.query.msg$?Jsonic(e.query.msg$):{},e.query||{})).meta$&&e.headers["seneca-id"];l&&(i.meta$={id:e.headers["seneca-id"]},a=e.headers["seneca-origin"]),i=internalize_msg(r,i),r.act(i,function(e,n,i){var s={err:e,out:n,meta:i,config:o,headers:{"Content-Type":"application/json","Cache-Control":"private, max-age=0, no-cache, no-store"}};s.status=e?500:200,s=o.modify_response(r,s),l&&(s.headers["seneca-id"]=l,s.headers["seneca-origin"]=a),t.writeHead(s.status,s.headers),t.end(s.body)})})}),i.on("error",t),i.on("listening",function(){o.port=i.address().port,t(o)});var a,s,c=(a=o.port=r.util.resolve_option(o.port,o),s=o.host=r.util.resolve_option(o.host,o),r.log.debug("transport web listen",o),i.listen(a,s));close(r,function(e){c&&c.close(),e()})}function web_modify_response(e,t){return Array.isArray(t.out)&&(t.out={array$:t.out,meta$:t.out.meta$}),t.body=stringifyJSON(externalize_reply(e,t.err,t.out,t.meta)),t.headers["Content-Length"]=Buffer.byteLength(t.body),t}function makeWreck(){return Wreck.defaults({agents:{http:new Http.Agent({keepAlive:!0,maxFreeSockets:1/0}),https:new Https.Agent({keepAlive:!0,maxFreeSockets:1/0}),httpsAllowUnauthorized:new Https.Agent({keepAlive:!0,maxFreeSockets:1/0,rejectUnauthorized:!1})}})}function hook_client_web(e,t){var r=this.root.delegate(),n=r.options().transport,o=r.util.deepextend(e);o.port=null==o.port?n.port:o.port,o.modify_request=o.modify_request||web_modify_request,o.port=r.util.resolve_option(o.port,o),o.host=r.util.resolve_option(o.host,o),o.wreck=r.util.resolve_option(o.wreck||makeWreck,o),t({config:o,send:function(e,t,n){var i=this,a={msg:e,meta:n,url:o.protocol+"://"+o.host+":"+o.port+o.path,method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}};a=o.modify_request(r,a),o.wreck.request(a.method,a.url,a.wreck).then(function(e){var t=function(e){e.meta$||(e.meta$={id:n.id}),r.reply(internalize_reply(i,e))};Wreck.read(e,a.wreck.read).then(function(e){var r=parseJSON(e);if(Array.isArray(r.array$)){var n=r.array$;n.meta$=r.meta$,r=n}t(r)}).catch(t)}).catch(function(e){return t(e)})}})}function web_modify_request(e,t){return t.body=stringifyJSON(externalize_msg(e,t.msg,t.meta)),t.headers["Content-Length"]=Buffer.byteLength(t.body),t.wreck={json:!1,headers:t.headers,payload:t.body,read:{}},t}module.exports=function(e){e.add("role:transport,cmd:listen",action_listen),e.add("role:transport,cmd:client",action_client),e.add("role:transport,hook:listen,type:web",hook_listen_web),e.add("role:transport,hook:client,type:web",hook_client_web);var t={};t.stringifyJSON=stringifyJSON,t.parseJSON=parseJSON,t.externalize_msg=externalize_msg,t.externalize_reply=externalize_reply,t.internalize_msg=internalize_msg,t.internalize_reply=internalize_reply,t.close=close,t.info=function(){var t=e.list(),r={local:{},remote:{}};return t.forEach(function(t){var n=e.find(t,{exact:!0});n.client?r.remote[n.pattern]=n.id:r.local[n.pattern]=n.id}),r},e.private$.exports["transport/utils"]=t};

}).call(this,require("buffer").Buffer)
},{"./common":181,"@hapi/wreck":29,"buffer":49,"http":197,"https":91,"jsonic":99,"qs":146,"url":219,"util":228}],193:[function(require,module,exports){
module.exports={
  "_from": "seneca@^3.22.0",
  "_id": "seneca@3.22.0",
  "_inBundle": false,
  "_integrity": "sha512-QsqkCJugJIJE77l1vNR3xEEegCmS5po23s6jnfTKCa9hq+7ZKwP4j3TLkihB/p4zMblk55CsXx5axONp5Ujzsw==",
  "_location": "/seneca",
  "_phantomChildren": {},
  "_requested": {
    "type": "range",
    "registry": true,
    "raw": "seneca@^3.22.0",
    "name": "seneca",
    "escapedName": "seneca",
    "rawSpec": "^3.22.0",
    "saveSpec": null,
    "fetchSpec": "^3.22.0"
  },
  "_requiredBy": [
    "#DEV:/"
  ],
  "_resolved": "http://localhost:4873/seneca/-/seneca-3.22.0.tgz",
  "_shasum": "8fd72504f08e5262ec86c9aff9d12aa392298064",
  "_spec": "seneca@^3.22.0",
  "_where": "/Users/richard/Projects/seneca/browser",
  "author": {
    "name": "Richard Rodger",
    "url": "http://richardrodger.com/"
  },
  "bugs": {
    "url": "https://github.com/senecajs/seneca/issues"
  },
  "bundleDependencies": false,
  "contributors": [
    {
      "name": "Adrien Becchis",
      "url": "https://github.com/AdrieanKhisbe"
    },
    {
      "name": "Alexandru Mircea",
      "url": "https://github.com/mirceaalexandru"
    },
    {
      "name": "Adrian Rossouw",
      "url": "http://daemon.co.za"
    },
    {
      "name": "Colin Ihrig",
      "url": "https://github.com/cjihrig"
    },
    {
      "name": "Cristian Ianto",
      "url": "https://github.com/iantocristian"
    },
    {
      "name": "Cristian Kiss",
      "url": "https://github.com/ckiss"
    },
    {
      "name": "David Mark Clements",
      "url": "https://github.com/davidmarkclements"
    },
    {
      "name": "Dean McDonnell",
      "url": "https://github.com/mcdonnelldean"
    },
    {
      "name": "Dominic Tarr",
      "url": "https://github.com/dominictarr"
    },
    {
      "name": "Dustin Deus",
      "url": "https://github.com/StarpTech"
    },
    {
      "name": "Glen Keane",
      "url": "https://github.com/thekemkid"
    },
    {
      "name": "Gege Pincin",
      "url": "https://github.com/Georgette"
    },
    {
      "name": "Jake Pruitt",
      "url": "https://github.com/jakepruitt"
    },
    {
      "name": "Maciej Maecki",
      "url": "http://mmalecki.com"
    },
    {
      "name": "Matteo Collina",
      "url": "https://github.com/mcollina"
    },
    {
      "name": "Marian Radulescu",
      "url": "https://github.com/marianr"
    },
    {
      "name": "Marius Ursache",
      "url": "https://github.com/bamse16"
    },
    {
      "name": "Martin Betak",
      "url": "https://github.com/matobet"
    },
    {
      "name": "Maxence Dalmais",
      "url": "https://github.com/maxired"
    },
    {
      "name": "Mihai Dima",
      "url": "https://github.com/mihaidma"
    },
    {
      "name": "Naomi Feehan",
      "url": "https://github.com/naomifeehan"
    },
    {
      "name": "Paolo Chiodi",
      "url": "https://github.com/paolochiodi"
    },
    {
      "name": "Peter Elger",
      "url": "https://github.com/pelger"
    },
    {
      "name": "Reto Inderbitzin",
      "url": "https://github.com/indr"
    },
    {
      "name": "Reid Rankin",
      "url": "https://github.com/reidrankin"
    },
    {
      "name": "Tane Piper",
      "url": "https://github.com/tanepiper"
    },
    {
      "name": "Wyatt Preul",
      "url": "https://github.com/geek"
    },
    {
      "name": "Vald Houbiev",
      "url": "https://github.com/vladgolubev"
    },
    {
      "name": "Vito Tardia",
      "url": "https://github.com/vtardia"
    }
  ],
  "dependencies": {
    "@hapi/joi": "^17.1.1",
    "@hapi/wreck": "^17.0.0",
    "eraro": "^2.1.0",
    "fast-safe-stringify": "^2.0.7",
    "gate-executor": "^2.1.0",
    "gex": "^1.0.0",
    "jsonic": "^0.3.1",
    "lodash.defaultsdeep": "^4.6.1",
    "lodash.flatten": "^4.4.0",
    "lodash.uniq": "^4.5.0",
    "minimist": "^1.2.5",
    "nid": "^1.1.0",
    "norma": "^2.0.2",
    "optioner": "^5.0.1",
    "ordu": "^1.7.1",
    "patrun": "^4.0.0",
    "qs": "^6.9.4",
    "rolling-stats": "^0.1.1",
    "seneca-transport": "^6.0.0",
    "use-plugin": "^8.2.0"
  },
  "deprecated": false,
  "description": "A Microservices Framework for Node.js",
  "devDependencies": {
    "@hapi/code": "^8.0.1",
    "@hapi/hoek": "^9.0.4",
    "@hapi/lab": "^22.0.4",
    "@seneca/test-plugin": "0.0.1",
    "@types/node": "^14.0.14",
    "async": "^3.2.0",
    "bench": "^0.3.6",
    "coveralls": "^3.1.0",
    "handlebars": "^4.7.6",
    "lab-transform-typescript": "^3.0.1",
    "lolex": "^6.0.0",
    "prettier": "^2.0.5",
    "seneca-entity": "^10.0.2",
    "seneca-error-test": "^0.2.2",
    "seneca-joi": "^7.0.2",
    "seneca-promisify": "^2.0.0",
    "typescript": "^3.9.6"
  },
  "engines": {
    "node": ">=10"
  },
  "files": [
    "LICENSE",
    "README.md",
    "CHANGES.md",
    "lib",
    "seneca.js"
  ],
  "homepage": "http://senecajs.org",
  "keywords": [
    "micro",
    "service",
    "microservice",
    "micro-service",
    "microservices",
    "micro-services",
    "services",
    "micro services",
    "micro service",
    "framework",
    "minimum",
    "viable",
    "product",
    "toolkit",
    "startup"
  ],
  "license": "MIT",
  "main": "seneca.js",
  "name": "seneca",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/senecajs/seneca.git"
  },
  "scripts": {
    "build": "tsc -d",
    "clean": "rm -rf node_modules package-lock.json yarn.lock",
    "coverage": "lab -v -P test -L -t 90 -r html > docs/coverage.html",
    "coveralls": "lab -s -P test -r lcov | coveralls",
    "prettier": "prettier --write *.js lib/*.js test/*.js",
    "repo-publish": "REPO_VERSION=`node -e \"console.log(require('./package').version)\"` && npm run clean && npm i --registry http://registry.npmjs.org && npm run prettier && npm run build && npm test && npm run repo-tag --registry http://registry.npmjs.org && npm publish  --registry http://registry.npmjs.org && npm dist-tag add seneca@$REPO_VERSION next --registry http://registry.npmjs.org && npm dist-tag add seneca@$REPO_VERSION plugin --registry http://registry.npmjs.org",
    "repo-tag": "REPO_VERSION=`node -e \"console.log(require('./package').version)\"` && echo TAG: v$REPO_VERSION && git commit -a -m v$REPO_VERSION && git push && git tag v$REPO_VERSION && git push --tags;",
    "reset": "npm run clean && npm i && npm run build && npm test",
    "smoke": "node test/stubs/launch.js",
    "test": "lab -v -P test -L -t 90 --sourcemaps --transform node_modules/lab-transform-typescript  -r console -o stdout -r html -o test/coverage.html",
    "watch": "tsc -w -d"
  },
  "version": "3.22.0"
}

},{}],194:[function(require,module,exports){
(function (process){
"use strict";const Events=require("events"),Util=require("util"),GateExecutor=require("gate-executor"),Jsonic=require("jsonic"),UsePlugin=require("use-plugin"),Nid=require("nid"),Patrun=require("patrun"),Stats=require("rolling-stats"),{LegacyOrdu:LegacyOrdu}=require("ordu"),Eraro=require("eraro"),Optioner=require("optioner"),Joi=require("@hapi/joi"),Common=require("./lib/common"),Logging=require("./lib/logging"),API=require("./lib/api"),Ready=require("./lib/ready"),Add=require("./lib/add"),Sub=require("./lib/sub"),Act=require("./lib/act"),Plugin=require("./lib/plugin"),Inward=require("./lib/inward"),Outward=require("./lib/outward"),Legacy=require("./lib/legacy"),Options=require("./lib/options"),Package=require("./package.json"),Print=require("./lib/print"),Actions=require("./lib/actions"),Transport=require("./lib/transport"),error=Common.error,option_defaults={tag:"-",timeout:22222,idlen:12,didlen:4,default_plugins:{transport:!0},test:!1,quiet:!1,log:Logging().default_logspec,logger:null,death_delay:11111,close_delay:22222,debug:{fragile:!1,undead:!1,print:{options:!1,fatal:"summary",env:!1},act_caller:!1,short_logs:!1,callpoint:!1,deprecation:!0,argv:null,env:null,datalen:111},strict:{result:!0,fixedargs:!0,add:!1,find:!0,maxloop:11,exports:!1},history:{active:!0,prune:!0,interval:100},trace:{act:!1,stack:!1,unknown:!0,invalid:!1},stats:{size:1024,interval:6e4,running:!1},plugin:{},plugins:[],system:{exit:process.exit,close_signals:{SIGHUP:!1,SIGTERM:!1,SIGINT:!1,SIGBREAK:!1},plugin:{load_once:!1}},internal:{print:{log:null,err:null}},status:{interval:6e4,running:!1},transport:{port:10101},limits:{maxparents:33},events:{},legacy:{action_signature:!1,logging:!1,error_codes:!1,error:!0,transport:!0,meta:!1,actdef:!1,fail:!1,timeout_string:!0}},seneca_util={Eraro:Eraro,Jsonic:Jsonic,Nid:Nid,Patrun:Patrun,Joi:Joi,Optioner:Optioner,clean:Common.clean,pattern:Common.pattern,print:Common.print,error:error,deep:Common.deepextend,deepextend:Common.deepextend,recurse:Common.recurse,copydata:Common.copydata,nil:Common.nil,parsepattern:Common.parsePattern,pincanon:Common.pincanon,router:function(){return Patrun()},resolve_option:Common.resolve_option,flatten:Common.flatten,argprops:Legacy.argprops},intern={util:seneca_util};function Seneca(){Events.EventEmitter.call(this),this.setMaxListeners(0)}function make_seneca(e){var t=make_private();t.error=error;var n=new Seneca;n.private$=t,t.optioner=Options(module,option_defaults,e);var r=t.optioner.get();t.print={log:r.internal.print.log||Print.internal_log,err:r.internal.print.err||Print.internal_err},t.actrouter=r.internal.actrouter||Patrun({gex:!0});var a=r.internal.subrouter||{};t.subrouter={inward:a.inward||Patrun({gex:!0}),outward:a.outward||Patrun({gex:!0})};["log","act_in","act_out","act_err","ready","close"].forEach(function(e){"function"==typeof r.events[e]&&n.on(e,r.events[e])}),t.actnid=Nid({length:r.idlen}),t.didnid=Nid({length:r.didlen}),t.next_action_id=Common.autoincr();var i=t.callpoint=make_callpoint(r.debug.callpoint);n.start_time=Date.now(),n.context={},n.version=Package.version,n.fixedargs={},n.flags={closed:!1},Object.defineProperty(n,"root",{value:n}),t.history=Common.history(r.history);const o=Ready(n);n.order={};const s=Plugin.api_use(i,{debug:!!r.debug.ordu});n.order.plugin=s.ordu,n.toString=API.toString,n.has=API.has,n.find=API.find,n.list=API.list,n.status=API.status,n.reply=API.reply,n.sub=Sub.api_sub,n.list_plugins=API.list_plugins,n.find_plugin=API.find_plugin,n.has_plugin=API.has_plugin,n.ignore_plugin=API.ignore_plugin,n.listen=API.listen(i),n.client=API.client(i),n.gate=API.gate,n.ungate=API.ungate,n.translate=API.translate,n.ping=API.ping,n.use=s.use,n.test=API.test,n.quiet=API.quiet,n.export=API.export,n.depends=API.depends,n.delegate=API.delegate,n.prior=API.prior,n.inward=API.inward,n.outward=API.outward,n.error=API.error,n.fail=r.legacy.fail?Legacy.make_legacy_fail(r):API.fail,n.explain=API.explain,n.decorate=API.decorate,n.seneca=API.seneca,n.close=API.close(i),n.options=API.options,n.fix=API.fix,n.wrap=API.wrap,n.add=Add.api_add,n.act=Act.api_act,n.ready=o.api_ready,n.internal=function(){return{ordu:{use:s.ordu}}},n.findact=n.find,n.plugins=API.list_plugins,n.findplugin=API.find_plugin,n.hasplugin=API.has_plugin,n.hasact=Legacy.hasact,n.act_if=Legacy.act_if,n.findpins=Legacy.findpins,n.pinact=Legacy.findpins,n.next_act=Legacy.next_act,n.idgen=Nid({length:r.idlen}),r.tag=null!=r.tag?r.tag:option_defaults.tag,n.id=r.id$||n.idgen()+"/"+n.start_time+"/"+process.pid+"/"+n.version+"/"+r.tag,n.tag=r.tag,(r.debug.short_logs||r.log.short)&&(r.idlen=2,n.idgen=Nid({length:r.idlen}),n.id=n.idgen()+"/"+r.tag),n.fullname="Seneca/"+n.id,n.die=Common.makedie(n,{type:"sys",plugin:"seneca",tag:n.version,id:n.id,callpoint:i}),n.util=seneca_util,t.exports={options:r},t.decorations={},n.on("error",n.die),t.ge=GateExecutor({timeout:r.timeout}).clear(o.clear_ready).start(),r.status.interval>0&&r.status.running&&(t.stats=t.stats||{},t.status_interval=setInterval(function(){n.log.info({kind:"status",alive:Date.now()-t.stats.start,act:t.stats.act})},r.status.interval)),r.stats&&(t.timestats=new Stats.NamedStats(r.stats.size,r.stats.interval),r.stats.running&&setInterval(function(){t.timestats.calculate()},r.stats.interval)),t.plugin_order={byname:[],byref:[]},t.use=UsePlugin({prefix:["seneca-","@seneca/"],module:r.internal.module||module,msgprefix:!1,builtin:"",merge_defaults:!1}),t.action_modifiers=[function(e){e.rules=Object.assign(e.rules,Common.deepextend({},e.func.validate||{}))}],t.sub={handler:null,tracers:[]},t.inward=LegacyOrdu({name:"inward"}).add(Inward.msg_modify).add(Inward.closed).add(Inward.act_cache).add(Inward.act_default).add(Inward.act_not_found).add(Inward.act_stats).add(Inward.validate_msg).add(Inward.warnings).add(Inward.msg_meta).add(Inward.limit_msg).add(Inward.prepare_delegate).add(Inward.sub).add(Inward.announce),t.outward=LegacyOrdu({name:"outward"}).add(Outward.make_error).add(Outward.act_stats).add(Outward.act_cache).add(Outward.res_object).add(Outward.res_entity).add(Outward.msg_meta).add(Outward.trace).add(Outward.sub).add(Outward.announce).add(Outward.act_error),r.logger&&"object"==typeof r.logger&&(r.logger.from_options$=!0);var l=t.logging.build_log(n);return(r=t.exports.options=t.optioner.set({log:l})).test&&n.test("string"==typeof r.test?r.test:null),r.quiet&&n.quiet(),t.exit_close=function(){n.close(function(e){e&&1!=t.optioner.get().quiet&&t.print.err(e),r.system.exit(e?null===e.exit?1:e.exit:0)})},Actions(n),r.legacy.transport||(r.legacy.error=!1,r.transport=n.util.deepextend({port:62345,host:"127.0.0.1",path:"/act",protocol:"http"},r.transport),Transport(n)),Print(n,r.debug.argv||process.argv),Common.each(r.system.close_signals,function(e,n){e&&process.once(n,t.exit_close)}),n}function make_private(){return{logging:Logging(),stats:{start:Date.now(),act:{calls:0,done:0,fails:0,cache:0},actmap:{}},actdef:{},transport:{register:[]},plugins:{},ignore_plugins:{}}}function make_callpoint(e){return function(t){return e||t?error.callpoint(new Error,["/seneca/seneca.js","/seneca/lib/","/lodash.js"]):void 0}}Util.inherits(Seneca,Events.EventEmitter),Seneca.prototype.isSeneca=!0,Seneca.prototype.toJSON=function(){return{isSeneca:!0,id:this.id,did:this.did,fixedargs:this.fixedargs,fixedmeta:this.fixedmeta,start_time:this.start_time,version:this.version}},Seneca.prototype[Util.inspect.custom]=Seneca.prototype.toJSON,module.exports=function(e,t){var n="string"==typeof e?Common.deepextend({},{from:e},t):Common.deepextend({},e,t);n.deathdelay=n.death_delay;var r=make_seneca(n),a=r.options();r.log.debug({kind:"notice",options:{...a,internal:null}}),Print.print_options(r,a),a.legacy.transport&&a.default_plugins.transport&&r.use(require("seneca-transport")),a.plugins=null==a.plugins?{}:a.plugins;for(var i=Object.keys(a.plugins),o=0;o<i.length;o++){var s=i[o],l=a.plugins[s];!1===l?r.private$.ignore_plugins[s]=!0:r.use(l)}return r.ready(function(){this.log.info({kind:"notice",data:"hello "+this.id})}),r},module.exports.Seneca=Seneca,module.exports.loghandler=Legacy.loghandler,module.exports.use=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n=module.exports();return n.use.apply(n,e)},module.exports.test=function(){return module.exports().test(...arguments)},module.exports.quiet=function(){return module.exports().quiet(...arguments)},module.exports.util=seneca_util,module.exports.test$={intern:intern};

}).call(this,require('_process'))
},{"./lib/act":177,"./lib/actions":178,"./lib/add":179,"./lib/api":180,"./lib/common":181,"./lib/inward":183,"./lib/legacy":184,"./lib/logging":185,"./lib/options":186,"./lib/outward":187,"./lib/plugin":188,"./lib/print":189,"./lib/ready":190,"./lib/sub":191,"./lib/transport":192,"./package.json":193,"@hapi/joi":28,"_process":144,"eraro":56,"events":82,"gate-executor":86,"jsonic":99,"nid":115,"optioner":124,"ordu":125,"patrun":139,"rolling-stats":169,"seneca-transport":176,"use-plugin":221,"util":228}],195:[function(require,module,exports){
"use strict";var through=require("through2"),StringDecoder=require("string_decoder").StringDecoder;function transform(t,e,r){if(this._last+=this._decoder.write(t),this._last.length>this.maxLength)return r(new Error("maximum buffer reached"));var a=this._last.split(this.matcher);this._last=a.pop();for(var h=0;h<a.length;h++)push(this,this.mapper(a[h]));r()}function flush(t){this._last+=this._decoder.end(),this._last&&push(this,this.mapper(this._last)),t()}function push(t,e){void 0!==e&&t.push(e)}function noop(t){return t}function split(t,e,r){switch(t=t||/\r?\n/,e=e||noop,r=r||{},arguments.length){case 1:"function"==typeof t?(e=t,t=/\r?\n/):"object"!=typeof t||t instanceof RegExp||(r=t,t=/\r?\n/);break;case 2:"function"==typeof t?(r=e,e=t,t=/\r?\n/):"object"==typeof e&&(r=e,e=noop)}var a=through(r,transform,flush);return a._readableState.objectMode=!0,a._readableState.highWaterMark&&!r.highWaterMark&&(a._readableState.highWaterMark=16),a._last="",a._decoder=new StringDecoder("utf8"),a.matcher=t,a.mapper=e,a.maxLength=r.maxLength,a}module.exports=split;

},{"string_decoder":216,"through2":217}],196:[function(require,module,exports){
module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");function Stream(){EE.call(this)}inherits(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){var t=this;function n(r){e.writable&&!1===e.write(r)&&t.pause&&t.pause()}function a(){t.readable&&t.resume&&t.resume()}t.on("data",n),e.on("drain",a),e._isStdio||r&&!1===r.end||(t.on("end",i),t.on("close",s));var o=!1;function i(){o||(o=!0,e.end())}function s(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function m(e){if(u(),0===EE.listenerCount(this,"error"))throw e}function u(){t.removeListener("data",n),e.removeListener("drain",a),t.removeListener("end",i),t.removeListener("close",s),t.removeListener("error",m),e.removeListener("error",m),t.removeListener("end",u),t.removeListener("close",u),e.removeListener("close",u)}return t.on("error",m),e.on("error",m),t.on("end",u),t.on("close",u),e.on("close",u),e.emit("pipe",t),e};

},{"events":82,"inherits":93,"readable-stream/duplex.js":153,"readable-stream/passthrough.js":164,"readable-stream/readable.js":165,"readable-stream/transform.js":166,"readable-stream/writable.js":167}],197:[function(require,module,exports){
(function (global){
var ClientRequest=require("./lib/request"),response=require("./lib/response"),extend=require("xtend"),statusCodes=require("builtin-status-codes"),url=require("url"),http=exports;http.request=function(e,t){e="string"==typeof e?url.parse(e):extend(e);var r=-1===global.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||r,n=e.hostname||e.host,o=e.port,p=e.path||"/";n&&-1!==n.indexOf(":")&&(n="["+n+"]"),e.url=(n?s+"//"+n:"")+(o?":"+o:"")+p,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var u=new ClientRequest(e);return t&&u.on("response",t),u},http.get=function(e,t){var r=http.request(e,t);return r.end(),r},http.ClientRequest=ClientRequest,http.IncomingMessage=response.IncomingMessage,http.Agent=function(){},http.Agent.defaultMaxSockets=4,http.globalAgent=new http.Agent,http.STATUS_CODES=statusCodes,http.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./lib/request":199,"./lib/response":200,"builtin-status-codes":50,"url":219,"xtend":229}],198:[function(require,module,exports){
(function (global){
var xhr;function getXHR(){if(void 0!==xhr)return xhr;if(global.XMLHttpRequest){xhr=new global.XMLHttpRequest;try{xhr.open("GET",global.XDomainRequest?"/":"https://example.com")}catch(e){xhr=null}}else xhr=null;return xhr}function checkTypeSupport(e){var r=getXHR();if(!r)return!1;try{return r.responseType=e,r.responseType===e}catch(e){}return!1}function isFunction(e){return"function"==typeof e}exports.fetch=isFunction(global.fetch)&&isFunction(global.ReadableStream),exports.writableStream=isFunction(global.WritableStream),exports.abortController=isFunction(global.AbortController),exports.arraybuffer=exports.fetch||checkTypeSupport("arraybuffer"),exports.msstream=!exports.fetch&&checkTypeSupport("ms-stream"),exports.mozchunkedarraybuffer=!exports.fetch&&checkTypeSupport("moz-chunked-arraybuffer"),exports.overrideMimeType=exports.fetch||!!getXHR()&&isFunction(getXHR().overrideMimeType),xhr=null;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],199:[function(require,module,exports){
(function (process,global,Buffer){
var capability=require("./capability"),inherits=require("inherits"),response=require("./response"),stream=require("readable-stream"),IncomingMessage=response.IncomingMessage,rStates=response.readyStates;function decideMode(e,t){return capability.fetch&&t?"fetch":capability.mozchunkedarraybuffer?"moz-chunked-arraybuffer":capability.msstream?"ms-stream":capability.arraybuffer&&e?"arraybuffer":"text"}var ClientRequest=module.exports=function(e){var t,r=this;stream.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+Buffer.from(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var o=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!capability.abortController)o=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!capability.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=decideMode(t,o),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};function statusValid(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}inherits(ClientRequest,stream.Writable),ClientRequest.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===unsafeHeaders.indexOf(r)&&(this._headers[r]={name:e,value:t})},ClientRequest.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},ClientRequest.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,o=null;"GET"!==t.method&&"HEAD"!==t.method&&(o=new Blob(e._body,{type:(r["content-type"]||{}).value||""}));var n=[];if(Object.keys(r).forEach(function(e){var t=r[e].name,o=r[e].value;Array.isArray(o)?o.forEach(function(e){n.push([t,e])}):n.push([t,o])}),"fetch"===e._mode){var s=null;if(capability.abortController){var i=new AbortController;s=i.signal,e._fetchAbortController=i,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=global.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))}global.fetch(e._opts.url,{method:e._opts.method,headers:n,body:o||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:s}).then(function(t){e._fetchResponse=t,e._connect()},function(t){global.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var a=e._xhr=new global.XMLHttpRequest;try{a.open(e._opts.method,e._opts.url,!0)}catch(t){return void process.nextTick(function(){e.emit("error",t)})}"responseType"in a&&(a.responseType=e._mode),"withCredentials"in a&&(a.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in a&&a.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(a.timeout=t.requestTimeout,a.ontimeout=function(){e.emit("requestTimeout")}),n.forEach(function(e){a.setRequestHeader(e[0],e[1])}),e._response=null,a.onreadystatechange=function(){switch(a.readyState){case rStates.LOADING:case rStates.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(a.onprogress=function(){e._onXHRProgress()}),a.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{a.send(o)}catch(t){return void process.nextTick(function(){e.emit("error",t)})}}}},ClientRequest.prototype._onXHRProgress=function(){statusValid(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new IncomingMessage(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},ClientRequest.prototype._write=function(e,t,r){this._body.push(e),r()},ClientRequest.prototype.abort=ClientRequest.prototype.destroy=function(){this._destroyed=!0,global.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},ClientRequest.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),stream.Writable.prototype.end.call(this,e,t,r)},ClientRequest.prototype.flushHeaders=function(){},ClientRequest.prototype.setTimeout=function(){},ClientRequest.prototype.setNoDelay=function(){},ClientRequest.prototype.setSocketKeepAlive=function(){};var unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)
},{"./capability":198,"./response":200,"_process":144,"buffer":49,"inherits":93,"readable-stream":215}],200:[function(require,module,exports){
(function (process,global,Buffer){
var capability=require("./capability"),inherits=require("inherits"),stream=require("readable-stream"),rStates=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},IncomingMessage=exports.IncomingMessage=function(e,r,s,t){var a=this;if(stream.Readable.call(a),a._mode=s,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",function(){process.nextTick(function(){a.emit("close")})}),"fetch"===s){if(a._fetchResponse=r,a.url=r.url,a.statusCode=r.status,a.statusMessage=r.statusText,r.headers.forEach(function(e,r){a.headers[r.toLowerCase()]=e,a.rawHeaders.push(r,e)}),capability.writableStream){var o=new WritableStream({write:function(e){return new Promise(function(r,s){a._destroyed?s():a.push(Buffer.from(e))?r():a._resumeFetch=r})},close:function(){global.clearTimeout(t),a._destroyed||a.push(null)},abort:function(e){a._destroyed||a.emit("error",e)}});try{return void r.body.pipeTo(o).catch(function(e){global.clearTimeout(t),a._destroyed||a.emit("error",e)})}catch(e){}}var n=r.body.getReader();!function e(){n.read().then(function(r){if(!a._destroyed){if(r.done)return global.clearTimeout(t),void a.push(null);a.push(Buffer.from(r.value)),e()}}).catch(function(e){global.clearTimeout(t),a._destroyed||a.emit("error",e)})}()}else{if(a._xhr=e,a._pos=0,a.url=e.responseURL,a.statusCode=e.status,a.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var r=e.match(/^([^:]+):\s*(.*)/);if(r){var s=r[1].toLowerCase();"set-cookie"===s?(void 0===a.headers[s]&&(a.headers[s]=[]),a.headers[s].push(r[2])):void 0!==a.headers[s]?a.headers[s]+=", "+r[2]:a.headers[s]=r[2],a.rawHeaders.push(r[1],r[2])}}),a._charset="x-user-defined",!capability.overrideMimeType){var i=a.rawHeaders["mime-type"];if(i){var u=i.match(/;\s*charset=([^;])(;|$)/);u&&(a._charset=u[1].toLowerCase())}a._charset||(a._charset="utf-8")}}};inherits(IncomingMessage,stream.Readable),IncomingMessage.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},IncomingMessage.prototype._onXHRProgress=function(){var e=this,r=e._xhr,s=null;switch(e._mode){case"text":if((s=r.responseText).length>e._pos){var t=s.substr(e._pos);if("x-user-defined"===e._charset){for(var a=Buffer.alloc(t.length),o=0;o<t.length;o++)a[o]=255&t.charCodeAt(o);e.push(a)}else e.push(t,e._charset);e._pos=s.length}break;case"arraybuffer":if(r.readyState!==rStates.DONE||!r.response)break;s=r.response,e.push(Buffer.from(new Uint8Array(s)));break;case"moz-chunked-arraybuffer":if(s=r.response,r.readyState!==rStates.LOADING||!s)break;e.push(Buffer.from(new Uint8Array(s)));break;case"ms-stream":if(s=r.response,r.readyState!==rStates.LOADING)break;var n=new global.MSStreamReader;n.onprogress=function(){n.result.byteLength>e._pos&&(e.push(Buffer.from(new Uint8Array(n.result.slice(e._pos)))),e._pos=n.result.byteLength)},n.onload=function(){e.push(null)},n.readAsArrayBuffer(s)}e._xhr.readyState===rStates.DONE&&"ms-stream"!==e._mode&&e.push(null)};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)
},{"./capability":198,"_process":144,"buffer":49,"inherits":93,"readable-stream":215}],201:[function(require,module,exports){
"use strict";function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var codes={};function createErrorType(e,r,t){t||(t=Error);var n=function(e){function t(t,n,o){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,o))||this}return _inheritsLoose(t,e),t}(t);n.prototype.name=t.name,n.prototype.code=e,codes[e]=n}function oneOf(e,r){if(Array.isArray(e)){var t=e.length;return e=e.map(function(e){return String(e)}),t>2?"one of ".concat(r," ").concat(e.slice(0,t-1).join(", "),", or ")+e[t-1]:2===t?"one of ".concat(r," ").concat(e[0]," or ").concat(e[1]):"of ".concat(r," ").concat(e[0])}return"of ".concat(r," ").concat(String(e))}function startsWith(e,r,t){return e.substr(!t||t<0?0:+t,r.length)===r}function endsWith(e,r,t){return(void 0===t||t>e.length)&&(t=e.length),e.substring(t-r.length,t)===r}function includes(e,r,t){return"number"!=typeof t&&(t=0),!(t+r.length>e.length)&&-1!==e.indexOf(r,t)}createErrorType("ERR_INVALID_OPT_VALUE",function(e,r){return'The value "'+r+'" is invalid for option "'+e+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(e,r,t){var n,o;if("string"==typeof r&&startsWith(r,"not ")?(n="must not be",r=r.replace(/^not /,"")):n="must be",endsWith(e," argument"))o="The ".concat(e," ").concat(n," ").concat(oneOf(r,"type"));else{var c=includes(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(oneOf(r,"type"))}return o+=". Received type ".concat(typeof t)},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=codes;

},{}],202:[function(require,module,exports){
(function (process){
"use strict";var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");require("inherits")(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);Readable.call(this,e),Writable.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});

}).call(this,require('_process'))
},{"./_stream_readable":204,"./_stream_writable":206,"_process":144,"inherits":93}],203:[function(require,module,exports){
"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform");function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}require("inherits")(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,o){o(null,r)};

},{"./_stream_transform":205,"inherits":93}],204:[function(require,module,exports){
(function (process,global){
"use strict";var Duplex;module.exports=Readable,Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter,EElistenerCount=function(e,t){return e.listeners(t).length},Stream=require("./internal/streams/stream"),Buffer=require("buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var debug,debugUtil=require("util");debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,createReadableStreamAsyncIterator,from,BufferList=require("./internal/streams/buffer_list"),destroyImpl=require("./internal/streams/destroy"),_require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark,_require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;require("inherits")(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t,r){Duplex=Duplex||require("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark(this,e,"readableHighWaterMark",r),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex=Duplex||require("./_stream_duplex"),!(this instanceof Readable))return new Readable(e);var t=this instanceof Duplex;this._readableState=new ReadableState(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Stream.call(this)}function readableAddChunk(e,t,r,a,n){debug("readableAddChunk",t);var i,d=e._readableState;if(null===t)d.reading=!1,onEofChunk(e,d);else if(n||(i=chunkInvalid(d,t)),i)errorOrDestroy(e,i);else if(d.objectMode||t&&t.length>0)if("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===Buffer.prototype||(t=_uint8ArrayToBuffer(t)),a)d.endEmitted?errorOrDestroy(e,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(e,d,t,!0);else if(d.ended)errorOrDestroy(e,new ERR_STREAM_PUSH_AFTER_EOF);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!r?(t=d.decoder.write(t),d.objectMode||0!==t.length?addChunk(e,d,t,!1):maybeReadMore(e,d)):addChunk(e,d,t,!1)}else a||(d.reading=!1,maybeReadMore(e,d));return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function addChunk(e,t,r,a){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,a?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(e,t){t(e)},Readable.prototype.push=function(e,t){var r,a=this._readableState;return a.objectMode?r=!0:"string"==typeof e&&((t=t||a.defaultEncoding)!==a.encoding&&(e=Buffer.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder);var t=new StringDecoder(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,a="";null!==r;)a+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var MAX_HWM=1073741824;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(debug("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_(e)))}}function emitReadable(e){var t=e._readableState;debug("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_,e))}function emitReadable_(e){var t=e._readableState;debug("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_,e,t))}function resume_(e,t){debug("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable(e){var t=e._readableState;debug("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){if(debug("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function indexOf(e,t){for(var r=0,a=e.length;r<a;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var a,n=t.needReadable;return debug("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",n=!0),t.ended||t.reading?debug("reading or ended",n=!1):n&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(a=e>0?fromList(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==a&&this.emit("data",a),a},Readable.prototype._read=function(e){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED("_read()"))},Readable.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,debug("pipe count=%d opts=%j",a.pipesCount,t);var n=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?d:f;function i(t,n){debug("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,debug("cleanup"),e.removeListener("close",b),e.removeListener("finish",p),e.removeListener("drain",o),e.removeListener("error",u),e.removeListener("unpipe",i),r.removeListener("end",d),r.removeListener("end",f),r.removeListener("data",l),s=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||o())}function d(){debug("onend"),e.end()}a.endEmitted?process.nextTick(n):r.once("end",n),e.on("unpipe",i);var o=pipeOnDrain(r);e.on("drain",o);var s=!1;function l(t){debug("ondata");var n=e.write(t);debug("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==indexOf(a.pipes,e))&&!s&&(debug("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function u(t){debug("onerror",t),f(),e.removeListener("error",u),0===EElistenerCount(e,"error")&&errorOrDestroy(e,t)}function b(){e.removeListener("finish",p),f()}function p(){debug("onfinish"),e.removeListener("close",b),f()}function f(){debug("unpipe"),r.unpipe(e)}return r.on("data",l),prependListener(e,"error",u),e.once("close",b),e.once("finish",p),e.emit("pipe",r),a.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var a=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)a[i].emit("unpipe",this,{hasUnpiped:!1});return this}var d=indexOf(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},Readable.prototype.on=function(e,t){var r=Stream.prototype.on.call(this,e,t),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,debug("on readable",a.length,a.reading),a.length?emitReadable(this):a.reading||process.nextTick(nReadingNextTick,this))),r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(e,t){var r=Stream.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening,this),r},Readable.prototype.removeAllListeners=function(e){var t=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening,this),t},Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!e.readableListening,resume(this,e)),e.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,a=!1;for(var n in e.on("end",function(){if(debug("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){(debug("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(a=!0,e.pause()))}),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var i=0;i<kProxyEvents.length;i++)e.on(kProxyEvents[i],this.emit.bind(this,kProxyEvents[i]));return this._read=function(t){debug("wrapped _read",t),a&&(a=!1,e.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=require("./internal/streams/async_iterator")),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(e,t){return void 0===from&&(from=require("./internal/streams/from")),from(Readable,e,t)});

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../errors":201,"./_stream_duplex":202,"./internal/streams/async_iterator":207,"./internal/streams/buffer_list":208,"./internal/streams/destroy":209,"./internal/streams/from":211,"./internal/streams/state":213,"./internal/streams/stream":214,"_process":144,"buffer":49,"events":82,"inherits":93,"string_decoder/":216,"util":44}],205:[function(require,module,exports){
"use strict";module.exports=Transform;var _require$codes=require("../errors").codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require("./_stream_duplex");function afterTransform(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK);t.writechunk=null,t.writecb=null,null!=e&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",prefinish)}function prefinish(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush(function(e,t){done(r,e,t)})}function done(r,e,t){if(e)return r.emit("error",e);if(null!=t&&r.push(t),r._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(r._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return r.push(null)}require("inherits")(Transform,Duplex),Transform.prototype.push=function(r,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,e)},Transform.prototype._transform=function(r,e,t){t(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Transform.prototype._destroy=function(r,e){Duplex.prototype._destroy.call(this,r,function(r){e(r)})};

},{"../errors":201,"./_stream_duplex":202,"inherits":93}],206:[function(require,module,exports){
(function (process,global){
"use strict";function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}var Duplex;module.exports=Writable,Writable.WritableState=WritableState;var internalUtil={deprecate:require("util-deprecate")},Stream=require("./internal/streams/stream"),Buffer=require("buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer.from(e)}function _isUint8Array(e){return Buffer.isBuffer(e)||e instanceof OurUint8Array}var realHasInstance,destroyImpl=require("./internal/streams/destroy"),_require=require("./internal/streams/state"),getHighWaterMark=_require.getHighWaterMark,_require$codes=require("../errors").codes,ERR_INVALID_ARG_TYPE=_require$codes.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED=_require$codes.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes.ERR_UNKNOWN_ENCODING,errorOrDestroy=destroyImpl.errorOrDestroy;function nop(){}function WritableState(e,t,r){Duplex=Duplex||require("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(e){var t=this instanceof(Duplex=Duplex||require("./_stream_duplex"));if(!t&&!realHasInstance.call(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Stream.call(this)}function writeAfterEnd(e,t){var r=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy(e,r),process.nextTick(t,r)}function validChunk(e,t,r,i){var n;return null===r?n=new ERR_STREAM_NULL_VALUES:"string"==typeof r||t.objectMode||(n=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer"],r)),!n||(errorOrDestroy(e,n),process.nextTick(i,n),!1)}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer.from(t,r)),t}function writeOrBuffer(e,t,r,i,n,o){if(!r){var s=decodeChunk(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var a=t.objectMode?1:i.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,a,i,n,o);return u}function doWrite(e,t,r,i,n,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?(process.nextTick(n,i),process.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,errorOrDestroy(e,i)):(n(i),e._writableState.errorEmitted=!0,errorOrDestroy(e,i),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new ERR_MULTIPLE_CALLBACK;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var o=needFinish(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?process.nextTick(afterWrite,e,r,o,n):afterWrite(e,r,o,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)n[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;n.allBuffers=a,doWrite(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,f=r.encoding,l=r.callback;if(doWrite(e,t,!1,t.objectMode?1:u.length,u,f,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final(function(r){t.pendingcb--,r&&errorOrDestroy(e,r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)})}function prefinish(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal,e,t)))}function finishMaybe(e,t){var r=needFinish(t);if(r&&(prefinish(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}require("inherits")(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable&&(e&&e._writableState instanceof WritableState)}})):realHasInstance=function(e){return e instanceof this},Writable.prototype.pipe=function(){errorOrDestroy(this,new ERR_STREAM_CANNOT_PIPE)},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1,o=!i.objectMode&&_isUint8Array(e);return o&&!Buffer.isBuffer(e)&&(e=_uint8ArrayToBuffer(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ending?writeAfterEnd(this,r):(o||validChunk(this,i,e,r))&&(i.pendingcb++,n=writeOrBuffer(this,i,o,e,t,r)),n},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||endWritable(this,i,r),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(e,t){t(e)};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../errors":201,"./_stream_duplex":202,"./internal/streams/destroy":209,"./internal/streams/state":213,"./internal/streams/stream":214,"_process":144,"buffer":49,"inherits":93,"util-deprecate":222}],207:[function(require,module,exports){
(function (process){
"use strict";var _Object$setPrototypeO;function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var finished=require("./end-of-stream"),kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[kLastResolve];if(null!==t){var r=e[kStream].read();null!==r&&(e[kLastPromise]=null,e[kLastResolve]=null,e[kLastReject]=null,t(createIterResult(r,!1)))}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(r,o){e.then(function(){t[kEnded]?r(createIterResult(void 0,!0)):t[kHandlePromise](r,o)},o)}}var AsyncIteratorPrototype=Object.getPrototypeOf(function(){}),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_defineProperty(_Object$setPrototypeO={get stream(){return this[kStream]},next:function(){var e=this,t=this[kError];if(null!==t)return Promise.reject(t);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise(function(t,r){process.nextTick(function(){e[kError]?r(e[kError]):t(createIterResult(void 0,!0))})});var r,o=this[kLastPromise];if(o)r=new Promise(wrapForNext(o,this));else{var n=this[kStream].read();if(null!==n)return Promise.resolve(createIterResult(n,!1));r=new Promise(this[kHandlePromise])}return this[kLastPromise]=r,r}},Symbol.asyncIterator,function(){return this}),_defineProperty(_Object$setPrototypeO,"return",function(){var e=this;return new Promise(function(t,r){e[kStream].destroy(null,function(e){e?r(e):t(createIterResult(void 0,!0))})})}),_Object$setPrototypeO),AsyncIteratorPrototype),createReadableStreamAsyncIterator=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(t={},kStream,{value:e,writable:!0}),_defineProperty(t,kLastResolve,{value:null,writable:!0}),_defineProperty(t,kLastReject,{value:null,writable:!0}),_defineProperty(t,kError,{value:null,writable:!0}),_defineProperty(t,kEnded,{value:e._readableState.endEmitted,writable:!0}),_defineProperty(t,kHandlePromise,{value:function(e,t){var o=r[kStream].read();o?(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,e(createIterResult(o,!1))):(r[kLastResolve]=e,r[kLastReject]=t)},writable:!0}),t));return r[kLastPromise]=null,finished(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject];return null!==t&&(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,t(e)),void(r[kError]=e)}var o=r[kLastResolve];null!==o&&(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,o(createIterResult(void 0,!0))),r[kEnded]=!0}),e.on("readable",onReadable.bind(null,r)),r};module.exports=createReadableStreamAsyncIterator;

}).call(this,require('_process'))
},{"./end-of-stream":210,"_process":144}],208:[function(require,module,exports){
"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var _require=require("buffer"),Buffer=_require.Buffer,_require2=require("util"),inspect=_require2.inspect,custom=inspect&&inspect.custom||"inspect";function copyBuffer(e,t,n){Buffer.prototype.copy.call(e,t,n)}module.exports=function(){function e(){_classCallCheck(this,e),this.head=null,this.tail=null,this.length=0}return _createClass(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return Buffer.alloc(0);for(var t=Buffer.allocUnsafe(e>>>0),n=this.head,r=0;n;)copyBuffer(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var a=t.data,i=e>a.length?a.length:e;if(i===a.length?r+=a:r+=a.slice(0,e),0===(e-=i)){i===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(i));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=Buffer.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,i=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,i),0===(e-=i)){i===a.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(i));break}++r}return this.length-=r,t}},{key:custom,value:function(e,t){return inspect(this,_objectSpread({},t,{depth:0,customInspect:!1}))}}]),e}();

},{"buffer":49,"util":44}],209:[function(require,module,exports){
(function (process){
"use strict";function destroy(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,t)):process.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?r._writableState?r._writableState.errorEmitted?process.nextTick(emitCloseNT,r):(r._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,r,t)):process.nextTick(emitErrorAndCloseNT,r,t):e?(process.nextTick(emitCloseNT,r),e(t)):process.nextTick(emitCloseNT,r)}),this)}function emitErrorAndCloseNT(t,e){emitErrorNT(t,e),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}function errorOrDestroy(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}module.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy};

}).call(this,require('_process'))
},{"_process":144}],210:[function(require,module,exports){
"use strict";var ERR_STREAM_PREMATURE_CLOSE=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function once(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(this,n)}}}function noop(){}function isRequest(e){return e.setHeader&&"function"==typeof e.abort}function eos(e,r,t){if("function"==typeof r)return eos(e,null,r);r||(r={}),t=once(t||noop);var n=r.readable||!1!==r.readable&&e.readable,o=r.writable||!1!==r.writable&&e.writable,i=function(){e.writable||l()},a=e._writableState&&e._writableState.finished,l=function(){o=!1,a=!0,n||t.call(e)},s=e._readableState&&e._readableState.endEmitted,c=function(){n=!1,s=!0,o||t.call(e)},u=function(r){t.call(e,r)},f=function(){var r;return n&&!s?(e._readableState&&e._readableState.ended||(r=new ERR_STREAM_PREMATURE_CLOSE),t.call(e,r)):o&&!a?(e._writableState&&e._writableState.ended||(r=new ERR_STREAM_PREMATURE_CLOSE),t.call(e,r)):void 0},d=function(){e.req.on("finish",l)};return isRequest(e)?(e.on("complete",l),e.on("abort",f),e.req?d():e.on("request",d)):o&&!e._writableState&&(e.on("end",i),e.on("close",i)),e.on("end",c),e.on("finish",l),!1!==r.error&&e.on("error",u),e.on("close",f),function(){e.removeListener("complete",l),e.removeListener("abort",f),e.removeListener("request",d),e.req&&e.req.removeListener("finish",l),e.removeListener("end",i),e.removeListener("close",i),e.removeListener("finish",l),e.removeListener("end",c),e.removeListener("error",u),e.removeListener("close",f)}}module.exports=eos;

},{"../../../errors":201}],211:[function(require,module,exports){
module.exports=function(){throw new Error("Readable.from is not available in the browser")};

},{}],212:[function(require,module,exports){
"use strict";var eos;function once(e){var r=!1;return function(){r||(r=!0,e.apply(void 0,arguments))}}var _require$codes=require("../../../errors").codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&"function"==typeof e.abort}function destroyer(e,r,n,o){o=once(o);var t=!1;e.on("close",function(){t=!0}),void 0===eos&&(eos=require("./end-of-stream")),eos(e,{readable:r,writable:n},function(e){if(e)return o(e);t=!0,o()});var i=!1;return function(r){if(!t&&!i)return i=!0,isRequest(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(r||new ERR_STREAM_DESTROYED("pipe"))}}function call(e){e()}function pipe(e,r){return e.pipe(r)}function popCallback(e){return e.length?"function"!=typeof e[e.length-1]?noop:e.pop():noop}function pipeline(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o,t=popCallback(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new ERR_MISSING_ARGS("streams");var i=r.map(function(e,n){var u=n<r.length-1;return destroyer(e,u,n>0,function(e){o||(o=e),e&&i.forEach(call),u||(i.forEach(call),t(o))})});return r.reduce(pipe)}module.exports=pipeline;

},{"../../../errors":201,"./end-of-stream":210}],213:[function(require,module,exports){
"use strict";var ERR_INVALID_OPT_VALUE=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(r,e,t){return null!=r.highWaterMark?r.highWaterMark:e?r[t]:null}function getHighWaterMark(r,e,t,a){var i=highWaterMarkFrom(e,a,t);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE(a?t:"highWaterMark",i);return Math.floor(i)}return r.objectMode?16:16384}module.exports={getHighWaterMark:getHighWaterMark};

},{"../../../errors":201}],214:[function(require,module,exports){
module.exports=require("events").EventEmitter;

},{"events":82}],215:[function(require,module,exports){
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js");

},{"./lib/_stream_duplex.js":202,"./lib/_stream_passthrough.js":203,"./lib/_stream_readable.js":204,"./lib/_stream_transform.js":205,"./lib/_stream_writable.js":206,"./lib/internal/streams/end-of-stream.js":210,"./lib/internal/streams/pipeline.js":212}],216:[function(require,module,exports){
"use strict";var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if("string"!=typeof e&&(Buffer.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}function StringDecoder(t){var e;switch(this.encoding=normalizeEncoding(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(e)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8CheckIncomplete(t,e,s){var i=e.length-1;if(i<s)return 0;var n=utf8CheckByte(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(t.lastNeed=n-2),n):--i<s||-2===n?0:(n=utf8CheckByte(e[i]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}function utf8CheckExtraBytes(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function utf8Text(t,e){var s=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function utf16Text(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function base64Text(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}exports.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};

},{"safe-buffer":170}],217:[function(require,module,exports){
(function (process){
var Transform=require("readable-stream").Transform,inherits=require("util").inherits,xtend=require("xtend");function DestroyableTransform(r){Transform.call(this,r),this._destroyed=!1}function noop(r,t,o){o(null,r)}function through2(r){return function(t,o,e){return"function"==typeof t&&(e=o,o=t,t={}),"function"!=typeof o&&(o=noop),"function"!=typeof e&&(e=null),r(t,o,e)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(r){if(!this._destroyed){this._destroyed=!0;var t=this;process.nextTick(function(){r&&t.emit("error",r),t.emit("close")})}},module.exports=through2(function(r,t,o){var e=new DestroyableTransform(r);return e._transform=t,o&&(e._flush=o),e}),module.exports.ctor=through2(function(r,t,o){function e(t){if(!(this instanceof e))return new e(t);this.options=xtend(r,t),DestroyableTransform.call(this,this.options)}return inherits(e,DestroyableTransform),e.prototype._transform=t,o&&(e.prototype._flush=o),e}),module.exports.obj=through2(function(r,t,o){var e=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},r));return e._transform=t,o&&(e._flush=o),e});

}).call(this,require('_process'))
},{"_process":144,"readable-stream":165,"util":228,"xtend":229}],218:[function(require,module,exports){
(function (setImmediate,clearImmediate){
var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=nextImmediateId++,i=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[t]=!0,nextTick(function(){immediateIds[t]&&(i?e.apply(null,i):e.call(null),exports.clearImmediate(t))}),t},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete immediateIds[e]};

}).call(this,require("timers").setImmediate,require("timers").clearImmediate)
},{"process/browser.js":144,"timers":218}],219:[function(require,module,exports){
"use strict";var punycode=require("punycode"),util=require("./util");function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");function urlParse(t,s,e){if(t&&util.isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}Url.prototype.parse=function(t,s,e){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),r=-1!==h&&h<t.indexOf("#")?"?":"#",a=t.split(r);a[0]=a[0].replace(/\\/g,"/");var o=t=a.join(r);if(o=o.trim(),!e&&1===t.split("#").length){var n=simplePathPattern.exec(o);if(n)return this.path=o,this.href=o,this.pathname=n[1],n[2]?(this.search=n[2],this.query=s?querystring.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var i=protocolPattern.exec(o);if(i){var l=(i=i[0]).toLowerCase();this.protocol=l,o=o.substr(i.length)}if(e||i||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===o.substr(0,2);!u||i&&hostlessProtocol[i]||(o=o.substr(2),this.slashes=!0)}if(!hostlessProtocol[i]&&(u||i&&!slashedProtocol[i])){for(var p,c,f=-1,m=0;m<hostEndingChars.length;m++){-1!==(v=o.indexOf(hostEndingChars[m]))&&(-1===f||v<f)&&(f=v)}-1!==(c=-1===f?o.lastIndexOf("@"):o.lastIndexOf("@",f))&&(p=o.slice(0,c),o=o.slice(c+1),this.auth=decodeURIComponent(p)),f=-1;for(m=0;m<nonHostChars.length;m++){var v;-1!==(v=o.indexOf(nonHostChars[m]))&&(-1===f||v<f)&&(f=v)}-1===f&&(f=o.length),this.host=o.slice(0,f),o=o.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),P=(m=0,y.length);m<P;m++){var d=y[m];if(d&&!d.match(hostnamePartPattern)){for(var b="",q=0,O=d.length;q<O;q++)d.charCodeAt(q)>127?b+="x":b+=d[q];if(!b.match(hostnamePartPattern)){var j=y.slice(0,m),x=y.slice(m+1),U=d.match(hostnamePartStart);U&&(j.push(U[1]),x.unshift(U[2])),x.length&&(o="/"+x.join(".")+o),this.hostname=j.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=punycode.toASCII(this.hostname));var C=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!unsafeProtocol[l])for(m=0,P=autoEscape.length;m<P;m++){var w=autoEscape[m];if(-1!==o.indexOf(w)){var E=encodeURIComponent(w);E===w&&(E=escape(w)),o=o.split(w).join(E)}}var I=o.indexOf("#");-1!==I&&(this.hash=o.substr(I),o=o.slice(0,I));var R=o.indexOf("?");if(-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),s&&(this.query=querystring.parse(this.query)),o=o.slice(0,R)):s&&(this.search="",this.query={}),o&&(this.pathname=o),slashedProtocol[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var S=this.search||"";this.path=C+S}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(a=querystring.stringify(this.query));var o=this.search||a&&"?"+a||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),o&&"?"!==o.charAt(0)&&(o="?"+o),s+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}for(var e=new Url,h=Object.keys(this),r=0;r<h.length;r++){var a=h[r];e[a]=this[a]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];"protocol"!==i&&(e[i]=t[i])}return slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];e[p]=t[p]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var f=e.pathname||"",m=e.search||"";e.path=f+m}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var v=e.pathname&&"/"===e.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||v||e.host&&t.pathname,P=y,d=e.pathname&&e.pathname.split("/")||[],b=(c=t.pathname&&t.pathname.split("/")||[],e.protocol&&!slashedProtocol[e.protocol]);if(b&&(e.hostname="",e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),y=y&&(""===c[0]||""===d[0])),g)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,d=c;else if(c.length)d||(d=[]),d.pop(),d=d.concat(c),e.search=t.search,e.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(b)e.hostname=e.host=d.shift(),(U=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=U.shift(),e.host=e.hostname=U.shift());return e.search=t.search,e.query=t.query,util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!d.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var q=d.slice(-1)[0],O=(e.host||t.host||d.length>1)&&("."===q||".."===q)||""===q,j=0,x=d.length;x>=0;x--)"."===(q=d[x])?d.splice(x,1):".."===q?(d.splice(x,1),j++):j&&(d.splice(x,1),j--);if(!y&&!P)for(;j--;j)d.unshift("..");!y||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),O&&"/"!==d.join("/").substr(-1)&&d.push("");var U,C=""===d[0]||d[0]&&"/"===d[0].charAt(0);b&&(e.hostname=e.host=C?"":d.length?d.shift():"",(U=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=U.shift(),e.host=e.hostname=U.shift()));return(y=y||e.host&&d.length)&&!C&&d.unshift(""),d.length?e.pathname=d.join("/"):(e.pathname=null,e.path=null),util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};

},{"./util":220,"punycode":48,"querystring":152}],220:[function(require,module,exports){
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};

},{}],221:[function(require,module,exports){
"use strict";var Path=require("path"),Module=require("module"),Nid=require("nid"),Norma=require("norma"),Eraro=require("eraro"),Optioner=require("optioner");function make(e){e=Object.assign({prefix:"plugin-",builtin:"../plugin/",module:module.parent,errmsgprefix:!0,system_modules:intern.make_system_modules(),merge_defaults:!0},e);var n=Eraro({package:"use-plugin",msgmap:msgmap(),module:module,prefix:e.errmsgprefix});function i(){return use_plugin_desc(build_plugin_desc(Norma("{plugin:o|f|s, options:o|s|n|b?, callback:f?}",arguments),e,n),e,n)}return i.Optioner=Optioner,i.Joi=Optioner.Joi,i.use_plugin_desc=function(i){return use_plugin_desc(i,e,n)},i.build_plugin_desc=function(){return build_plugin_desc(Norma("{plugin:o|f|s, options:o|s|n|b?, callback:f?}",arguments),e,n)},i}function use_plugin_desc(e,n,i){e.search=build_plugin_names(e.name,n.builtin,n.prefix,n.system_modules),"function"!=typeof e.init&&load_plugin(e,n.module,i);var r=null,o=Optioner.Joi;if(r=e.init&&(o.isSchema(e.init.defaults,{legacy:!0})||"function"==typeof e.init.defaults)?e.init.defaults:o.isSchema(e.defaults,{legacy:!0})||"function"==typeof e.defaults?e.defaults:Object.assign({},e.defaults,e.init&&e.init.defaults),e.defaults=r,n.merge_defaults&&"object"==typeof r)try{e.options=Optioner(r,{allow_unknown:!0}).check(e.options)}catch(n){throw i("invalid_option",{name:e.name,err_msg:n.message,options:e.options})}if("function"!=typeof e.init){for(var t={},u=0;u<e.history.length;u++){var a=e.history[u],l=Path.dirname(a.module);t[l]=t[l]||[],t[l].push(a.path)}var s=[];throw Object.keys(t).forEach(function(e){s.push("[ "+Path.resolve(e)+": "),t[e].forEach(function(e){s.push(e+", ")}),s.push(" ] ")}),e.searchlist=s.join(""),i("not_found",e)}return e}function build_plugin_desc(e,n,i){var r=e.plugin,o=null==e.options?null==r.options?{}:r.options:e.options,t={options:o="object"==typeof o?o:{value$:o},callback:e.callback,history:[]};if("string"==typeof r)t.name=r;else if("function"==typeof r){if(""!==r.name)t.name=r.name;else{var u=Array.isArray(n.prefix)?n.prefix[0]:n.prefix;t.name=u+Nid()}t.init=r}else if("object"==typeof r){var a=(t=Object.assign({},r,t)).name;if("string"!=typeof a&&(a=null!=t.init?t.init.name:null),null==a)throw i("no_name",{plugin:r});if(t.name=a,null!=t.init&&"function"!=typeof t.init)throw i("no_init_function",{name:a,plugin:r})}t.options=Object.assign({},t.options||{},o||{});var l=/^(.+)\$(.+)$/.exec(t.name);if(l&&(t.name=l[1],t.tag=l[2]),t.full=t.name+(null==t.tag||""==t.tag?"":"$"+t.tag),!t.name)throw i("no_name",t);return t}function load_plugin(e,n,i){for(var r,o=n,t=!0,u=0,a={};null==a.initfunc&&(r=make_reqfunc(o));){if((a=perform_require(r,e,t,u)).error)throw handle_load_error(a.error,a.found,e,i);t=!1,u++,o=o.parent}e.modulepath=a.module,e.requirepath=a.require,e.found=a.found,a.initfunc&&null!=a.initfunc.name&&""!==a.initfunc.name&&(e.name=a.initfunc.name),e.init=a.initfunc,e.init&&"object"==typeof e.init.defaults&&(e.defaults=Object.assign({},e.init.defaults))}function handle_load_error(e,n,i,r){return i.err=e,i.found=n,i.found_name=i.found.name,i.err_msg=e.message,e instanceof SyntaxError?r("syntax_error",i):"MODULE_NOT_FOUND"==e.code?(i.err_msg=e.stack.replace(/\n.*\(module\.js:.*/g,""),i.err_msg=i.err_msg.replace(/\s+/g," "),r("require_failed",i)):r("load_failed",i)}function make_reqfunc(e){if(null==e)return null;var n=e.require.bind(e);return n.module=e.id,n}function perform_require(e,n,i,r){var o,t,u=n.search;e:for(var a=0;a<u.length;a++)if(t=u[a],(i||"builtin"!=t.type)&&(0!==r||"builtin"==t.type||!t.name.match(/^[./]/)))try{e.resolve&&(t.path=e.resolve(t.name));var l={module:e.module,path:t.path,name:t.name};n.history.push(l),o=e(t.name);break}catch(e){if("MODULE_NOT_FOUND"==e.code){if(-1==e.message.indexOf(t.name))return{error:e,found:t};continue e}return{error:e,found:t}}return{initfunc:o,module:e.module,require:t.name,path:t.path,found:t}}function build_plugin_names(){var e=Norma("{name:s, builtin:s|a?, prefix:s|a?, system:a?}",arguments),n=e.name,i=e.builtin?Array.isArray(e.builtin)?e.builtin:[e.builtin]:[],r=e.prefix?Array.isArray(e.prefix)?e.prefix:[e.prefix]:[],o=e.system||[],t=[];return n.match(/^[./]/)||i.forEach(function(e){t.push({type:"builtin",name:e+n}),r.forEach(function(i){t.push({type:"builtin",name:e+i+n})})}),r.forEach(function(e){t.push({type:"normal",name:e+n})}),-1==o.indexOf(n)&&t.push({type:"normal",name:n}),t.push({type:"normal",name:"./"+n}),r.forEach(function(e){t.push({type:"normal",name:"./"+e+n})}),t}function msgmap(){return{syntax_error:"Could not load plugin <%=name%> defined in <%=found_name%> due to syntax error: <%=err_msg%>. See STDERR for details.",not_found:"Could not load plugin <%=name%>; searched the following folder and file paths: <%=searchlist%>.",require_failed:"Could not load plugin <%=name%> defined in <%=found_name%> as a require call inside the plugin (or a module required by the plugin) failed: <%=err_msg%>.",no_name:"No name property found for plugin defined by Object <%=plugin%>.",no_init_function:"The init property is not a function for plugin <%=name%> defined by Object <%=plugin%>.",load_failed:"Could not load plugin <%=name%> defined in <%=found_name%> due to error: <%=err_msg%>.",invalid_option:"Plugin <%=name%>: option value is not valid: <%=err_msg%> in options <%=options%>"}}module.exports=make,module.exports.Joi=Optioner.Joi,module.exports.Optioner=Optioner;const intern=module.exports.intern={make_system_modules:function(){return Module.builtinModules}};

},{"eraro":56,"module":47,"nid":115,"norma":117,"optioner":124,"path":138}],222:[function(require,module,exports){
(function (global){
function deprecate(r,e){if(config("noDeprecation"))return r;var o=!1;return function(){if(!o){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),o=!0}return r.apply(this,arguments)}}function config(r){try{if(!global.localStorage)return!1}catch(r){return!1}var e=global.localStorage[r];return null!=e&&"true"===String(e).toLowerCase()}module.exports=deprecate;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],223:[function(require,module,exports){
"use strict";var isES5="function"==typeof Object.defineProperty&&"function"==typeof Object.defineProperties,hasProto=[].__proto__===Array.prototype;if(!isES5||!hasProto)throw new TypeError("util.promisify requires a true ES5 environment, that also supports `__proto__`");var getOwnPropertyDescriptors=require("object.getownpropertydescriptors");if("function"!=typeof Promise)throw new TypeError("`Promise` must be globally available for util.promisify to work.");var callBound=require("es-abstract/helpers/callBound"),$slice=callBound("Array.prototype.slice"),$concat=callBound("Array.prototype.concat"),$forEach=callBound("Array.prototype.forEach"),hasSymbols=require("has-symbols")(),kCustomPromisifiedSymbol=hasSymbols?Symbol("util.promisify.custom"):null,kCustomPromisifyArgsSymbol=hasSymbols?Symbol("customPromisifyArgs"):null;module.exports=function(o){if("function"!=typeof o){var r=new TypeError('The "original" argument must be of type function');throw r.name="TypeError [ERR_INVALID_ARG_TYPE]",r.code="ERR_INVALID_ARG_TYPE",r}if(hasSymbols&&o[kCustomPromisifiedSymbol]){var e=o[kCustomPromisifiedSymbol];if("function"!=typeof e)throw new TypeError("The [util.promisify.custom] property must be a function");return Object.defineProperty(e,kCustomPromisifiedSymbol,{configurable:!0,enumerable:!1,value:e,writable:!1}),e}var t=o[kCustomPromisifyArgsSymbol],i=function(){var r=$slice(arguments),e=this;return new Promise(function(i,s){o.apply(e,$concat(r,function(o){var r=arguments.length>1?$slice(arguments,1):[];if(o)s(o);else if(void 0!==t&&r.length>1){var e={};$forEach(t,function(o,t){e[o]=r[t]}),i(e)}else i(r[0])}))})};return i.__proto__=o.__proto__,Object.defineProperty(i,kCustomPromisifiedSymbol,{configurable:!0,enumerable:!1,value:i,writable:!1}),Object.defineProperties(i,getOwnPropertyDescriptors(o))},module.exports.custom=kCustomPromisifiedSymbol,module.exports.customPromisifyArgs=kCustomPromisifyArgsSymbol;

},{"es-abstract/helpers/callBound":78,"has-symbols":88,"object.getownpropertydescriptors":121}],224:[function(require,module,exports){
"use strict";var util=require("util"),implementation=require("./implementation");module.exports=function(){return"function"==typeof util.promisify?util.promisify:implementation};

},{"./implementation":223,"util":228}],225:[function(require,module,exports){
"use strict";var util=require("util"),getPolyfill=require("./polyfill");module.exports=function(){var e=getPolyfill();return e!==util.promisify&&Object.defineProperty(util,"promisify",{configurable:!0,enumerable:!0,value:e,writable:!0}),e};

},{"./polyfill":224,"util":228}],226:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};

},{}],227:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};

},{}],228:[function(require,module,exports){
(function (process,global){
var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var t=!1;return function(){if(!t){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),t=!0}return e.apply(this,arguments)}};var debugEnviron,debugs={};function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c,a="",l=!1,p=["{","}"];(isArray(r)&&(l=!0,p=["[","]"]),isFunction(r))&&(a=" [Function"+(r.name?": "+r.name:"")+"]");return isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0!==o.length||l&&0!=r.length?t<0?isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=l?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,l)}),e.seen.pop(),reduceToSingleString(c,a,p)):p[0]+a+p[1]}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,c;if((c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){return e.reduce(function(e,r){return 0,r.indexOf("\n")>=0&&0,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":227,"_process":144,"inherits":226}],229:[function(require,module,exports){
module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}

},{}],230:[function(require,module,exports){
"use strict";module.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}};

},{}],231:[function(require,module,exports){
"use strict";function Yallist(t){var e=this;if(e instanceof Yallist||(e=new Yallist),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var l=0,i=arguments.length;l<i;l++)e.push(arguments[l]);return e}function insert(t,e,l){var i=e===t.head?new Node(l,null,e,t):new Node(l,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function push(t,e){t.tail=new Node(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function unshift(t,e){t.head=new Node(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Node(t,e,l,i){if(!(this instanceof Node))return new Node(t,e,l,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,l=t.prev;return e&&(e.prev=l),l&&(l.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Yallist.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Yallist.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Yallist.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)push(this,arguments[t]);return this.length},Yallist.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)unshift(this,arguments[t]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Yallist.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Yallist.prototype.forEach=function(t,e){e=e||this;for(var l=this.head,i=0;null!==l;i++)t.call(e,l.value,i,this),l=l.next},Yallist.prototype.forEachReverse=function(t,e){e=e||this;for(var l=this.tail,i=this.length-1;null!==l;i--)t.call(e,l.value,i,this),l=l.prev},Yallist.prototype.get=function(t){for(var e=0,l=this.head;null!==l&&e<t;e++)l=l.next;if(e===t&&null!==l)return l.value},Yallist.prototype.getReverse=function(t){for(var e=0,l=this.tail;null!==l&&e<t;e++)l=l.prev;if(e===t&&null!==l)return l.value},Yallist.prototype.map=function(t,e){e=e||this;for(var l=new Yallist,i=this.head;null!==i;)l.push(t.call(e,i.value,this)),i=i.next;return l},Yallist.prototype.mapReverse=function(t,e){e=e||this;for(var l=new Yallist,i=this.tail;null!==i;)l.push(t.call(e,i.value,this)),i=i.prev;return l},Yallist.prototype.reduce=function(t,e){var l,i=this.head;if(arguments.length>1)l=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,l=this.head.value}for(var n=0;null!==i;n++)l=t(l,i.value,n),i=i.next;return l},Yallist.prototype.reduceReverse=function(t,e){var l,i=this.tail;if(arguments.length>1)l=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,l=this.tail.value}for(var n=this.length-1;null!==i;n--)l=t(l,i.value,n),i=i.prev;return l},Yallist.prototype.toArray=function(){for(var t=new Array(this.length),e=0,l=this.head;null!==l;e++)t[e]=l.value,l=l.next;return t},Yallist.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,l=this.tail;null!==l;e++)t[e]=l.value,l=l.prev;return t},Yallist.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;null!==n&&i<t;i++)n=n.next;for(;null!==n&&i<e;i++,n=n.next)l.push(n.value);return l},Yallist.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var l=new Yallist;if(e<t||e<0)return l;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;null!==n&&i>e;i--)n=n.prev;for(;null!==n&&i>t;i--,n=n.prev)l.push(n.value);return l},Yallist.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var l=0,i=this.head;null!==i&&l<t;l++)i=i.next;var n=[];for(l=0;i&&l<e;l++)n.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(l=2;l<arguments.length;l++)i=insert(this,i,arguments[l]);return n},Yallist.prototype.reverse=function(){for(var t=this.head,e=this.tail,l=t;null!==l;l=l.prev){var i=l.prev;l.prev=l.next,l.next=i}return this.head=e,this.tail=t,this};try{require("./iterator.js")(Yallist)}catch(t){}

},{"./iterator.js":230}],232:[function(require,module,exports){
(function (global){
require("util.promisify/shim")();var Timers=require("timers"),SenecaModule=require("seneca"),SenecaPromisify=require("seneca-promisify");console.log("SP",SenecaPromisify),global.setImmediate=global.setImmediate||Timers.setImmediate;var SenecaExport=function(e,r){(e=e||{}).legacy=e.legacy||!1;var t=SenecaModule(e,r);return t.use(SenecaPromisify),t.use({name:"browser",init:function(e){e.endpoint=e.endpoint||"/seneca",this.add("role:transport,hook:client,type:browser",function(t,n){var i=this;n({send:function(t,n,o){fetch(e.endpoint,{credentials:"same-origin",method:"post",body:r.stringifyJSON(r.externalize_msg(i,t,o))}).then(function(e){return e.ok?e.json():null}).then(function(e){var t=r.internalize_reply(i,e);n(t.err,t.out,t.meta)})}})});var r=this.export("transport/utils")}}),t};SenecaExport.prototype=SenecaModule.prototype,module.exports=SenecaExport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"seneca":194,"seneca-promisify":171,"timers":218,"util.promisify/shim":225}]},{},[232])(232)
});
